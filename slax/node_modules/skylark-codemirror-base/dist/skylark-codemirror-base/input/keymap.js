/**
 * skylark-codemirror-base - A version of codemirror 5.45 core library that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-codemirror-base/
 * @license MIT
 */
define(["../util/browser","../util/misc","./keynames"],function(e,t,l){"use strict";let r={};function o(e){let t,l,r,o,n=e.split(/-(?!$)/);e=n[n.length-1];for(let e=0;e<n.length-1;e++){let i=n[e];if(/^(cmd|meta|m)$/i.test(i))o=!0;else if(/^a(lt)?$/i.test(i))t=!0;else if(/^(c|ctrl|control)$/i.test(i))l=!0;else{if(!/^s(hift)?$/i.test(i))throw new Error("Unrecognized modifier name: "+i);r=!0}}return t&&(e="Alt-"+e),l&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function n(t,l,r){let o=t;return l.altKey&&"Alt"!=o&&(t="Alt-"+t),(e.flipCtrlCmd?l.metaKey:l.ctrlKey)&&"Ctrl"!=o&&(t="Ctrl-"+t),(e.flipCtrlCmd?l.ctrlKey:l.metaKey)&&"Cmd"!=o&&(t="Cmd-"+t),!r&&l.shiftKey&&"Shift"!=o&&(t="Shift-"+t),t}function i(e){return"string"==typeof e?r[e]:e}return r.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},r.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},r.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},r.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},r.default=e.mac?r.macDefault:r.pcDefault,{keyMap:r,normalizeKeyMap:function(e){let l={};for(let r in e)if(e.hasOwnProperty(r)){let n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}let i=t.map(r.split(" "),o);for(let e=0;e<i.length;e++){let t,r;e==i.length-1?(r=i.join(" "),t=n):(r=i.slice(0,e+1).join(" "),t="...");let o=l[r];if(o){if(o!=t)throw new Error("Inconsistent bindings for "+r)}else l[r]=t}delete e[r]}for(let t in l)e[t]=l[t];return e},lookupKey:function e(t,l,r,o){let n=(l=i(l)).call?l.call(t,o):l[t];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&r(n))return"handled";if(l.fallthrough){if("[object Array]"!=Object.prototype.toString.call(l.fallthrough))return e(t,l.fallthrough,r,o);for(let n=0;n<l.fallthrough.length;n++){let i=e(t,l.fallthrough[n],r,o);if(i)return i}}},isModifierKey:function(e){let t="string"==typeof e?e:l.keyNames[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},addModifierNames:n,keyName:function(t,r){if(e.presto&&34==t.keyCode&&t.char)return!1;let o=l.keyNames[t.keyCode];return null!=o&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(o=t.code),n(o,t,r))},getKeyMap:i}});
//# sourceMappingURL=../sourcemaps/input/keymap.js.map
