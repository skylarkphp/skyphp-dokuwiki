{"version":3,"sources":["display/mode_state.js"],"names":["define","models","view_tracking","resetModeState","cm","doc","iter","line","stateAfter","styles","modeFrontier","highlightFrontier","first","startWorker","state","modeGen","curOp","regChange","loadMode","mode","getMode","options","modeOption"],"mappings":";;;;;;;AAAAA,QACI,WAEA,mBACD,SACCC,EAEAC,GAEA,aAKA,SAASC,EAAeC,GACpBA,EAAGC,IAAIC,KAAKC,IACJA,EAAKC,aACLD,EAAKC,WAAa,MAClBD,EAAKE,SACLF,EAAKE,OAAS,QAEtBL,EAAGC,IAAIK,aAAeN,EAAGC,IAAIM,kBAAoBP,EAAGC,IAAIO,MACxDR,EAAGS,YAAYT,EAAI,KACnBA,EAAGU,MAAMC,UACLX,EAAGY,OACHd,EAAce,UAAUb,GAEhC,OACIc,SAlBJ,SAAkBd,GACdA,EAAGC,IAAIc,KAAOlB,EAAOmB,QAAQhB,EAAGiB,QAASjB,EAAGC,IAAIiB,YAChDnB,EAAeC,IAiBfD,eAAgBA","file":"../../display/mode_state.js","sourcesContent":["define([\n    '../modes',\n    //'./highlight_worker',// dependence cycle \n    './view_tracking'\n], function (\n    models, \n    //highlight_worker, \n    view_tracking\n) {\n    'use strict';\n    function loadMode(cm) {\n        cm.doc.mode = models.getMode(cm.options, cm.doc.modeOption);\n        resetModeState(cm);\n    }\n    function resetModeState(cm) {\n        cm.doc.iter(line => {\n            if (line.stateAfter)\n                line.stateAfter = null;\n            if (line.styles)\n                line.styles = null;\n        });\n        cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n        cm.startWorker(cm, 100); // highlight_worker.startWorker(cm, 100);\n        cm.state.modeGen++;\n        if (cm.curOp)\n            view_tracking.regChange(cm);\n    }\n    return {\n        loadMode: loadMode,\n        resetModeState: resetModeState\n    };\n});"]}