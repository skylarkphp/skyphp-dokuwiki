{"version":3,"sources":["line/pos.js"],"names":["define","utils_line","Pos","line","ch","sticky","this","cmp","a","b","clipPos","doc","pos","first","last","size","getLine","text","length","linelen","clipToLen","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","n","Math","max","min","clipPosArray","array","out","i"],"mappings":";;;;;;;AAAAA,QAAQ,gBAAiB,SAAUC,GAC/B,aACA,SAASC,EAAIC,EAAMC,EAAIC,EAAS,MAC5B,KAAMC,gBAAgBJ,GAClB,OAAO,IAAIA,EAAIC,EAAMC,EAAIC,GAC7BC,KAAKH,KAAOA,EACZG,KAAKF,GAAKA,EACVE,KAAKD,OAASA,EAElB,SAASE,EAAIC,EAAGC,GACZ,OAAOD,EAAEL,KAAOM,EAAEN,MAAQK,EAAEJ,GAAKK,EAAEL,GAiBvC,SAASM,EAAQC,EAAKC,GAClB,GAAIA,EAAIT,KAAOQ,EAAIE,MACf,OAAOX,EAAIS,EAAIE,MAAO,GAC1B,IAAIC,EAAOH,EAAIE,MAAQF,EAAII,KAAO,EAClC,OAAIH,EAAIT,KAAOW,EACJZ,EAAIY,EAAMb,EAAWe,QAAQL,EAAKG,GAAMG,KAAKC,QAG5D,SAAmBN,EAAKO,GACpB,IAAIf,EAAKQ,EAAIR,GACb,OAAU,MAANA,GAAcA,EAAKe,EACZjB,EAAIU,EAAIT,KAAMgB,GAChBf,EAAK,EACHF,EAAIU,EAAIT,KAAM,GAEdS,EATJQ,CAAUR,EAAKX,EAAWe,QAAQL,EAAKC,EAAIT,MAAMc,KAAKC,QAiBjE,OACIhB,IAAKA,EACLK,IAAKA,EACLc,eAzCJ,SAAwBb,EAAGC,GACvB,OAAOD,EAAEH,QAAUI,EAAEJ,QAAuB,GAAbE,EAAIC,EAAGC,IAyCtCa,QAvCJ,SAAiBC,GACb,OAAOrB,EAAIqB,EAAEpB,KAAMoB,EAAEnB,KAuCrBoB,OArCJ,SAAgBhB,EAAGC,GACf,OAAOF,EAAIC,EAAGC,GAAK,EAAIA,EAAID,GAqC3BiB,OAnCJ,SAAgBjB,EAAGC,GACf,OAAOF,EAAIC,EAAGC,GAAK,EAAID,EAAIC,GAmC3BiB,SAjCJ,SAAkBf,EAAKgB,GACnB,OAAOC,KAAKC,IAAIlB,EAAIE,MAAOe,KAAKE,IAAIH,EAAGhB,EAAIE,MAAQF,EAAII,KAAO,KAiC9DL,QAASA,EACTqB,aAfJ,SAAsBpB,EAAKqB,GACvB,IAAIC,KACJ,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAMd,OAAQgB,IAC9BD,EAAIC,GAAKxB,EAAQC,EAAKqB,EAAME,IAChC,OAAOD","file":"../../line/pos.js","sourcesContent":["define(['./utils_line'], function (utils_line) {\n    'use strict';\n    function Pos(line, ch, sticky = null) {\n        if (!(this instanceof Pos))\n            return new Pos(line, ch, sticky);\n        this.line = line;\n        this.ch = ch;\n        this.sticky = sticky;\n    }\n    function cmp(a, b) {\n        return a.line - b.line || a.ch - b.ch;\n    }\n    function equalCursorPos(a, b) {\n        return a.sticky == b.sticky && cmp(a, b) == 0;\n    }\n    function copyPos(x) {\n        return Pos(x.line, x.ch);\n    }\n    function maxPos(a, b) {\n        return cmp(a, b) < 0 ? b : a;\n    }\n    function minPos(a, b) {\n        return cmp(a, b) < 0 ? a : b;\n    }\n    function clipLine(doc, n) {\n        return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n    }\n    function clipPos(doc, pos) {\n        if (pos.line < doc.first)\n            return Pos(doc.first, 0);\n        let last = doc.first + doc.size - 1;\n        if (pos.line > last)\n            return Pos(last, utils_line.getLine(doc, last).text.length);\n        return clipToLen(pos, utils_line.getLine(doc, pos.line).text.length);\n    }\n    function clipToLen(pos, linelen) {\n        let ch = pos.ch;\n        if (ch == null || ch > linelen)\n            return Pos(pos.line, linelen);\n        else if (ch < 0)\n            return Pos(pos.line, 0);\n        else\n            return pos;\n    }\n    function clipPosArray(doc, array) {\n        let out = [];\n        for (let i = 0; i < array.length; i++)\n            out[i] = clipPos(doc, array[i]);\n        return out;\n    }\n    return {\n        Pos: Pos,\n        cmp: cmp,\n        equalCursorPos: equalCursorPos,\n        copyPos: copyPos,\n        maxPos: maxPos,\n        minPos: minPos,\n        clipLine: clipLine,\n        clipPos: clipPos,\n        clipPosArray: clipPosArray\n    };\n});"]}