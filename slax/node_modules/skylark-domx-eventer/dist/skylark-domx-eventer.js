/**
 * skylark-domx-eventer - The skylark eventer library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,r="function"==typeof n&&n.amd,i=!r&&"undefined"!=typeof exports;if(!r&&!n){var o={};n=t.define=function(e,t,n){"function"==typeof n?(o[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),r=e.split("/");n.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?n.pop():n.push(r[i]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):o[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=o[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-domx-eventer/eventer",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-finder","skylark-domx-noder","skylark-domx-data"],function(e,t,n,r,i,o){t.mixin;var a=t.each,s=(Array.prototype.slice,t.uid),u=/^([A-Z]|returnValue$|layer[XY]$)/,c={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},d=/complete|loaded|interactive/;function l(e,n){return!n&&e.isDefaultPrevented||(n||(n=e),t.each(c,function(r,i){var o=n[r];e[r]=function(){return this[i]=t.returnTrue,o&&o.apply(n,arguments)},e[i]=t.returnFalse})),e}function f(e){if(e){var t=(""+e).split(".");return{type:t[0],ns:t.slice(1).sort().join(" ")}}return{type:null,ns:null}}function p(e){return e&&(t.isFunction(e)||t.isFunction(e.handleEvent))}var v=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent],h={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,fullscreenchange:3,fullscreenerror:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,progress:11,textInput:12,tap:13,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15},g=function(){return function(e,n){t.isString(e)?n=n||{}:e=(n=e||{}).type||"";var r=f(e);e=r.type,n=t.mixin({bubbles:!0,cancelable:!0},n),r.ns&&(n.namespace=r.ns);var i=function(e){var t=h[e];t||(t=0);return v[t]}(e),o=new i(e,n);return t.safeMixin(o,n),l(o)}}();function m(e,n){var r,i={originalEvent:e};for(r in e)"keyIdentifier"===r||u.test(r)||void 0===e[r]||(i[r]=e[r]);return n&&t.mixin(i,n),l(i,e)}var y={},w="onfocusin"in window,k={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"},E=function(e){return x[e]||w&&k[e]||e},b={},_=t.klass({init:function(e,t){this._target=e,this._event=t,this._bindings=[]},add:function(e,n){var o=this._bindings,a={fn:e,options:t.mixin({},n)};o.push(a);var s=this;if(!s._listener){s._listener=function(e){var n=this,o=m(e),a=e._args,u=s._bindings,c=o.namespace;a=t.isDefined(a)?[o].concat(a):[o],o.type=s._event,t.each(u,function(e,u){var d=n;if(o.isImmediatePropagationStopped&&o.isImmediatePropagationStopped())return!1;var l=u.fn,f=u.options||{},p=f.selector,v=f.one,h=f.data;if(!c||c==f.ns||-1!==f.ns.indexOf(c)){if(p){if(!(d=r.closest(o.target,p))||d===n)return;t.mixin(o,{currentTarget:d,liveFired:n})}var g=s._event;if(g in x){var m=o.relatedTarget;if(m&&(m===d||i.contains(d,m)))return}t.isDefined(h)&&(o.data=h),v&&s.remove(l,f),!1===(l.handleEvent?l.handleEvent.apply(l,a):f.ctx?l.apply(f.ctx,a):l.apply(d,a))&&(o.preventDefault(),o.stopPropagation())}})};var u=s._event;s._target.addEventListener?s._target.addEventListener(E(u),s._listener,!1):console.warn("invalid eventer object",s._target)}},remove:function(e,n){var r,i;(n=t.mixin({},n)).ns&&(i=n.ns,r=new RegExp("(?:^| )"+i.replace(" "," .* ?")+"(?: |$)")),this._bindings=this._bindings.filter(function(t){var i=(!e||e===t.fn)&&(!r||r.test(t.options.ns))&&(!n.selector||n.selector==t.options.selector);return!i}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(E(this._event),this._listener,!1),this._listener=null)}}),C=t.klass({init:function(e){this._target=e,this._handler={}},register:function(e,n,r){var i=f(e),e=i.type,o=y[e],a=o&&(o.bindType||o.bindEventName),s=this._handler;void 0===s[e]&&(s[e]=new _(this._target,a||e)),s[e].add(n,t.mixin({ns:i.ns},r))},unregister:function(e,n,r){var i=this._handler,o=f(e);if(e=o.type){var a=i[e];a&&a.remove(n,t.mixin({ns:o.ns},r))}else for(e in i){var a=i[e];a.remove(n,t.mixin({ns:o.ns},r))}}}),P=function(e){var t=s(e),n=b[t];return n||(n=b[t]=new C(e)),n};var T=[],D=t.loop(function(){for(var e=0;e<T.length;e++)j(T[e],"focused");T=[]});function S(e,n,r,i,o,a,s){if(t.isPlainObject(n))return t.each(n,function(t,n){S(e,t,r,i,n,s)}),this;t.isString(r)||p(o)||(s=a,a=o,o=i,i=r,r=void 0),p(i)&&(s=a,a=o,o=i,i=void 0),t.isBoolean(a)&&(s=a,a=void 0),!1===o&&(o=t.returnFalse),"string"==typeof n&&(n=n.indexOf(",")>-1?n.split(","):n.split(/\s/));var u=P(e);return n.forEach(function(e){if("ready"==e)return I(o);u.register(e,o,{data:i,selector:r,ctx:a,one:!!s})}),this}function j(e,t,n){var r;(r=t instanceof Event?t:g(t,n))._args=n;var i=e.dispatchEvent||e.trigger;return i?i.call(e,r):console.warn("The evented parameter is not a eventable object"),this}function I(e){return d.test(document.readyState)&&document.body?t.defer(e):document.addEventListener("DOMContentLoaded",e,!1),this}D.start();var L=[],M=t.loop(function(){for(var e=0;e<L.length;e++)j(L[e],"resized");L=[]});M.start();var O={backspace:8,comma:188,delete:46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38};function A(){return A}return n.support.transition&&(y.transitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end}),t.mixin(A,{NativeEvents:h,clear:function(e){return P(e).unregister(),this},create:g,focused:function(e){T.includes(e)||T.push(e)},keys:O,isNativeEvent:function(e){if(t.isString(e))return!!h[e];if(t.isArray(e)){for(var n=0;n<e.length;n++)if(h[e])return!1;return e.length>0}},off:function e(n,r,i,o){if(t.isPlainObject(r))return t.each(r,function(t,r){e(n,t,i,r)}),this;t.isString(i)||p(o)||!1===o||(o=i,i=void 0);!1===o&&(o=t.returnFalse);"string"==typeof r&&(r=r.indexOf(",")>-1?r.split(","):r.split(/\s/));var a=P(n);r&&r.forEach(function(e){a.unregister(e,o,{selector:i})});return this},on:S,one:function(...e){return S(...e,!0),this},proxy:m,ready:I,resized:function(e){L.includes(e)||L.push(e)},shortcuts:function(e){var t=o.data(e,"shortcuts");if(!t){t={},o.data(e,"shortcuts",t);var n=function(e,t){var n=t.metaKey||t.ctrlKey;if(e.ctrl==n&&e.alt==t.altKey&&e.shift==t.shiftKey&&(t.keyCode==e.keyCode||t.charCode&&t.charCode==e.charCode))return t.preventDefault(),"keydown"==t.type&&e.fn(t),!0};S(e,"keyup keypress keydown",function(e){if(!/INPUT|TEXTAREA/.test(e.target.nodeName))for(var r in t)n(t[r],e)})}return{add:function(e,n){(e.indexOf(",")>-1?e.toLowerCase().split(","):e.toLowerCase().split(" ")).forEach(function(e){var r={fn:n,alt:!1,ctrl:!1,shift:!1};e.split("+").forEach(function(e){switch(e){case"alt":case"ctrl":case"shift":r[e]=!0;break;default:r.charCode=e.charCodeAt(0),r.keyCode=O[e]||e.toUpperCase().charCodeAt(0)}});var i=(r.ctrl?"ctrl":"")+","+(r.alt?"alt":"")+","+(r.shift?"shift":"")+","+r.keyCode;t[i]=r})}}},special:y,stop:function(e){window.document.all&&(e.keyCode=0);e.preventDefault&&(e.preventDefault(),e.stopPropagation());return this},trigger:j}),a(h,function(e){A[e]=function(t,n,r,i){return arguments.length>1?this.on(t,e,n,r,i):("focus"==e?t.focus&&t.focus():"blur"==e?t.blur&&t.blur():"click"==e?t.click&&t.click():this.trigger(t,e),this)}}),e.attach("domx.eventer",A)}),e("skylark-domx-eventer/main",["skylark-langx/langx","./eventer","skylark-domx-velm","skylark-domx-query"],function(e,t,n,r){var i=["off","on","one","trigger"];return e.each(t.NativeEvents,function(e){i.push(e)}),n.delegate(i,t),e.each(i,function(e,n){r.fn[n]=r.wraps.wrapper_every_act(t[n],t)}),r.ready=t.ready,t}),e("skylark-domx-eventer",["skylark-domx-eventer/main"],function(e){return e})}(n),!r){var a=require("skylark-langx-ns");i?module.exports=a:t.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-eventer.js.map
