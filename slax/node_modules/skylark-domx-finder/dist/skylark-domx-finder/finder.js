/**
 * skylark-domx-finder - The skylark finder library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-styler"],function(e,r,n,t,u){var s={},o=Array.prototype.filter,a=Array.prototype.slice,c=n.matchesSelector;(function(){var e,r,n,t,i,u={},s={},o=/\\/g,a=function(n,i){if(null==n)return null;if(!0===n.Slick)return n;n=(""+n).replace(/^\s+|\s+$/g,"");var o=(t=!!i)?s:u;if(o[n])return o[n];for(e={Slick:!0,expressions:[],raw:n,reverse:function(){return a(this.raw,!0)}},r=-1;n!=(n=n.replace(p,d)););return e.length=e.expressions.length,o[e.raw]=t?l(e):e},c=function(e){return"!"===e?" ":" "===e?"!":/^!/.test(e)?e.replace(/^!/,""):"!"+e},l=function(e){for(var r=e.expressions,n=0;n<r.length;n++){for(var t=r[n],i={parts:[],tag:"*",combinator:c(t[0].combinator)},u=0;u<t.length;u++){var s=t[u];s.reverseCombinator||(s.reverseCombinator=" "),s.combinator=s.reverseCombinator,delete s.reverseCombinator}t.reverse().push(i)}return e},f=(i=/(?=[\-\[\]{}()*+?.\\\^$|,#\s])/g,function(e){return e.replace(i,"\\")}),p=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+f(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function d(i,u,s,a,l,p,d,b,h,g,v,k,y,m,x,S){if((u||-1===r)&&(e.expressions[++r]=[],n=-1,u))return"";if(s||a||-1===n){s=s||" ";var w=e.expressions[r];t&&w[n]&&(w[n].reverseCombinator=c(s)),w[++n]={combinator:s,tag:"*"}}var A=e.expressions[r][n];if(l)A.tag=l.replace(o,"");else if(p)A.id=p.replace(o,"");else if(d)d=d.replace(o,""),A.classList||(A.classList=[]),A.classes||(A.classes=[]),A.classList.push(d),A.classes.push({value:d,regexp:new RegExp("(^|\\s)"+f(d)+"(\\s|$)")});else if(y)S=(S=S||x)?S.replace(o,""):null,A.pseudos||(A.pseudos=[]),A.pseudos.push({key:y.replace(o,""),value:S,type:1==k.length?"class":"element"});else if(b){var E,$;switch(b=b.replace(o,""),v=(v||"").replace(o,""),h){case"^=":$=new RegExp("^"+f(v));break;case"$=":$=new RegExp(f(v)+"$");break;case"~=":$=new RegExp("(^|\\s)"+f(v)+"(\\s|$)");break;case"|=":$=new RegExp("^"+f(v)+"(-|$)");break;case"=":E=function(e){return v==e};break;case"*=":E=function(e){return e&&e.indexOf(v)>-1};break;case"!=":E=function(e){return v!=e};break;default:E=function(e){return!!e}}""==v&&/^[*$^]=$/.test(h)&&(E=function(){return!1}),E||(E=function(e){return e&&$.test(e)}),A.attributes||(A.attributes=[]),A.attributes.push({key:b,operator:h,value:v,test:E})}return""}var b=this.Slick||{};b.parse=function(e){return a(e)},b.escapeRegExp=f,this.Slick||(this.Slick=b)}).apply(s);var l=/^(?:input|select|textarea|button)$/i,f=/^h\d$/i;a=Array.prototype.slice;s.parseSelector=s.Slick.parse;var p=s.pseudos={button:function(e){var r=e.nodeName.toLowerCase();return"input"===r&&"button"===e.type||"button"===r},checked:function(e){return!!e.checked},contains:function(e,r,n,t){if($(this).text().indexOf(t)>-1)return this},disabled:function(e){return!!e.disabled},enabled:function(e){return!e.disabled},eq:function(e,r,n,t){return r==t},even:function(e,r,n,t){return r%2==0},focus:function(e){return document.activeElement===e&&(e.href||e.type||e.tabindex)},focusable:function(e){return t.focusable(e,null!=e.tabindex)},first:function(e,r){return 0===r},gt:function(e,r,n,t){return r>t},has:function(e,r,n,t){return m(e,t)},header:function(e){return f.test(e.nodeName)},hidden:function(e){return!s.pseudos.visible(e)},input:function(e){return l.test(e.nodeName)},last:function(e,r,n){return r===n.length-1},lt:function(e,r,n,t){return r<t},not:function(e,r,n,t){return!w(e,t)},odd:function(e,r,n,t){return r%2==1},parent:function(e){return!!e.parentElement},selected:function(e){return!!e.selected},tabbable:function(e){var r=e.tabindex,n=null!=r;return(!n||r>=0)&&t.focusable(element,n)},text:function(e){return"text"===e.type},visible:function(e){return e.offsetWidth&&e.offsetWidth},empty:function(e){return!e.hasChildNodes()}};function d(e){return function(r){return"input"===r.nodeName.toLowerCase()&&r.type===e}}function b(e){return function(r){var n=r.nodeName.toLowerCase();return("input"===n||"button"===n)&&r.type===e}}for(i in["first","eq","last"].forEach(function(e){p[e].isArrayFilter=!0}),p.nth=p.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p[i]=d(i);for(i in{submit:!0,reset:!0})p[i]=b(i);function h(e,n,t){for(var i=[],u=t&&r.isString(t);(e=e.parentElement)&&9!==e.nodeType;){if(t)if(u){if(w(e,t))break}else if(r.isArrayLike(t)){if(r.inArray(e,t)>-1)break}else if(e==t)break;n&&!w(e,n)||i.push(e)}return i}function g(e,r){for(var n=e.childNodes,t=[],i=0;i<n.length;i++){1==(e=n[i]).nodeType&&t.push(e)}return r&&(t=s.filter(t,r)),t}function v(e,r,n,t){if(e){n=n||document;do{if(null!=r&&(">"===r[0]?e.parentElement===n&&w(e,r):w(e,r))||t&&e===n)return e;if(e===n)break}while(e=C(e))}return null}function k(e,r){try{return a.call(e.querySelectorAll(r))}catch(e){}return s.query(e,r)}function y(e,r){try{return e.querySelector(r)}catch(e){}var n=s.query(e,r);return n.length>0?n[0]:null}function m(e,r){return r||(r=e,e=document.body),w(e,r)?e:y(e,r)}function x(e,r,n){for(var t=e.childNodes[0];t;){if(1==t.nodeType){if(!r||w(t,r))return t;if(n)break}t=t.nextSibling}return null}function S(e,r,n){for(var t=e.childNodes,i=t[t.length-1];i;){if(1==i.nodeType){if(!r||w(i,r))return i;if(n)break}i=i.previousSibling}return null}function w(e,n){if(!n||!e||1!==e.nodeType)return!1;if(r.isString(n)){try{return c.call(e,n.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(e){}return s.match(e,n)}return r.isArrayLike(n)?r.inArray(e,n)>-1:r.isPlainObject(n)?s.check(e,n):e===n}function A(e,r,n){for(var t=e.nextSibling;t;){if(1==t.nodeType){if(!r||w(t,r))return t;if(n)break}t=t.nextSibling}return null}function E(e,r){for(var n=e.nextSibling,t=[];n;)1==n.nodeType&&(r&&!w(n,r)||t.push(n)),n=n.nextSibling;return t}function C(e,r){var n=e.host&&e!==document&&e.host.nodeType?e.host:e.parentElement;return!n||r&&!w(n,r)?null:n}function N(e,r,n){for(var t=e.previousSibling;t;){if(1==t.nodeType){if(!r||w(t,r))return t;if(n)break}t=t.previousSibling}return null}function F(e,r){for(var n=e.previousSibling,t=[];n;)1==n.nodeType&&(r&&!w(n,r)||t.push(n)),n=n.previousSibling;return t}function q(e,r){for(var n=e.parentElement.firstChild,t=[];n;)1==n.nodeType&&n!==e&&(r&&!w(n,r)||t.push(n)),n=n.nextSibling;return t}s.divide=function(e){var r,n,t,i,u,s="",o=[];if((n=e.id)&&(s+="#"+n),t=e.classes)for(var a=t.length;a--;)s+="."+t[a].value;if(i=e.attributes)for(a=0;a<i.length;a++)i[a].operator?s+="["+i[a].key+i[a].operator+JSON.stringify(i[a].value)+"]":s+="["+i[a].key+"]";if(u=e.pseudos)for(a=u.length;a--;)part=u[a],this.pseudos[part.key]?o.push(part):void 0!==part.value&&(s+=":"+part.key+"("+JSON.stringify(part));return(r=e.tag)&&"*"!==r&&(s=r.toUpperCase()+s),s||(s="*"),{nativeSelector:s,customPseudos:o}},s.check=function(e,r,n,t,i){var u,s,o,a,l,f,p,d,b;if(!i){if(u=r.tag){var h=e.nodeName.toUpperCase();if("*"==u){if(h<"@")return!1}else if(h!=(u||"").toUpperCase())return!1}if((s=r.id)&&e.getAttribute("id")!=s)return!1;if(o=r.classes)for(f=o.length;f--;)if(!(d=e.getAttribute("class"))||!o[f].regexp.test(d))return!1;if(a=r.attributes)for(f=a.length;f--;)if((p=a[f]).operator?!p.test(e.getAttribute(p.key)):!e.hasAttribute(p.key))return!1}if(l=r.pseudos)for(f=l.length;f--;)if(p=l[f],b=this.pseudos[p.key]){if((i&&b.isArrayFilter||!i&&!b.isArrayFilter)&&!b(e,n,t,p.value))return!1}else if(!i&&!c.call(e,p.key))return!1;return!0},s.match=function(e,n){var t;if(!(t=r.isString(n)?s.Slick.parse(n):n))return!0;var i,u,o=t.expressions,a=0;for(i=0;u=o[i];i++)if(1==u.length){var c=u[0];if(this.check(e,c))return!0;a++}if(a==t.length)return!1;var l,f=this.query(document,t);for(i=0;l=f[i++];)if(l===e)return!0;return!1},s.filterSingle=function(e,r){var n=o.call(e,function(n,t){return s.check(n,r,t,e,!1)});return n=o.call(n,function(e,t){return s.check(e,r,t,n,!0)})},s.filter=function(e,n){if(!r.isString(n))return s.filterSingle(e,n);var t,i,u=s.Slick.parse(n).expressions,o=[];for(t=0;i=u[t];t++){if(1!=i.length)throw new Error("not supported selector:"+n);var a=i[0],c=s.filterSingle(e,a);o=r.uniq(o.concat(c))}return o},s.combine=function(e,r){var n,t=r,i=[];switch(r.combinator){case">":i=g(e,t);break;case"+":(n=A(e,t,!0))&&i.push(n);break;case"^":(n=x(e,t,!0))&&i.push(n);break;case"~":i=E(e,t);break;case"++":var u=N(e,t,!0),c=A(e,t,!0);u&&i.push(u),c&&i.push(c);break;case"~~":i=q(e,t);break;case"!":i=h(e,t);break;case"!>":(n=C(e,t))&&i.push(n);break;case"!+":i=N(e,t,!0);break;case"!^":(n=S(e,t,!0))&&i.push(n);break;case"!~":i=F(e,t);break;default:var l=this.divide(r);if(i=a.call(e.querySelectorAll(l.nativeSelector)),l.customPseudos)for(var f=l.customPseudos.length-1;f>=0;f--)i=o.call(i,function(e,r){return s.check(e,{pseudos:[l.customPseudos[f]]},r,i,!1)}),i=o.call(i,function(e,r){return s.check(e,{pseudos:[l.customPseudos[f]]},r,i,!0)})}return i},s.query=function(e,n,t){for(var i,u,o=[],a=this.Slick.parse(n).expressions,c=0;i=a[c];c++){for(var l,f=[e],p=0;u=i[p];p++)(l=r.map(f,function(e,r){return s.combine(e,u)}))&&(f=l);l&&(o=o.concat(l))}return o};var T=function(){return T};return r.mixin(T,{ancestor:function(e,n,t){for(var i=t&&r.isString(t);e=e.parentElement;){if(w(e,n))return e;if(t)if(i){if(w(e,t))break}else if(e==t)break}return null},ancestors:h,byId:function(e,r){return(r=r||t.doc()).getElementById(e)},childAt:function(e,n,t){var i=0,s=e.children;t=r.mixin({ignoreHidden:!0,excluding:null,closesting:null},t);for(var o=0;o<s.length;o++){var a=s[o];if((!t.ignoreHidden||"none"!==u.css(a))&&(!t.excluding||!t.excluding.includes(a))&&(!t.closesting||v(a,t.closesting,e,!1))){if(i===n)return a;i++}}return null},children:g,closest:v,descendant:y,descendants:k,find:m,findAll:function(e,r){return r||(r=e,e=document.body),k(e,r)},firstChild:x,index:function(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)r.isString(n)?w(e,n)&&t++:r.isFunction(n)&&n(e)&&t++,t++;return t},lastChild:S,matches:w,nextSibling:A,nextSiblings:E,parent:C,previousSibling:N,previousSiblings:F,pseudos:s.pseudos,siblings:q}),e.attach("domx.finder",T)});
//# sourceMappingURL=sourcemaps/finder.js.map
