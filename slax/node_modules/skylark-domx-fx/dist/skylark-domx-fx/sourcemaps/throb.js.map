{"version":3,"sources":["throb.js"],"names":["define","transits","fx","throb","elm","params","text","style","timer","time","callback","throbber","noder","createElement","class","className","remove","clearTimeout","styler","css","content","html","appendChild","setTimeout","update","textNode","nodeValue"],"mappings":";;;;;;;AAAAA,QACI,wBACA,QACF,SAASC,EAASC,GAwEhB,OAAOA,EAAGC,MAjEV,SAAeC,EAAKC,IAChBA,EAASA,OAGSC,KACND,EAAOE,MAFnB,IAKIC,EAFAC,EAAOJ,EAAOI,KACdC,EAAWL,EAAOK,SAGlBC,EAAWC,MAAMC,cAAc,OAC3BC,MAAST,EAAOU,WAAa,aAKjCC,EAAS,WACDR,IACAS,aAAaT,GACbA,EAAQ,MAERG,IACAC,MAAMI,OAAOL,GACbA,EAAW,OASnBN,EAAOE,OACPW,OAAOC,IAAIR,EAASN,EAAOE,OAQ/B,IAAIa,EAAUf,EAAOe,SAAY,8BAiBjC,OAZAR,MAAMS,KAAKV,EAASS,GAEpBhB,EAAIkB,YAAYX,GAMZF,IACAD,EAAQe,WALF,WACNP,IACIN,GAAUA,KAGUD,KAIxBE,SAAWA,EACXK,OAAQA,EACRQ,OAnCS,SAASnB,GACVA,GAAUA,EAAOC,MAAQK,IACzBc,SAASC,UAAYrB,EAAOC","file":"../throb.js","sourcesContent":["define([\r\n    \"skylark-domx-transits\",\r\n    \"./fx\"\r\n],function(transits,fx) {\r\n    \r\n    /*   \r\n     * Replace an old node with the specified node.\r\n     * @param {HTMLElement} elm\r\n     * @param {Node} params\r\n     */\r\n    function throb(elm, params) {\r\n        params = params || {};\r\n\r\n        var self = this,\r\n            text = params.text,\r\n            style = params.style,\r\n            time = params.time,\r\n            callback = params.callback,\r\n            timer,\r\n\r\n            throbber = noder.createElement(\"div\", {\r\n                \"class\": params.className || \"throbber\"\r\n            }),\r\n            //_overlay = overlay(throbber, {\r\n            //    \"class\": 'overlay fade'\r\n            //}),\r\n            remove = function() {\r\n                if (timer) {\r\n                    clearTimeout(timer);\r\n                    timer = null;\r\n                }\r\n                if (throbber) {\r\n                    noder.remove(throbber);\r\n                    throbber = null;\r\n                }\r\n            },\r\n            update = function(params) {\r\n                if (params && params.text && throbber) {\r\n                    textNode.nodeValue = params.text;\r\n                }\r\n            };\r\n\r\n        if (params.style) {\r\n            styler.css(throbber,params.style);\r\n        }\r\n\r\n        //throb = noder.createElement(\"div\", {\r\n        //   \"class\": params.throb && params.throb.className || \"throb\"\r\n        //}),\r\n        //textNode = noder.createTextNode(text || \"\"),\r\n \r\n        var content = params.content ||  '<span class=\"throb\"></span>';\r\n\r\n        //throb.appendChild(textNode);\r\n        //throbber.appendChild(throb);\r\n\r\n        noder.html(throbber,content);\r\n        \r\n        elm.appendChild(throbber);\r\n\r\n        var end = function() {\r\n            remove();\r\n            if (callback) callback();\r\n        };\r\n        if (time) {\r\n            timer = setTimeout(end, time);\r\n        }\r\n\r\n        return {\r\n            throbber : throbber,\r\n            remove: remove,\r\n            update: update\r\n        };\r\n    }\r\n\r\n    return fx.throb = throb;\r\n});"]}