/**
 * skylark-domx-i18n - The filer features enhancement for skylark utils.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.1
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","./i18n"],function(e,r){var t=Object.freeze({amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830});function a(r){return e.escapeHTML((a=String(r).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,""),String(a).replace(/&#(\d+);?/g,function(e,r){return String.fromCharCode(r)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(e,r){return String.fromCharCode(parseInt(r,16))}).replace(/&([^;\W]+;?)/g,function(e,r){var a=r.replace(/;$/,""),n=t[r]||r.match(/;$/)&&t[a];return"number"==typeof n?String.fromCharCode(n):"string"==typeof n?n:e})));var a}var n=function(){console.warn.apply(console,arguments)};Object.assign||jQuery.extend;function i(e,r){if(!e)throw new TypeError("Parameter `language` must be a language string. Received "+e+(""===e?"(empty string)":""));this.modules=Object.keys(i.moduleFactories).map(function(r){return[r,(0,i.moduleFactories[r])(e)]}).reduce(function(e,r){var t=r[0],module=r[1];return e[t]=module,e},{}),this.lang=e,this.translations={},this.load=r}return i.prototype.translate=function(e){var r=new RegExp("[a-zA-Z0-9\\-_.\\/]"),t=new RegExp("[^a-zA-Z0-9\\-_.\\/\\]]"),a=0,n=0,i=e.length,o=[],l=!1;function s(e){for(var r=e.length,t=[],a=0,n=0,i=0;a+2<=r;)"["===e[a]&&"["===e[a+1]?(i+=1,a+=1):"]"===e[a]&&"]"===e[a+1]?(i-=1,a+=1):0===i&&","===e[a]&&"\\"!==e[a-1]&&(t.push(e.slice(n,a).trim()),n=a+=1),a+=1;return t.push(e.slice(n,a+1).trim()),t}for(a=e.indexOf("[[",a);a+2<=i&&-1!==a;){o.push(e.slice(n,a)),n=a+=2,l=!0;for(var u,c,p=0,m=!1,g=!1,f=!1,h=!1;a+2<=i;)if(u=e[a],c=e[a+1],!m&&r.test(u))m=!0,a+=1;else if(m&&!g&&":"===u)g=!0,a+=1;else if(g&&!f&&r.test(u))f=!0,a+=1;else if(f&&!h&&","===u)h=!0,a+=1;else if(m&&g&&f&&h||!t.test(u))if("["===u&&"["===c)p+=1,a+=2;else if("]"===u&&"]"===c){if(0===p){var d=e.slice(n,a),v=s(d),y=v[0],b=v.slice(1),A="";b&&b.length&&(A=this.translate(d)),o.push(this.translateKey(y,b,A)),n=a+=2,l=!1;break}p-=1,a+=2}else a+=1;else{if(a+=1,n-=2,l=!1,!(p>0))break;p-=1}a=e.indexOf("[[",a)}var E=e.slice(n);return l&&(E=this.translate(E)),o.push(E),Promise.all(o).then(function(e){return e.join("")})},i.prototype.translateKey=function(e,r,t){var i=this,o=e.split(":",2),l=o[0],s=o[1];return i.modules[l]?Promise.resolve(i.modules[l](s,r)):l&&!s?(n('Missing key in translation token "'+e+'"'),Promise.resolve("[["+l+"]]")):this.getTranslation(l,s).then(function(o){if(!o)return n('Missing translation "'+e+'"'),t||s;var l=r.map(function(e){return i.translate(a(e))});return Promise.all(l).then(function(e){var r=o;return e.forEach(function(e,t){var a=e.replace(/%(?=\d)/g,"&#37;").replace(/\\,/g,"&#44;");r=r.replace(new RegExp("%"+(t+1),"g"),a)}),r})})},i.prototype.getTranslation=function(e,r){var t;return e?(this.translations[e]=this.translations[e]||this.load(this.lang,e).catch(function(){return{}}),t=this.translations[e]):(n("[translator] Parameter `namespace` is "+e+(""===e?"(empty string)":"")),t=Promise.resolve({})),r?t.then(function(e){return e&&e[r]}):t},i.prototype.translateInPlace=function(e,r){r=r||["placeholder","title"];var t,a=(t=[],function e(r){if(3===r.nodeType)t.push(r);else for(var a=0,n=r.childNodes,i=n.length;a<i;a+=1)e(n[a])}(e),t),n=a.map(function(e){return e.nodeValue}).join("  ||  "),i=r.reduce(function(r,t){var a=Array.prototype.map.call(e.querySelectorAll("["+t+'*="[["]'),function(e){return[t,e]});return r.concat(a)},[]),o=i.map(function(e){return e[1].getAttribute(e[0])}).join("  ||  ");return Promise.all([this.translate(n),this.translate(o)]).then(function(e){var r=e[0],t=e[1];r&&r.split("  ||  ").forEach(function(e,r){$(a[r]).replaceWith(e)}),t&&t.split("  ||  ").forEach(function(e,r){i[r][1].setAttribute(i[r][0],e)})})},i.getLanguage=function(){return"en-GB"},i.create=function(e){return e||(e=i.getLanguage()),i.cache[e]=i.cache[e]||new i(e),i.cache[e]},i.cache={},i.registerModule=function(e,r){i.moduleFactories[e]=r,Object.keys(i.cache).forEach(function(t){var a=i.cache[t];a.modules[e]=r(a.lang)})},i.moduleFactories={},i.removePatterns=function(e){for(var r,t=e.length,a=0,n=0,i=0,o="";a<t;)"[["===(r=e.slice(a,a+2))?(0===i&&(o+=e.slice(n,a)),i+=1,a+=2):"]]"===r?(a+=2,0===(i-=1)&&(n=a)):a+=1;return o+=e.slice(n,a)},r.Translator=i});
//# sourceMappingURL=sourcemaps/Translator.js.map
