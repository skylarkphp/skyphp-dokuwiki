/**
 * skylark-domx-iframes - The skylark iframes library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(r,e){var a=e.define,require=e.require,o="function"==typeof a&&a.amd,n=!o&&"undefined"!=typeof exports;if(!o&&!a){var i={};a=e.define=function(r,e,a){"function"==typeof a?(i[r]={factory:a,deps:e.map(function(e){return function(r,e){if("."!==r[0])return r;var a=e.split("/"),o=r.split("/");a.pop();for(var n=0;n<o.length;n++)"."!=o[n]&&(".."==o[n]?a.pop():a.push(o[n]));return a.join("/")}(e,r)}),resolved:!1,exports:null},require(r)):i[r]={factory:null,resolved:!0,exports:a}},require=e.require=function(r){if(!i.hasOwnProperty(r))throw new Error("Module "+r+" has not been defined");var module=i[r];if(!module.resolved){var a=[];module.deps.forEach(function(r){a.push(require(r))}),module.exports=module.factory.apply(e,a)||null,module.resolved=!0}return module.exports}}if(!a)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(r,require){r("skylark-domx-iframes/iframes",["skylark-langx-ns"],function(r){return r.attach("domx.iframes")}),r("skylark-domx-iframes/create",["skylark-domx-noder","./iframes"],function(r,e){"use strict";return e.create=function(e,a){let o={},n={};(e=e||{}).id&&(o.id=e.id);e.url&&(o.src=e.url);e.style&&(o.style=e.style);e.onload&&(o.onload=e.onload);e.onerror&&(o.onload=e.onerror);e.className&&(o.className=e.className);e.sandbox&&(n.sandbox=e.sandbox);e.frameBorder&&(n.frameBorder=e.frameBorder);e.name&&(n.name=e.name);let i=r.create("iframe",o,n,a);e.contentWindowName&&(i.contentWindow.name=e.contentWindowName);return i}}),r("skylark-domx-iframes/hook-sizing",["skylark-domx-eventer","./iframes"],function(r,e){"use strict";return e.hookSizing=function(e){r.on(window,"message",function(r){r||(r=window.event);e.style.height=1*r.data.height+2+"px"})}}),r("skylark-domx-iframes/load-real",["skylark-domx-noder","skylark-domx-data","./iframes","./hook-sizing"],function(r,e,a,o){return a.loadReal=function(a,o){o=o||{};var n=r.clone(a),i=o.url;i||(i=e.attr(n,o.urlAttrName||"data-url"));i=i.split("&")[0],e.prop(n,"src",i),e.prop(n,"_src",i),r.replace(n,ifame)}}),r("skylark-domx-iframes/lazy-load",["skylark-domx-eventer","skylark-domx-data","skylark-domx-geom","./iframes","./load-real"],function(r,e,a,o,n){var i;function t(){i||(i=[],r.on(window,"scroll",function(){!function(){var r=0,e=[];for(r=0;r<i.length;r++)a.inview(i[r],400)&&e.unshift({iframe:i[r],i:r});for(r=e.length-1;r>=0;r--)i.splice(e[r].i,1),n(e[r].iframe)}()}))}return o.lazyLoad=function(r,a){t(),(a=a||{}).url&&e.attr(r,a.urlAttrName||"data-url",a.url);a.holdingUrl&&e.prop(r,"src",a.holdingUrl);i.push(r)}}),r("skylark-domx-iframes/replace",["skylark-langx-urls/getQuery","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","./iframes","./create","./load-real","./lazy-load"],function(r,e,a,o,n,i,t,l){"use strict";return n.replace=function(n,s){s=s||{};i({className:n.className,id:n.id,style:{border:"1px solid #aaa"}});var d=s.url||n.href,f=s.size||r(n.search),m=s.holdingUrl;o.css(iframe,"width",f.width||"100%"),o.css(iframe,"minHeight",f.height||"300px"),f.height&&o.css(iframe,"maxHeight",f.height);a.inview(n,100)?t(iframe,{url:d}):l(iframe,{url:d,holdingUrl:m});e.replace(iframe,n)}}),r("skylark-domx-iframes/main",["./iframes","./create","./lazy-load","./load-real","./replace"],function(){}),r("skylark-domx-iframes",["skylark-domx-iframes/main"],function(r){return r})}(a),!o){var t=require("skylark-langx-ns");n?module.exports=t:e.skylarkjs=t}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-iframes.js.map
