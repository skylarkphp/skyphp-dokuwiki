{"version":3,"sources":["lazy-load.js"],"names":["define","eventer","datax","geom","iframes","loadReal","pending","init","on","window","i","todo","length","inview","unshift","iframe","splice","check","lazyLoad","options","url","attr","urlAttrName","holdingUrl","prop","push"],"mappings":";;;;;;;AAAAA,QACC,uBACA,oBACA,oBACA,YACA,eACC,SAASC,EAAQC,EAAMC,EAAKC,EAAQC,GACrC,IAAIC,EAkBJ,SAASC,IACJD,IAIJA,KAEAL,EAAQO,GAAGC,OAAO,SAAS,YAtB1B,WACE,IAAIC,EAAI,EACJC,KACJ,IAAKD,EAAI,EAAGA,EAAIJ,EAAQM,OAAQF,IAC1BP,EAAKU,OAAOP,EAAQI,GAAI,MAC1BC,EAAKG,SAAUC,OAAQT,EAAQI,GAAIA,EAAGA,IAI1C,IAAKA,EAAIC,EAAKC,OAAQ,EAAIF,GAAI,EAAIA,IAChCJ,EAAQU,OAAOL,EAAKD,GAAGA,EAAG,GAC1BL,EAASM,EAAKD,GAAGK,QAYrBE,MAsBF,OAAOb,EAAQc,SAlBf,SAAkBH,EAAOI,GACxBZ,KAEAY,EAAUA,OAIOC,KACXlB,EAAMmB,KAAKN,EAAQI,EAAQG,aAAe,WAAYH,EAAQC,KAG3DD,EAAQI,YACXrB,EAAMsB,KAAKT,EAAO,MAAMI,EAAQI,YAGtCjB,EAAQmB,KAAKV","file":"../lazy-load.js","sourcesContent":["define([\r\n\t\"skylark-domx-eventer\",\r\n\t\"skylark-domx-data\",\r\n\t\"skylark-domx-geom\",\r\n\t\"./iframes\",\r\n\t\"./load-real\"\r\n],function(eventer,datax,geom,iframes,loadReal){\r\n\tvar pending;\r\n\r\n\r\n  \tfunction check() {\r\n\t    var i = 0;\r\n\t    var todo = [];\r\n\t    for (i = 0; i < pending.length; i++) {\r\n\t      if (geom.inview(pending[i], 400)) {\r\n\t        todo.unshift({ iframe: pending[i], i: i });\r\n\t      }\r\n\t    }\r\n\r\n\t    for (i = todo.length -1 ; i >=0 ; i--) {\r\n\t      pending.splice(todo[i].i, 1);\r\n\t      loadReal(todo[i].iframe);\r\n\t    }\r\n  \t}\r\n\r\n\tfunction init() {\r\n\t\tif (pending) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tpending = [];\r\n\r\n\t\teventer.on(window,\"scroll\",function(){\r\n\t\t\tcheck();\r\n\t\t});\r\n\t}\r\n\r\n\tfunction lazyLoad(iframe,options) {\r\n\t\tinit();\r\n\r\n\t\toptions = options || {};\r\n\t\r\n      \t///iframe.setAttribute('data-url', url);\r\n      \t///iframe.src = 'https://jsbin.com/embed-holding';\r\n      \tif (options.url) {\r\n      \t\tdatax.attr(iframe,(options.urlAttrName || \"data-url\"),options.url)\r\n      \t}\r\n\r\n      \tif (options.holdingUrl) {\r\n      \t\tdatax.prop(iframe,\"src\",options.holdingUrl)      \t\t\r\n      \t}\r\n\r\n\t\tpending.push(iframe);\r\n\t}\r\n\r\n\treturn iframes.lazyLoad = lazyLoad\r\n});"]}