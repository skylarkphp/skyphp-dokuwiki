{"version":3,"sources":["replace.js"],"names":["define","getQuery","noder","geom","styler","iframes","create","loadReal","lazyLoad","replace","link","options","className","id","style","border","url","href","size","search","holdingUrl","css","iframe","width","height","inview"],"mappings":";;;;;;;AAAAA,QACE,+BACA,qBACA,oBACA,sBACA,YACA,WACA,cACA,eACA,SAASC,EAASC,EAAMC,EAAKC,EAAOC,EAAQC,EAAOC,EAASC,GAC5D,aAoDA,OAAOH,EAAQI,QAlDf,SAAiBC,EAAKC,GACpBA,EAAUA,MAUEL,GACVM,UAAcF,EAAKE,UACnBC,GAAOH,EAAKG,GACZC,OACEC,OAAW,oBAJf,IAQIC,EAAML,EAAQK,KAAON,EAAKO,KAC1BC,EAAOP,EAAQO,MAAQjB,EAASS,EAAKS,QACrCC,EAAaT,EAAQS,WAEzBhB,EAAOiB,IAAIC,OAAO,QAASJ,EAAKK,OAAS,QACzCnB,EAAOiB,IAAIC,OAAO,YAAaJ,EAAKM,QAAU,SAC1CN,EAAKM,QACPpB,EAAOiB,IAAIC,OAAO,YAAaJ,EAAKM,QAIlCrB,EAAKsB,OAAOf,EAAM,KAKpBH,EAASe,QAAQN,IAAAA,IAKjBR,EAASc,QACPN,IAAAA,EACAI,WAAAA,IAKJlB,EAAMO,QAAQa,OAAQZ","file":"../replace.js","sourcesContent":["define([\r\n  \"skylark-langx-urls/get-query\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-geom\",\r\n  \"skylark-domx-styler\",\r\n  \"./iframes\",\r\n  \"./create\",\r\n  \"./load-real\",\r\n  \"./lazy-load\"\r\n],function(getQuery,noder,geom,styler,iframes,create,loadReal,lazyLoad){\r\n  'use strict';\r\n  \r\n  function replace(link,options) {\r\n    options = options || {};\r\n\r\n    /*\r\n    var iframe = noder.createElement('iframe',{\r\n      \"className\" : link.className, // inherit all the classes from the link\r\n      \"id\" : link.id, // also inherit, giving more style control to the user\r\n      \"style\" : { \"border\" : '1px solid #aaa'}\r\n    });\r\n    */\r\n\r\n    var ifarme =create({\r\n      \"className\" : link.className, // inherit all the classes from the link\r\n      \"id\" : link.id, // also inherit, giving more style control to the user\r\n      \"style\" : { \r\n        \"border\" : '1px solid #aaa'\r\n      }\r\n    });\r\n    ///var url = link.href.replace(/edit/, 'embed');\r\n    var url = options.url || link.href,\r\n        size = options.size || getQuery(link.search),\r\n        holdingUrl = options.holdingUrl;\r\n\r\n    styler.css(iframe,\"width\", size.width || '100%');\r\n    styler.css(iframe,\"minHeight\", size.height || '300px');\r\n    if (size.height) {\r\n      styler.css(iframe,\"maxHeight\", size.height);\r\n    }\r\n\r\n    // track when it comes into view and reload\r\n    if (geom.inview(link, 100)) {\r\n      // the iframe is full view, let's render it\r\n      ///iframe.src = url.split('&')[0];\r\n      ///iframe._src = url.split('&')[0]; // support for google slide embed\r\n      ///hookMessaging(iframe);\r\n      loadReal(iframe,{url})\r\n    } else {\r\n      ///iframe.setAttribute('data-url', url);\r\n      ///iframe.src = 'https://jsbin.com/embed-holding';\r\n      ///pending.push(iframe);\r\n      lazyLoad(iframe,{\r\n        url,\r\n        holdingUrl\r\n      });\r\n\r\n    }\r\n\r\n    noder.replace(iframe, link);\r\n  }\r\n\r\n  return iframes.replace = replace;\r\n});"]}