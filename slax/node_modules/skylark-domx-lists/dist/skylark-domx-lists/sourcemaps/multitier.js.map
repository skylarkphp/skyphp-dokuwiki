{"version":3,"sources":["multitier.js"],"names":["define","langx","$","lists","multitier","elm","options","itemSelector","mixin","classes","active","collapse","in","selectors","item","sublist","hasSublist","handler","mode","levels","togglable","multiExpand","$items","activeClass","activeSelector","sublistSelector","handlerSelector","collapseClass","inClass","show","$el","addClass","hide","removeClass","toggle","find","on","e","preventDefault","$children","$clickedItem","this","closest","siblings","children","isActiveItem","hasClass","has","filter"],"mappings":";;;;;;;AAAAA,QACC,gBACA,qBACA,WACC,SAASC,EAAMC,EAAEC,GACjB,aA8GD,OAAOA,EAAMC,UA5Gb,SAAmBC,EAAIC,GAwCpB,IAAIC,GAvCND,EAAUL,EAAMO,OAEfC,SACCC,OAAS,SACTC,SAAW,WACXC,GAAK,MAGNC,WACCC,KAAO,KACPC,QAAU,KACVC,WAAa,WACbC,QAAU,QAIXC,KAAS,GAETC,OAAS,EAETC,WAAY,EACZC,aAAc,GAgBbf,GAAQ,IAEmBO,UAAUC,KACjCQ,EAASpB,EAAEK,EAAaF,GAExBkB,EAAcjB,EAAQG,QAAQC,OAC9Bc,EAAiB,IAAMD,EAIvBE,GAFUnB,EAAQY,KAEAZ,EAAQO,UAAUE,SACpCK,EAAYd,EAAQc,UACpBC,EAAcf,EAAQe,YACtBK,EAAkBpB,EAAQO,UAAUI,QAEpCU,EAAgBrB,EAAQG,QAAQE,SAChCiB,EAAUtB,EAAQG,QAAQG,GAG1BiB,EAAOvB,EAAQuB,MAAQ,SAASC,GAC/BA,EAAIC,SAASH,IAEdI,EAAO1B,EAAQ0B,MAAQ,SAASF,GAC/BA,EAAIC,SAASJ,GAAeM,YAAYL,IAGhCtB,EAAQ4B,OAQpBZ,EAAOa,KAAKT,GAAiBU,GAAG,kBAAmB,SAASC,GACvDA,EAAEC,iBAEF,IAAIC,EACDC,EAAgBtC,EAAEuC,MAAMC,QAAQnC,GAE9Bc,IAGDkB,EAAYC,EAAaG,WAAWV,YAAYV,GAAaqB,SAASnB,KAErEO,EAAKO,GAIV,IAAIM,EAAeL,EAAaM,SAASvB,GACpCsB,IAAgBzB,IACpBmB,EAAYC,EAAaI,SAAStC,EAAQO,UAAUE,SAChD8B,GACXL,EAAaP,YAAYV,GACzBS,EAAKO,KAELC,EAAaT,SAASR,GACtBM,EAAKU,OAMHP,EAAKV,EAAOyB,IAAItB,GAAiBmB,SAASnB,IAE1CI,EAAKP,EAAO0B,OAAOxB,GAAgBuB,IAAItB,GAAiBmB,SAASnB","file":"../multitier.js","sourcesContent":["define([\r\n\t\"skylark-langx\",\r\n\t\"skylark-domx-query\",\r\n\t\"./lists\"\r\n],function(langx,$,lists){\r\n  'use strict'\r\n\r\n\tfunction multitier(elm,options) {\r\n\t\toptions = langx.mixin({\r\n\r\n\t\t\tclasses : {\r\n\t\t\t\tactive : \"active\",\r\n\t\t\t\tcollapse : \"collapse\",\r\n\t\t\t\tin : \"in\",\r\n\t\t\t},\r\n\r\n\t\t\tselectors : {\r\n\t\t\t\titem : \"li\",                   // \".list-group-item\"\r\n\t\t\t\tsublist : \"ul\",  // \"> .list-group\"\r\n\t\t\t\thasSublist : \":has(ul)\",\r\n\t\t\t\thandler : \" > a\"\r\n\t\t\t},\r\n\r\n\r\n\t\t\tmode   : \"\",  // \"tree\" or \"accordion\" or \"popover\"\r\n\r\n\t\t\tlevels : 2,\r\n\r\n\t\t\ttogglable : false,\r\n\t\t\tmultiExpand : false,\r\n\r\n\t\t\t/*\r\n\t\t\tshow : function($el) {\r\n\t\t\t\t$el.show();\r\n\t\t\t},\r\n\r\n\t\t\thide : function($el) {\r\n\t\t\t\t//$el.hide();\r\n\t\t\t\t$el.add\r\n\t\t\t},\r\n\r\n\t\t\ttoggle : function($el) {\r\n\t\t\t\t$el.toggle();\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t},options,true);\r\n\r\n    var itemSelector = options.selectors.item,\r\n        $items = $(itemSelector,elm),\r\n\r\n        activeClass = options.classes.active,\r\n        activeSelector = \".\" + activeClass,\r\n\r\n\t\tmultitierMode = options.mode,\r\n\r\n        sublistSelector = options.selectors.sublist,  \r\n        togglable = options.togglable,   \r\n        multiExpand = options.multiExpand,\r\n        handlerSelector = options.selectors.handler,\r\n\r\n        collapseClass = options.classes.collapse,\r\n        inClass = options.classes.in,\r\n        inSelector = \".\" + inClass,\r\n\r\n        show = options.show || function($el) {\r\n        \t$el.addClass(inClass);\r\n        },\r\n        hide = options.hide || function($el) {\r\n        \t$el.addClass(collapseClass).removeClass(inClass);\r\n\r\n        },\r\n        toggle = options.toggle || function($el) {\r\n\t\t\tif ($el.hasClass(inClass)) {\r\n\t\t\t\thide($el);\r\n\t\t\t} else {\r\n\t\t\t\tshow($el);\r\n\t\t\t}\r\n        };\r\n\r\n     $items.find(handlerSelector).on(\"click.multitier\", function(e) {\r\n          e.preventDefault();\r\n\r\n          let $children,\r\n          \t  $clickedItem =  $(this).closest(itemSelector);\r\n\r\n          if (!multiExpand) {\r\n              ///langx.scall($(this).closest(itemSelector).siblings().removeClass(\"active\").children(sublistSelector+\".in\").plugin(\"domx.toggles.collapse\"),\"hide\");\r\n              //$clildren = $(this).closest(itemSelector).siblings().removeClass(activeClass).children(sublistSelector+\".\"+options.classes.in);\r\n              $children = $clickedItem.siblings().removeClass(activeClass).children(sublistSelector);\r\n              if ($children) {\r\n\t              hide($children);\r\n              }\r\n          }\r\n          //$(this).closest(itemSelector).toggleClass(activeClass).children(sublistSelector).plugin(\"domx.toggles.collapse\").toggle();\r\n          let isActiveItem = $clickedItem.hasClass(activeClass);\r\n          if (!isActiveItem || togglable) {\r\n\t          $children = $clickedItem.children(options.selectors.sublist);\r\n\t          if (isActiveItem) {\r\n\t\t\t\t$clickedItem.removeClass(activeClass);\r\n\t\t\t\thide($children)  \t\r\n\t          } else {\r\n\t\t\t\t$clickedItem.addClass(activeClass);\r\n\t\t\t\tshow($children)  \t\r\n\t          }\r\n\r\n          }\r\n      });\r\n\r\n      hide($items.has(sublistSelector).children(sublistSelector));\r\n\r\n      show($items.filter(activeSelector).has(sublistSelector).children(sublistSelector))\r\n\r\n\r\n\t}\r\n\r\n\treturn lists.multitier = multitier\r\n});"]}