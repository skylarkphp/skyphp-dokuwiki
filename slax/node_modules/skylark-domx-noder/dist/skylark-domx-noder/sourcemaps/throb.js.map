{"version":3,"sources":["throb.js"],"names":["define","langx","styler","noder","throb","elm","params","text","style","timer","time","callback","throbber","createElement","className","remove","clearTimeout","css","content","html","appendChild","setTimeout","update","textNode","nodeValue"],"mappings":";;;;;;;AAAAA,QACI,sBACA,sBACA,WACF,SAASC,EAAMC,EAAOC,GAyEpB,OAAOA,EAAMC,MAjEb,SAAeC,EAAKC,IAChBA,EAASA,OAGSC,KACND,EAAOE,MAFnB,IAKIC,EAFAC,EAAOJ,EAAOI,KACdC,EAAWL,EAAOK,SAGlBC,EAAWT,EAAMU,cAAc,OAC3BC,UAAaR,EAAOQ,WAAa,aAKrCC,EAAS,WACDN,IACAO,aAAaP,GACbA,EAAQ,MAERG,IACAT,EAAMY,OAAOH,GACbA,EAAW,OASnBN,EAAOE,OACPN,EAAOe,IAAIL,EAASN,EAAOE,OAQ/B,IAAIU,EAAUZ,EAAOY,SAAY,8BAiBjC,OAZAf,EAAMgB,KAAKP,EAASM,GAEpBb,EAAIe,YAAYR,GAMZF,IACAD,EAAQY,WALF,WACNN,IACIJ,GAAUA,KAGUD,KAIxBE,SAAWA,EACXG,OAAQA,EACRO,OAnCS,SAAShB,GACVA,GAAUA,EAAOC,MAAQK,IACzBW,SAASC,UAAYlB,EAAOC","file":"../throb.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-styler\",\r\n    \"./noder\"\r\n],function(langx,styler,noder) {\r\n\r\n    \r\n    /*   \r\n     * Replace an old node with the specified node.\r\n     * @param {HTMLElement} elm\r\n     * @param {Node} params\r\n     */\r\n    function throb(elm, params) {\r\n        params = params || {};\r\n\r\n        var self = this,\r\n            text = params.text,\r\n            style = params.style,\r\n            time = params.time,\r\n            callback = params.callback,\r\n            timer,\r\n\r\n            throbber = noder.createElement(\"div\", {\r\n                \"className\": params.className || \"throbber\"\r\n            }),\r\n            //_overlay = overlay(throbber, {\r\n            //    \"class\": 'overlay fade'\r\n            //}),\r\n            remove = function() {\r\n                if (timer) {\r\n                    clearTimeout(timer);\r\n                    timer = null;\r\n                }\r\n                if (throbber) {\r\n                    noder.remove(throbber);\r\n                    throbber = null;\r\n                }\r\n            },\r\n            update = function(params) {\r\n                if (params && params.text && throbber) {\r\n                    textNode.nodeValue = params.text;\r\n                }\r\n            };\r\n\r\n        if (params.style) {\r\n            styler.css(throbber,params.style);\r\n        }\r\n\r\n        //throb = noder.createElement(\"div\", {\r\n        //   \"class\": params.throb && params.throb.className || \"throb\"\r\n        //}),\r\n        //textNode = noder.createTextNode(text || \"\"),\r\n \r\n        var content = params.content ||  '<span class=\"throb\"></span>';\r\n\r\n        //throb.appendChild(textNode);\r\n        //throbber.appendChild(throb);\r\n\r\n        noder.html(throbber,content);\r\n        \r\n        elm.appendChild(throbber);\r\n\r\n        var end = function() {\r\n            remove();\r\n            if (callback) callback();\r\n        };\r\n        if (time) {\r\n            timer = setTimeout(end, time);\r\n        }\r\n\r\n        return {\r\n            throbber : throbber,\r\n            remove: remove,\r\n            update: update\r\n        };\r\n    }\r\n\r\n    return noder.throb = throb;\r\n});"]}