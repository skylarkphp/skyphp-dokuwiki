/**
 * skylark-domx-plugins-colors - The skylark color plugin library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx-plugins/skylark-domx-plugins-colors/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-query","skylark-domx-eventer","skylark-domx-styler","skylark-domx-fx","skylark-domx-plugins-base","skylark-domx-plugins-popups","skylark-graphics-colors/Color","./colors","./ColorPicker","./ColorPalette"],function(t,e,s,l,o,i,a,n,h,r,p,c,g,u){"use strict";var w=h.Plugin.inherit({klassName:"ColorPane",pluginName:"lark.colors.pane",options:{selectors:{pickerContainer:".sp-picker-container",toggleButton:".sp-palette-toggle",paletteContainer:".sp-palette"},draggingClass:"sp-dragging",texts:{togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected"},states:{showPalette:!1,showPaletteOnly:!1,togglePaletteOnly:!1,showSelectionPalette:!0,showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},color:!1,maxSelectionSize:7},_updateUI:function(){this.stating("showPalette")&&this.palette._updateUI(),this.picker._updateUI()},_applyOptions:function(){var t=this.options;this._states={allowEmpty:t.states.allowEmpty,showInput:t.states.showInput,showAlpha:t.states.showAlpha,showButtons:t.states.showButtons,togglePaletteOnly:t.states.togglePaletteOnly,showPalette:t.states.showPalette,showPaletteOnly:t.states.showPaletteOnly,showSelectionPalette:t.showSelectionPalette,showInitial:t.states.showInitial},this._applyStates(),this.reflow()},_construct:function(t,e){h.Plugin.prototype._construct.call(this,t,e);var s=this.$el=this.$(),l=this.options,o=(l.theme,this.$pickerContainer=s.find(l.selectors.pickerContainer)),i=this.$paletteContainer=s.find(l.selectors.paletteContainer),a=(this.$toggleButton=s.find(l.selectors.toggleButton),this._initialColor=l.color);this._isEmpty=!a;i[0]&&(this.palette=u.instantiate(i[0],{selectionPalette:l.selectionPalette,color:l.color,palette:l.palette,selectionPalette:l.selectionPalette})),o[0]&&(this.picker=g.instantiate(o[0],{color:l.color,states:{showInput:l.states.showInput,allowEmpty:l.states.allowEmpty,showButtons:l.states.showButtons,showInitial:l.states.showInitial,showAlpha:l.states.showAlpha}}),this.listenTo(this.picker,"canceled",t=>{this.emit("canceled")}),this.listenTo(this.picker,"choosed",t=>{this.emit("choosed")}),this.listenTo(this.picker,"picked",(t,e)=>{this.emit("picked",e)})),this._init()},_init:function(){var t=this;this.options;e.isIE&&this.$container.find("*:not(input)").attr("unselectable","on"),this._applyOptions(),this.listenTo(this.$toggleButton,"click",function(e){i.stop(e),t.stating("showPaletteOnly",!t.stating("showPaletteOnly"))}),this.listenTo(this.palette,"selected",function(e,s){t.picker.current(s)})},revert:function(){this.set(this._colorOnShow,!0),this._updateOriginalInput(!0)},get:function(){return this.picker.current()},set:function(t){this.picker.current(t),this.palette.current(t)},_applyStates:function(){var t=this._states;t.showPaletteOnly&&(t.showPalette=!0),this.$toggleButton.text(t.showPaletteOnly?this.option("texts.togglePaletteMoreText"):this.option("texts.togglePaletteLessText")),this.$el.toggleClass("sp-input-disabled",!t.showInput).toggleClass("sp-clear-enabled",!!t.allowEmpty).toggleClass("sp-alpha-enabled",t.showAlpha).toggleClass("sp-buttons-disabled",!t.showButtons).toggleClass("sp-palette-buttons-disabled",!t.togglePaletteOnly).toggleClass("sp-palette-disabled",!t.showPalette).toggleClass("sp-palette-only",t.showPaletteOnly).toggleClass("sp-initial-disabled",!t.showInitial),t.showPaletteOnly&&this.$el.css("left","-="+(this.$pickerContainer.outerWidth(!0)+5))},stating:function(t,e){if(void 0===e)return this._states[t];this._states[t]=e,this._applyStates()},reflow:function(){this.stating("showPalette")&&this.palette.reflow(),this.picker.reflow()}});return h.register(w),c.ColorPane=w});
//# sourceMappingURL=sourcemaps/ColorPane.js.map
