/**
 * skylark-domx-plugins-colors - The skylark color plugin library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx-plugins/skylark-domx-plugins-colors/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-noder","skylark-domx-finder","skylark-domx-query","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","skylark-domx-plugins-popups","skylark-graphics-colors/color","./colors","./Color-pane"],function(t,e,s,i,o,n,l,a,r,p,h){"use strict";var c=l.Plugin.inherit({klassName:"ColorBox",pluginName:"lark.colors.box",options:{pane:{states:{showPalette:!1,showPaletteOnly:!1,togglePaletteOnly:!1,showSelectionPalette:!0,showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},maxSelectionSize:7,palette:void 0,selectionPalette:void 0},color:!1},_updateUI:function(){var t=this.get();if(this.$previewElement.removeClass("sp-clear-display"),this.$previewElement.css("background-color","transparent"),!t&&this.stating("allowEmpty"))this.$previewElement.addClass("sp-clear-display");else{t.toHexString();var e=t.toRgbString();this.$previewElement.css("background-color",e),t.toString()}this.pane._updateUI()},_applyOptions:function(){this.reflow()},_construct:function(e,s){l.Plugin.prototype._construct.call(this,e,s),this.$el=this.$();var o=this.options,n=this.$pane=i(o.pane.template);this.$previewElement=this.$el.find(".sp-preview-inner");n[0]&&(this.pane=h.instantiate(n[0],t.mixin({color:o.color},o.pane))),this._init()},_init:function(){var t=this;this.options;this._applyOptions();var e=!1;function s(){e&&(e=!1,t.$pane.hide())}this.$pane.hide(),this.listenTo(this.$el,"click touchstart",function(i){e?s():e||(e=!0,t.$pane.show(),t.reflow(),t._updateUI()),o.stop(i)}),this.listenTo(this.pane,"picked",(t,e)=>{this.$previewElement.css("background-color",e.toRgbString())}),this.listenTo(this.pane,"canceled choosed",t=>{s()})},revert:function(){this.pane.revert()},get:function(){return this.pane.get()},set:function(t){this.pane.set(t)},reflow:function(){this.$pane.css("position","absolute"),this.$pane.offset(a.calcOffset(this.$pane[0],this.$el[0])),this.pane.reflow()}});return l.register(c),p.ColorBox=c});
//# sourceMappingURL=sourcemaps/color-box.js.map
