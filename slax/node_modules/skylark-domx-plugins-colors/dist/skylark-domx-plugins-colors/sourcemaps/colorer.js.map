{"version":3,"sources":["colorer.js"],"names":["define","langx","datax","$","colors","ColorBox","ColorPane","replaceInput","join","markup","colorer","elmInput","options","theme","mixin","color","flat","appendTo","maxSelectionSize","preferredFormat","containerClassName","replacerClassName","offset","pane","$el","$pane","ownerDocument","addClass","isInput","is","shouldReplace","attr","this","_shouldReplace","$replacer","className","val","after","hide","toggleClass","picked","on","choosed","canceled","show","$appendTo","parent","length","append","template","fn","elm","plugin","data"],"mappings":";;;;;;;AAAAA,QACI,sBACA,oBACA,qBACH,WACA,cACA,gBACC,SAASC,EAAMC,EAAMC,EAAEC,EAAOC,EAASC,GACtC,IACCC,GACI,4BACI,qEACA,mCACJ,UACFC,KAAK,IAEPC,GAEQ,6BACI,qCACI,gDACA,kDACI,4DACJ,SACJ,SACA,oCACI,6BACI,8BACA,6BACI,yBACI,uBACI,uBACI,iCACJ,SACJ,SACJ,SACA,0CACA,SACA,uBACI,gCACJ,SACJ,SACA,oGACJ,SACA,yCACI,6DACJ,SACA,gDACA,0CACI,qCACA,oDACJ,SACJ,SACJ,UACFD,KAAK,IAId,SAASE,EAAQC,EAASC,GAkBzB,IACCC,GAlBDD,EAAUX,EAAMa,OAENC,OAAO,EACPC,MAAM,EACNC,SAAU,OACVC,iBAAkB,EAClBC,iBAAiB,EACjBC,mBAAoB,GACpBC,kBAAmB,GACnBR,MAAO,WAEPS,OAAQ,KACRC,SAGRX,IAGeC,MAChBG,EAAOJ,EAAQI,KACfC,EAAWL,EAAQK,SACnBO,EAAMrB,EAAEQ,GACRc,EAAQtB,EAAEM,EAAOE,EAASe,eAAeC,SAASd,GAC5Ce,EAAUJ,EAAIK,GAAG,SAEjBC,GADmBF,GAAWJ,EAAIO,KAAK,QACvBC,KAAKC,eAAkBL,IAAYZ,GACnDkB,EAAa,EAAkB/B,EAAEI,GAAcoB,SAASd,GACTc,SAASf,EAAQuB,WACjBR,SAASf,EAAQS,mBACjClB,MAiBhC,UAbOS,EAAQI,YACRJ,EAAQK,SAEfL,EAAQG,MAAQH,EAAQG,OAAUa,GAAWJ,EAAIY,MAE7CN,GACAN,EAAIa,MAAMH,GAAWI,OAIzBb,EAAMc,YAAY,UAAWvB,GACvBW,SAASf,EAAQQ,oBAEnBJ,EAAM,CACNQ,EAAIa,MAAMZ,GAAOa,OACjB,IAAIf,EAAO,IAAIjB,EAAUmB,EAAM,GAAGb,GAWlC,OAVIA,EAAQ4B,QACRjB,EAAKkB,GAAG,SAAS7B,EAAQ4B,QAEzB5B,EAAQ8B,SACRnB,EAAKkB,GAAG,UAAU7B,EAAQ8B,SAE1B9B,EAAQ+B,UACRpB,EAAKkB,GAAG,WAAW7B,EAAQ+B,UAE/BlB,EAAMmB,OACCrB,EAEP,IAAIsB,EAAyB,WAAb5B,EAAwBO,EAAIsB,SAAW3C,EAAEc,GAOzD,OANyB,IAArB4B,EAAUE,SACVF,EAAY1C,EAAE,SAGlB0C,EAAUG,OAAOvB,GACjBb,EAAQW,KAAK0B,SAAWxB,EACjB,IAAIpB,EAAS6B,EAAU,GAAGtB,GAoB5C,OAfET,EAAE+C,GAAGxC,QAAW,SAAUE,GACrB,IAAIuC,EAAMnB,KAAK,GAEf,GAAImB,EAAK,CACL,IAAIC,EAAYlD,EAAMmD,KAAKF,EAAI,gBAM/B,OALKC,IACDA,EAAS1C,EAAQyC,EAAIvC,GACrBV,EAAMmD,KAAKF,EAAI,eAAeC,IAG3BA,IAKXhD,EAAOM,QAAUA","file":"../colorer.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-data\",\r\n    \"skylark-domx-query\",\r\n\t\"./colors\",\r\n\t\"./color-box\",\r\n\t\"./color-pane\"\r\n],function(langx,datax,$,colors,ColorBox,ColorPane){\r\n   var pickers = [],\r\n    replaceInput = [\r\n        \"<div class='sp-replacer'>\",\r\n            \"<div class='sp-preview'><div class='sp-preview-inner'></div></div>\",\r\n            \"<div class='sp-dd'>&#9660;</div>\",\r\n        \"</div>\"\r\n    ].join(''),\r\n    \r\n    markup = (function () {\r\n        return [\r\n            \"<div class='sp-container'>\",\r\n                \"<div class='sp-palette-container'>\",\r\n                    \"<div class='sp-palette sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-palette-button-container sp-cf'>\",\r\n                        \"<button type='button' class='sp-palette-toggle'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n                \"<div class='sp-picker-container'>\",\r\n                    \"<div class='sp-top sp-cf'>\",\r\n                        \"<div class='sp-fill'></div>\",\r\n                        \"<div class='sp-top-inner'>\",\r\n                            \"<div class='sp-color'>\",\r\n                                \"<div class='sp-sat'>\",\r\n                                    \"<div class='sp-val'>\",\r\n                                        \"<div class='sp-dragger'></div>\",\r\n                                    \"</div>\",\r\n                                \"</div>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-clear sp-clear-display'>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-hue'>\",\r\n                                \"<div class='sp-slider'></div>\",\r\n                            \"</div>\",\r\n                        \"</div>\",\r\n                        \"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-input-container sp-cf'>\",\r\n                        \"<input class='sp-input' type='text' spellcheck='false'  />\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-initial sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-button-container sp-cf'>\",\r\n                        \"<a class='sp-cancel' href='#'></a>\",\r\n                        \"<button type='button' class='sp-choose'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n            \"</div>\"\r\n        ].join(\"\");\r\n    })();\r\n\r\n\r\n\tfunction colorer(elmInput,options) {\r\n\t\toptions = langx.mixin({\r\n            // Options\r\n            color: false,\r\n            flat: false,\r\n            appendTo: \"body\",\r\n            maxSelectionSize: 7,\r\n            preferredFormat: false,\r\n            containerClassName: \"\",\r\n            replacerClassName: \"\",\r\n            theme: \"sp-light\",\r\n\r\n            offset: null,\r\n            pane : {\r\n                \r\n            }\r\n\t\t},options);\r\n\r\n\t\tvar \r\n\t\t\ttheme = options.theme,\r\n\t\t\tflat = options.flat,\r\n\t\t\tappendTo = options.appendTo,\r\n\t\t\t$el = $(elmInput),\r\n\t\t\t$pane = $(markup,elmInput.ownerDocument).addClass(theme),\r\n\t        isInput = $el.is(\"input\"),\r\n\t        isInputTypeColor = isInput && $el.attr(\"type\") === \"color\",\r\n\t        shouldReplace = this._shouldReplace =  isInput && !flat,\r\n\t        $replacer =  (shouldReplace) ? $(replaceInput).addClass(theme)\r\n\t                                                      .addClass(options.className)\r\n\t                                                      .addClass(options.replacerClassName) \r\n\t                                     : $([]),\r\n\t        $offsetElement =  (shouldReplace) ? $replacer : $el;\r\n\r\n\r\n        delete options.flat;\r\n        delete options.appendTo;\r\n\r\n        options.color = options.color || (isInput && $el.val());\r\n\r\n        if (shouldReplace) {\r\n            $el.after($replacer).hide();\r\n        }\r\n\r\n\r\n        $pane.toggleClass(\"sp-flat\", flat)\r\n             .addClass(options.containerClassName);\r\n\r\n        if (flat) {\r\n            $el.after($pane).hide();\r\n            var pane = new ColorPane($pane[0],options);\r\n            if (options.picked) {\r\n                pane.on(\"picked\",options.picked);\r\n            }\r\n            if (options.choosed) {\r\n                pane.on(\"choosed\",options.choosed);               \r\n            }\r\n            if (options.canceled) {\r\n                pane.on(\"canceled\",options.canceled);               \r\n            }\r\n            $pane.show();\r\n            return pane;\r\n        } else {\r\n            var $appendTo = appendTo === \"parent\" ? $el.parent() : $(appendTo);\r\n            if ($appendTo.length !== 1) {\r\n                $appendTo = $(\"body\");\r\n            }\r\n\r\n            $appendTo.append($pane);\r\n            options.pane.template = $pane;\r\n            return new ColorBox($replacer[0],options);\r\n        }\r\n\t}\r\n\r\n\r\n   $.fn.colorer =  function (options) {\r\n        var elm = this[0];\r\n\r\n        if (elm) {\r\n            var plugin    = datax.data(elm,'domx.colorer')\r\n            if (!plugin) {\r\n                plugin = colorer(elm,options)\r\n                datax.data(elm,'domx.colorer',plugin);\r\n            }\r\n\r\n            return plugin;\r\n        }\r\n   };\r\n\r\n  \r\n\treturn colors.colorer = colorer;\r\n});"]}