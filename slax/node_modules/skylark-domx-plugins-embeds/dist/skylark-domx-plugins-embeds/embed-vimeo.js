/**
 * skylark-domx-plugins-embeds - The skylark embed plugin library for dom api extension.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx-plugins/skylark-domx-plugins-embeds/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","skylark-domx-plugins-base","./embeds"],function(t,e,a,i,s){"use strict";var n=i.Plugin.inherit({klassName:"EmbedVimeo",pluginName:"lark.embeds.vimeo",options:{},_construct:function(t,e){i.Plugin.prototype._construct.call(this,t,e),this.url=e.url,this.videoId=e.videoId,this.playerId=e.playerId,this.clickToPlay=e.clickToPlay},canPlayType:function(){return!0},loadAPI:function(){var t,e,i=this,s="//f.vimeocdn.com/js/froogaloop2.min.js",n=document.getElementsByTagName("script"),l=n.length;function o(){!e&&i.playOnReady&&i.play(),e=!0}for(;l;)if(n[l-=1].src===s){t=n[l];break}t||((t=document.createElement("script")).src=s),a(t).on("load",o),n[0].parentNode.insertBefore(t,n[0]),/loaded|complete/.test(t.readyState)&&o()},onReady:function(){var t=this;this.ready=!0,this.player.addEvent("play",function(){t.hasPlayed=!0,t.onPlaying()}),this.player.addEvent("pause",function(){t.onPause()}),this.player.addEvent("finish",function(){t.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.emit("playing"),this.playStatus=2)},onPause:function(){this.emit("pause"),delete this.playStatus},insertIframe:function(){var t=document.createElement("iframe");t.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),t.id=this.playerId,this._elm.parentNode.replaceChild(t,this._elm),this._elm=t},play:function(){var t=this;this.playStatus||(this.emit("play"),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this._elm),this.player.addEvent("ready",function(){t.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.emit("pause"),delete this.playStatus)}});return s.EmbedVimeo=n});
//# sourceMappingURL=sourcemaps/embed-vimeo.js.map
