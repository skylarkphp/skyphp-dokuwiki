/**
 * skylark-domx-plugins-embeds - The skylark embed plugin library for dom api extension.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx-plugins/skylark-domx-plugins-embeds/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","skylark-domx-plugins-base","./embeds"],function(t,e,a,i,n){"use strict";var s=i.Plugin.inherit({klassName:"EmbedYoutube",pluginName:"lark.embeds.youtube",options:{},_construct:function(t,e){i.Plugin.prototype._construct.call(this,t,e),this.videoId=e.videoId,this.playerVars=e.playerVars,this.clickToPlay=e.clickToPlay},canPlayType:function(){return!0},loadAPI:function(){var t,e=this,a=window.onYouTubeIframeAPIReady,i="https://www.youtube.com/iframe_api",n=document.getElementsByTagName("script"),s=n.length;for(window.onYouTubeIframeAPIReady=function(){a&&a.apply(this),e.playOnReady&&e.play()};s;)if(n[s-=1].src===i)return;(t=document.createElement("script")).src=i,n[0].parentNode.insertBefore(t,n[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.emit("playing"),this.playStatus=2)},onPause:function(){t.defer(()=>{this.checkSeek()},2e3)},checkSeek:function(){this.stateChange!==YT.PlayerState.PAUSED&&this.stateChange!==YT.PlayerState.ENDED||(this.emit("pause"),delete this.playStatus)},onStateChange:function(t){switch(t.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=t.data},onError:function(t){this.trigger("error",t)},play:function(){var t=this;this.playStatus||(this.emit("play"),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this._elm,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){t.onReady()},onStateChange:function(e){t.onStateChange(e)},onError:function(e){t.onError(e)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.emit("pause"),delete this.playStatus)}});return n.EmbedYoutube=s});
//# sourceMappingURL=sourcemaps/embed-youtube.js.map
