{"version":3,"sources":["_carousel/mode-rotate.js"],"names":["define","langx","events","eventer","$","styler","Rotatable","Scalable","Emitter","inherit","options","_construct","carsouel","this","resetItems","_$threedContainer","modes","rotate","classes","threedContainer","_rotatable","starting","e","target","closest","item","selector","length","started","stopped","_scalable","radius","targets","getItems","_start","delayTime","items","itemsCount","_itemsCount","deltaDeg","_deltaDeg","i","css","transform","jump","toIndex","currentIndex","type","ended","$next","elmx","findItem","addClass","reflow","_$itemsContainer","one","removeClass","emulateTransitionEnd"],"mappings":";;;;;;;AAACA,QACC,sBACA,uBACA,uBACA,qBACA,sBACA,0CACA,0CACA,SAASC,EAAMC,EAAOC,EAAQC,EAAEC,EAAOC,EAAUC,GACjD,aAkFA,OA/EiBL,EAAOM,QAAQC,SAE9BC,WAKAC,WAAa,SAASC,GACpBC,KAAKD,SAAWA,EAEhBC,KAAKC,aAELD,KAAKE,kBAAoBH,EAASR,MAAMQ,EAASF,QAAQM,MAAMC,OAAOC,QAAQC,mBAE9EN,KAAKO,WAAa,IAAId,EAAUO,KAAKE,kBAAkB,IACnDM,SAAW,SAASC,GAClB,OAAmE,GAA5DlB,EAAEkB,EAAEC,QAAQC,QAAQZ,EAASF,QAAQe,KAAKC,UAAUC,QAG7DC,QAAU,aAIVC,QAAU,eAKdhB,KAAKiB,UAAY,IAAIvB,EAASM,KAAKE,kBAAkB,IACnDgB,OAASnB,EAASF,QAAQM,MAAMC,OAAOc,OACvCC,QAAUpB,EAASqB,aAGrBpB,KAAKqB,OAAS,GAIhBpB,WAAa,SAASqB,GACpB,IAAIC,EAAQvB,KAAKD,SAASqB,WAC1B,GAAIG,EAAO,CACT,IAAIC,EAAaxB,KAAKyB,YAAcF,EAAMT,OACxCY,EAAW1B,KAAK2B,UAAY,IAAMH,EAEpC,IAAK,IAAII,EAAI,EAAGA,EAAIJ,EAAYI,IAC9BpC,EAAOqC,IAAIN,EAAMK,IACfE,UAAY,WAAcF,EAAIF,EAAY,WAMlDK,KAAO,SAASC,EAAQC,EAAaC,EAAKC,GACtC,IAAIpC,EAAWC,KAAKD,SAKhBqC,GAJOrC,EAASsC,OACNtC,EAASF,QAERE,EAASR,EAAEQ,EAASuC,SAASL,IAChClC,EAASR,EAAEQ,EAASuC,SAASN,KAezC,OAbAI,EAAMG,SAASL,GACfE,EAAMI,SAEgBzC,EAAS0C,iBAG1BC,IAAI,gBAAiB,WAClBN,EAAMO,YAAYT,GAClBC,MAEHN,IAAI,YAAY,WAAcG,EAAUhC,KAAK2B,UAAa,QAC1DiB,uBAEE5C","file":"../../_carousel/mode-rotate.js","sourcesContent":[" define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-langx-events\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-styler\",\r\n  \"skylark-domx-plugins-interact/rotatable\",\r\n  \"skylark-domx-plugins-interact/scalable\"\r\n],function(langx,events,eventer,$,styler,Rotatable,Scalable){\r\n  'use strict'\r\n\r\n\r\n  var ModeRotate = events.Emitter.inherit({\r\n\r\n    options : {\r\n\r\n    },\r\n\r\n\r\n    _construct : function(carsouel) {\r\n      this.carsouel = carsouel;\r\n\r\n      this.resetItems();\r\n\r\n      this._$threedContainer = carsouel.$(`.${carsouel.options.modes.rotate.classes.threedContainer}`)\r\n\r\n      this._rotatable = new Rotatable(this._$threedContainer[0],{\r\n          starting : function(e) {\r\n            return $(e.target).closest(carsouel.options.item.selector).length==0;\r\n          },\r\n\r\n          started : function() {\r\n              //playSpin(false);\r\n          },\r\n\r\n          stopped : function() {\r\n              //playSpin(true);\r\n          }\r\n      });\r\n\r\n      this._scalable = new Scalable(this._$threedContainer[0],{\r\n        radius : carsouel.options.modes.rotate.radius,\r\n        targets : carsouel.getItems()\r\n      });\r\n\r\n      this._start = 0;\r\n\r\n    },\r\n\r\n    resetItems : function(delayTime) {\r\n      let items = this.carsouel.getItems();\r\n      if (items) {\r\n        let itemsCount = this._itemsCount = items.length,\r\n          deltaDeg = this._deltaDeg = 360 / itemsCount;\r\n\r\n        for (var i = 0; i < itemsCount; i++) {\r\n          styler.css(items[i],{\r\n            transform : \"rotateY(\" + (i * deltaDeg) + \"deg)\"\r\n          });\r\n        }       \r\n      }\r\n    },\r\n\r\n    jump : function(toIndex,currentIndex,type,ended) {\r\n        let carsouel = this.carsouel,\r\n            velm = carsouel.elmx(),\r\n            options = carsouel.options,\r\n\r\n            $active =  carsouel.$(carsouel.findItem(currentIndex)),\r\n            $next = carsouel.$(carsouel.findItem(toIndex));\r\n\r\n        $next.addClass(type);\r\n        $next.reflow(); // [0].offsetWidth; // force reflow\r\n\r\n        let $itemsContainer = carsouel._$itemsContainer;\r\n\r\n        $itemsContainer\r\n            .one('transitionEnd', function() {\r\n                $next.removeClass(type);\r\n                ended();\r\n            })\r\n            .css(\"transform\",\"rotateY(\" + (toIndex * this._deltaDeg) + \"deg)\")\r\n            .emulateTransitionEnd();\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n  });\r\n\r\n\r\n  return ModeRotate;  \r\n});"]}