{"version":3,"sources":["group.js"],"names":["define","langx","$","elmx","plugins","groups","Group","Plugin","inherit","klassName","pluginName","options","classes","selectors","item","template","selector","selectable","multiSelect","base","selected","active","_construct","elm","this","overrided","self","velm","_velm","_elm","itemSelector","on","hasClass","value","getItemValue","setActiveItem","toggleSelectOneItem","clearSelectedItems","selectOneItem","resetItems","_$items","findItem","valueOrIdx","isNumber","eq","isString","filter","getItems","$item","data","undefined","index","getItemsCount","size","getItemIndex","isSelectedItem","addClass","unselectOneItem","removeClass","selectedClass","getSelectedItemValues","map","el","getSelectedItems","getActiveItem","activeClass","current","next","getSelectedItem","renderItemHtml","itemData","_renderItemHtml","itemTpl","isFunction","register"],"mappings":"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","file":"../group.js","sourcesContent":[" define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./groups\"\r\n],function(langx,$,elmx,plugins,groups){\r\n  'use strict'\r\n\r\n    /*\r\n     * The base plugin class for grouping items.\r\n     */\r\n    var Group = plugins.Plugin.inherit({\r\n        klassName : \"Group\",\r\n\r\n        pluginName : \"lark.groups.group\",\r\n\r\n        options : {\r\n        \tclasses : {\r\n        \t},\r\n\r\n        \tselectors : {\r\n            //container : \"ul\", // \r\n        \t},\r\n\r\n          item : {\r\n            template : \"<span><i class=\\\"glyphicon\\\"></i><a href=\\\"javascript: void(0);\\\"></a> </span>\",\r\n            selector : \"li\",      // \".list-group-item\"\r\n\r\n            selectable: false,\r\n            multiSelect: false,\r\n\r\n            classes : {\r\n              base : \"item\",\r\n              selected : \"selected\",\r\n              active : \"active\"\r\n            }\r\n          },\r\n\r\n          //active : 0,\r\n\r\n          //A collection or function that is used to generate the content of the group \r\n          /*\r\n           * example1\r\n           *itemsSource : [{  \r\n           *  type: 'image',href : \"https://xxx.com/1.jpg\",title : \"1\"\r\n           *},{\r\n           *  type: 'image',href : \"https://xxx.com/1.jpg\",title : \"1\"\r\n           * }],\r\n           */\r\n          /*\r\n           * example2\r\n           *itemsSource :  function(){},\r\n           */\r\n        },\r\n\r\n        selected : null,\r\n \r\n        _construct : function(elm,options) {\r\n            this.overrided(elm,options);\r\n            var self = this,\r\n                velm = this._velm = elmx(this._elm),\r\n                itemSelector = this.options.item.selector;\r\n\r\n            velm.on('click', itemSelector, function () {\r\n                var veItem = elmx(this);\r\n                if (!veItem.hasClass('disabled')) {\r\n                    let value = self.getItemValue(this);\r\n                    self.setActiveItem(value);\r\n\r\n                  if (self.options.item.selectable) {\r\n\r\n                      if (self.options.item.multiSelect) {\r\n                        self.toggleSelectOneItem(value);\r\n                      } else {\r\n                        self.clearSelectedItems();\r\n                        self.selectOneItem(value);\r\n                      }\r\n                  }\r\n\r\n                }\r\n\r\n\r\n                //veItem.blur();\r\n                return false;\r\n            });\r\n\r\n            this.resetItems();\r\n\r\n            ///if (this.options.item.multiSelect) {\r\n            ///  this.selected = [];\r\n            ///} else {\r\n            ///  this.selected = null;\r\n            ///}\r\n            ///this.selected = this.options.selected;\r\n        },\r\n\r\n        resetItems : function() {\r\n            this._$items = this._velm.$(this.options.item.selector);\r\n        },\r\n\r\n        findItem : function (valueOrIdx) {\r\n          var $item;\r\n          if (langx.isNumber(valueOrIdx)) {\r\n            $item = this._$items.eq(valueOrIdx);\r\n          } else if (langx.isString(valueOrIdx)) {\r\n            $item = this._$items.filter('[data-value=\"' + valueOrIdx + '\"]');\r\n          } else {\r\n            $item = $(valueOrIdx);\r\n          }\r\n          return $item[0];\r\n        },\r\n\r\n        getItems : function() {\r\n          return this._$items;\r\n        },\r\n\r\n        getItemValue : function(item) {\r\n          let $item = $(item),\r\n              value = $item.data(\"value\");\r\n          if (value === undefined) {\r\n            value = this._$items.index($item[0]);\r\n          }\r\n          return value;\r\n        },\r\n\r\n        getItemsCount : function() {\r\n            return this._$items.size();\r\n        },\r\n\r\n        getItemIndex : function(item) {\r\n            return this._$items.index(item);\r\n        },\r\n\r\n        \r\n        isSelectedItem : function(valueOrIdx) {\r\n          return $(this.findItem(valueOrIdx)).hasClass(this.options.item.classes.selected);\r\n        },\r\n                 \r\n        selectOneItem : function (valueOrIdx) {\r\n          $(this.findItem(valueOrIdx)).addClass(this.options.item.classes.selected);\r\n        },\r\n\r\n        unselectOneItem : function (valueOrIdx) {\r\n          $(this.findItem(valueOrIdx)).removeClass(this.options.item.classes.selected);\r\n        },\r\n\r\n        /*\r\n         * clears the selected items.\r\n         */\r\n        clearSelectedItems : function() {\r\n          let selectedClass = this.options.item.classes.selected;\r\n          this._$items.filter(`.${selectedClass}`).removeClass(selectedClass);\r\n        },\r\n\r\n        getSelectedItemValues : function() {\r\n          let selectedClass = this.options.item.classes.selected;\r\n          return  this._$items.filter(`.${selectedClass}`).map( (el) => {\r\n            return this.getItemValue(el);\r\n          });\r\n        },\r\n\r\n        getSelectedItems : function() {\r\n          let selectedClass = this.options.item.classes.selected;\r\n          return  this._$items.filter(`.${selectedClass}`);\r\n        },\r\n\r\n        getActiveItem : function() {\r\n          let activeClass = this.options.item.classes.active,\r\n              $activeItem = this._$items.filter(`.${activeClass}`);\r\n          return $activeItem[0] || null;\r\n        },\r\n\r\n        setActiveItem : function(valueOrIdx) {\r\n          let current = this.getActiveItem(),\r\n              next = this.findItem(valueOrIdx);\r\n          if (next != current) {\r\n            let activeClass = this.options.item.classes.active;\r\n            $(current).removeClass(activeClass);\r\n            $(next).addClass(activeClass);\r\n          }\r\n        },\r\n\r\n\r\n        getSelectedItem : function() {\r\n          let selectedItems = this.getSelectedItems();\r\n          return selectedItems[0] || null;\r\n        },\r\n\r\n        toggleSelectOneItem : function(valueOrIdx) {\r\n          if (this.isSelectedItem(valueOrIdx)) {\r\n            this.unselectOneItem(valueOrIdx);\r\n          } else {\r\n            this.selectOneItem(valueOrIdx);\r\n          }\r\n        },\r\n\r\n        renderItemHtml : function(itemData) {\r\n          if (!this._renderItemHtml) {\r\n            let itemTpl = this.options.item.template;\r\n            if (langx.isString(itemTpl)) {\r\n              this._renderItemHtml = langx.template(itemTpl);\r\n            } else if (langx.isFunction(itemTpl)) {\r\n              this._renderItemHtml = itemTpl;\r\n            }\r\n          }\r\n\r\n          return this._renderItemHtml(itemData);\r\n        }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Group);\r\n\r\n  return groups.Group = Group;\r\n\r\n});\r\n\r\n\r\n\r\n"]}