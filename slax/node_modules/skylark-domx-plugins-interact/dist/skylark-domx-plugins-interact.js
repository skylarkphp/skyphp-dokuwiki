/**
 * skylark-domx-plugins-interact - The interact features enhancement for dom.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e){var r=e.define,require=e.require,n="function"==typeof r&&r.amd,o=!n&&"undefined"!=typeof exports;if(!n&&!r){var i={};r=e.define=function(t,e,r){"function"==typeof r?(i[t]={factory:r,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var r=e.split("/"),n=t.split("/");r.pop();for(var o=0;o<n.length;o++)"."!=n[o]&&(".."==n[o]?r.pop():r.push(n[o]));return r.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):i[t]={factory:null,resolved:!0,exports:r}},require=e.require=function(t){if(!i.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=i[t];if(!module.resolved){var r=[];module.deps.forEach(function(t){r.push(require(t))}),module.exports=module.factory.apply(e,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-domx-plugins-interact/interact",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.interact={}}),t("skylark-domx-plugins-interact/movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(t,e,r,n,o,i,a,l){o.on,o.off,r.attr,r.removeAttr,n.pagePosition,i.addClass,n.height,Array.prototype.some,Array.prototype.map;var s=a.Plugin.inherit({klassName:"Movable",pluginName:"lark.interact.movable",_construct:function(r,a){function l(t){var e,r;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),r=0;r<e.length;r++)t[e[r]]=t.changedTouches[0][e[r]]}function s(t){t.movable=m,t.moveEl=r,t.handleEl=p}this.overrided(r,a);var c,d,u,h,m=this,p=(a=this.options).handle||r,f=!1!==a.auto,g=a.constraints,k=a.document||document,b=a.starting,v=a.started,y=a.moving,x=a.stopped,R=function(t){if(l(t),s(t),0!==t.button)return w(t);if(t.deltaX=t.screenX-d,t.deltaY=t.screenY-u,f){var e=h.left+t.deltaX,o=h.top+t.deltaY;g&&(e<g.minX&&(e=g.minX),e>g.maxX&&(e=g.maxX),o<g.minY&&(o=g.minY),o>g.maxY&&(o=g.maxY))}n.relativePosition(r,{left:e,top:o}),t.preventDefault(),y&&y(t)},w=function(t){l(t),o.off(k,"mousemove touchmove",R).off(k,"mouseup touchend",w),e.remove(c),x&&x(t)};o.on(p,"mousedown touchstart",function(a){var m,f=n.getDocumentSize(k);if(l(a),s(a),b){var z=b(a);if(!1===z)return;t.isPlainObject(z)&&(z.constraints&&(g=z.constraints),z.started&&(v=z.started),z.moving&&(y=z.moving),z.stopped&&(x=z.stopped))}a.preventDefault(),a.button,d=a.screenX,u=a.screenY,h=n.relativePosition(r),n.size(r),m=i.css(p,"cursor"),c=e.createElement("div"),i.css(c,{position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:m}),e.append(k.body,c),o.on(k,"mousemove touchmove",R).on(k,"mouseup touchend",w),v&&v(a)}),this._handleEl=p},remove:function(){o.off(this._handleEl)}});return a.register(s,"movable"),l.Movable=s}),t("skylark-domx-plugins-interact/resizable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","./interact","./movable"],function(t,e,r,n,o,i,a,l,s,c,d){i.on,i.off,r.attr,r.removeAttr,o.pagePosition,a.addClass,o.height,Array.prototype.some,Array.prototype.map;var u=s.Plugin.inherit({klassName:"Resizable",pluginName:"lark.interact.resizable",options:{touchActionNone:!0,handle:{border:{directions:{top:!0,left:!0,right:!0,bottom:!0,topLeft:!0,topRight:!0,bottomLeft:!0,bottomRight:!0},classes:{all:"resizable-handle",top:"resizable-handle-n",left:"resizable-handle-w",right:"resizable-handle-e",bottom:"resizable-handle-s",topLeft:"resizable-handle-nw",topRight:"resizable-handle-ne",bottomLeft:"resizable-handle-sw",bottomRight:"resizable-handle-se"}},grabber:{selector:"",direction:"bottomRight"},selector:!0},constraints:{minWidth:null,minHeight:null,maxWidth:null,maxHeight:null}},_construct:function(r,a){this.overrided(r,a);var l=(a=this.options).handle||{},s=a.constraints||{},c=a.started,u=a.moving,h=a.stopped;function m(t,e){let n;d(t,{auto:!1,started:function(t){n=o.relativeRect(r),c&&c(t)},moving:function(t){currentRect={},"right"!=e&&"topRight"!=e&&"bottomRight"!=e||(currentRect.width=n.width+t.deltaX,s.minWidth&&currentRect.width<s.minWidth&&(currentRect.width=s.minWidth),s.maxWidth&&currentRect.width>s.maxWidth&&(currentRect.width=s.maxWidth)),"bottom"!=e&&"bottomLeft"!=e&&"bottomRight"!=e||(currentRect.height=n.height+t.deltaY,s.minHeight&&currentRect.height<s.minHeight&&(currentRect.height=s.minHeight),s.maxHeight&&currentRect.height>s.maxHeight&&(currentRect.height=s.maxHeight)),"left"!=e&&"topLeft"!=e&&"bottomLeft"!=e||(currentRect.left=n.left+t.deltaX,currentRect.width=n.width-t.deltaX,s.minWidth&&currentRect.width<s.minWidth&&(currentRect.left=currentRect.left+currentRect.width-s.minWidth,currentRect.width=s.minWidth),s.maxWidth&&currentRect.width>s.maxWidth&&(currentRect.left=currentRect.left+currentRect.width-s.maxWidth,currentRect.width=s.maxWidth)),"top"!=e&&"topLeft"!=e&&"topRight"!=e||(currentRect.top=n.top+t.deltaY,currentRect.height=n.height-t.deltaY,s.minHeight&&currentRect.height<s.minHeight&&(currentRect.top=currentRect.top+currentRect.height-s.minHeight,currentRect.height=s.minHeight),s.maxHeight&&currentRect.height>s.maxHeight&&(currentRect.top=currentRect.top+currentRect.height-s.maxHeight,currentRect.height=s.maxHeight)),o.relativeRect(r,currentRect),u&&u(t),i.resized(r)},stopped:function(t){h&&h(t)}})}if(t.isString(l)?handleEl=n.find(r,l):t.isHtmlNode(l)&&(handleEl=l),l&&l.border){for(var p in l.border.directions)if(l.border.directions[p]){let t=e.createElement("div",{className:l.border.classes.all+" "+l.border.classes[p],direction:p},r);m(t,p)}}if(l&&l.grabber&&l.grabber.selector){let t=n.find(r,l.grabber.selector);m(t,l.grabber.direction)}},remove:function(){i.off(this._handleEl)}});return s.register(u,"resizable"),c.Resizable=u}),t("skylark-domx-plugins-interact/rotatable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(t,e,r,n,o,i,a,l){o.on,o.off,r.attr,r.removeAttr,n.pagePosition,i.addClass,n.height,Array.prototype.some,Array.prototype.map;function s(t,e,r){r>180&&(r=180),r<0&&(r=0),t.style.transform="rotateX("+-r+"deg) rotateY("+e+"deg)"}var c=a.Plugin.inherit({klassName:"Rotatable",pluginName:"lark.interact.rotatable",_construct:function(r,a){this.overrided(r,a);var l,c,d,u,h=(a=this.options).handle||r,m=a.document||document,p=a.starting,f=a.started,g=a.moving,k=a.stopped,b=0,v=10,y=0,x=0,R=function(t){y=t.deltaX=t.clientX-c,x=t.deltaY=t.clientY-d,c=t.clientX,d=t.clientY,s(r,b+=.1*y,v+=.1*x),t.preventDefault(),g&&g(t)},w=function(t){o.off(m,"pointermove",R).off(m,"pointerup",w),u=setInterval(function(){x*=.95,s(r,b+=.1*(y*=.95),v+=.1*y),Math.abs(y)<.5&&Math.abs(x)<.5&&clearInterval(u)},17),e.remove(l),k&&k(t)};o.on(h,"pointerdown",function(r){if("mouse"==r.pointerType&&0!==r.button)return w(r);var a,s=n.getDocumentSize(m);if(p){var b=p(r);if(!1===b)return;t.isPlainObject(b)&&(b.started&&(f=b.started),b.moving&&(g=b.moving),b.stopped&&(k=b.stopped))}r.preventDefault(),r.button,c=r.clientX,d=r.clientY,a=i.css(h,"cursor"),l=e.createElement("div"),i.css(l,{position:"absolute",top:0,left:0,width:s.width,height:s.height,zIndex:2147483647,opacity:1e-4,cursor:a}),e.append(m.body,l),clearInterval(u),o.on(m,"pointermove",R).on(m,"pointerup",w),f&&f(r)}),this._handleEl=h},remove:function(){o.off(this._handleEl)}});return a.register(c,"rotatable"),l.Rotatable=c}),t("skylark-domx-plugins-interact/scalable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","./interact"],function(t,e,r,n,o,i,a,l,s){o.on,o.off,r.attr,r.removeAttr,n.pagePosition,i.addClass,n.height,Array.prototype.some,Array.prototype.map;function c(t,e){a(t).forEach(function(t){let r=a(t);var n=r.data("originalTransform");n||(n=r.css("transform"),r.data("originalTransform",n)),r.css("transform",n+" translateZ("+e+"px")})}var d=l.Plugin.inherit({klassName:"Scalable",pluginName:"lark.interact.scalable",_construct:function(t,e){this.overrided(t,e);let r=this.options.radius||0,n=this.options.targets||t;o.on(t,"mousewheel",function(t){var e=t.wheelDelta/20||-t.detail;c(n,r+=e)}),c(n,r)}});return l.register(d,"scalable"),s.Scalable=d}),t("skylark-domx-plugins-interact/main",["./interact","./movable","./resizable","./rotatable","./rotatable","./scalable"],function(t){return t}),t("skylark-domx-plugins-interact",["skylark-domx-plugins-interact/main"],function(t){return t})}(r),!n){var a=require("skylark-langx-ns");o?module.exports=a:e.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-plugins-interact.js.map
