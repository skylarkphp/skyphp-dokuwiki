/**
 * skylark-domx-plugins-interact - The interact features enhancement for dom.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(e,t,o,n,a,r,i,s){a.on,a.off,o.attr,o.removeAttr,n.pagePosition,r.addClass,n.height,Array.prototype.some,Array.prototype.map;var l=i.Plugin.inherit({klassName:"Movable",pluginName:"lark.interact.movable",_construct:function(o,i){function s(e){var t,o;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),o=0;o<t.length;o++)e[t[o]]=e.changedTouches[0][t[o]]}function l(e){e.movable=p,e.moveEl=o,e.handleEl=v}this.overrided(o,i);var c,m,d,u,p=this,v=(i=this.options).handle||o,f=!1!==i.auto,h=i.constraints,g=i.document||document,k=i.starting,y=i.started,x=i.moving,b=i.stopped,X=function(e){if(s(e),l(e),0!==e.button)return Y(e);if(e.deltaX=e.screenX-m,e.deltaY=e.screenY-d,f){var t=u.left+e.deltaX,a=u.top+e.deltaY;h&&(t<h.minX&&(t=h.minX),t>h.maxX&&(t=h.maxX),a<h.minY&&(a=h.minY),a>h.maxY&&(a=h.maxY))}n.relativePosition(o,{left:t,top:a}),e.preventDefault(),x&&x(e)},Y=function(e){s(e),a.off(g,"mousemove touchmove",X).off(g,"mouseup touchend",Y),t.remove(c),b&&b(e)};a.on(v,"mousedown touchstart",function(i){var p,f=n.getDocumentSize(g);if(s(i),l(i),k){var E=k(i);if(!1===E)return;e.isPlainObject(E)&&(E.constraints&&(h=E.constraints),E.started&&(y=E.started),E.moving&&(x=E.moving),E.stopped&&(b=E.stopped))}i.preventDefault(),i.button,m=i.screenX,d=i.screenY,u=n.relativePosition(o),n.size(o),p=r.css(v,"cursor"),c=t.createElement("div"),r.css(c,{position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:p}),t.append(g.body,c),a.on(g,"mousemove touchmove",X).on(g,"mouseup touchend",Y),y&&y(i)}),this._handleEl=v},remove:function(){a.off(this._handleEl)}});return i.register(l,"movable"),s.Movable=l});
//# sourceMappingURL=sourcemaps/movable.js.map
