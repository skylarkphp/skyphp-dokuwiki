{"version":3,"sources":["skylark-domx-plugins-interact.js"],"names":["define","plugins","interact","langx","noder","datax","geom","eventer","styler","on","off","attr","removeAttr","pagePosition","addClass","height","Array","prototype","some","map","Movable","Plugin","inherit","klassName","pluginName","_construct","elm","options","updateWithTouchData","e","keys","i","changedTouches","split","length","updateWithMoveData","movable","self","moveEl","handleEl","this","overrided","overlayDiv","startX","startY","originalPos","handle","auto","constraints","doc","document","startingCallback","starting","startedCallback","started","movingCallback","moving","stoppedCallback","stopped","move","button","stop","deltaX","screenX","deltaY","screenY","l","left","t","top","minX","maxX","minY","maxY","relativePosition","preventDefault","remove","cursor","docSize","getDocumentSize","ret","isPlainObject","size","css","createElement","position","width","zIndex","opacity","append","body","_handleEl","register","finder","$","Resizable","touchActionNone","border","directions","right","bottom","topLeft","topRight","bottomLeft","bottomRight","classes","all","grabber","selector","direction","minWidth","minHeight","maxWidth","maxHeight","handleResize","dir","startRect","relativeRect","currentRect","resized","isString","find","isHtmlNode","className","applyTranform","obj","tX","tY","style","transform","Rotatable","prevX","prevY","timer","clientX","clientY","setInterval","Math","abs","clearInterval","pointerType","elms","radius","forEach","$elm","originalTransform","data","Scalable","targets","d","wheelDelta","detail","main"],"mappings":"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","file":"../skylark-domx-plugins-interact.js","sourcesContent":["define('skylark-domx-plugins-interact/interact',[\r\n    \"skylark-domx-plugins-base/plugins\"\r\n], function(plugins) {\r\n    'use strict';\r\n\r\n\treturn plugins.interact = {};\r\n});\r\n\ndefine('skylark-domx-plugins-interact/movable',[\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-data\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-styler\",\r\n    \"skylark-domx-plugins-base\",\r\n    \"./interact\"\r\n],function(langx,noder,datax,geom,eventer,styler,plugins,interact){\r\n    var on = eventer.on,\r\n        off = eventer.off,\r\n        attr = datax.attr,\r\n        removeAttr = datax.removeAttr,\r\n        offset = geom.pagePosition,\r\n        addClass = styler.addClass,\r\n        height = geom.height,\r\n        some = Array.prototype.some,\r\n        map = Array.prototype.map;\r\n\r\n    var Movable = plugins.Plugin.inherit({\r\n        klassName: \"Movable\",\r\n\r\n        pluginName : \"lark.interact.movable\",\r\n\r\n\r\n        _construct : function (elm, options) {\r\n            this.overrided(elm,options);\r\n\r\n\r\n\r\n            function updateWithTouchData(e) {\r\n                var keys, i;\r\n\r\n                if (e.changedTouches) {\r\n                    keys = \"screenX screenY pageX pageY clientX clientY\".split(' ');\r\n                    for (i = 0; i < keys.length; i++) {\r\n                        e[keys[i]] = e.changedTouches[0][keys[i]];\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updateWithMoveData(e) {\r\n                e.movable = self;\r\n                e.moveEl = elm;\r\n                e.handleEl = handleEl;\r\n            }\r\n\r\n            options = this.options;\r\n            var self = this,\r\n                handleEl = options.handle || elm,\r\n                auto = options.auto === false ? false : true,\r\n                constraints = options.constraints,\r\n                overlayDiv,\r\n                doc = options.document || document,\r\n                downButton,\r\n                start,\r\n                stop,\r\n                startX,\r\n                startY,\r\n                originalPos,\r\n                drag,\r\n                size,\r\n                startingCallback = options.starting,\r\n                startedCallback = options.started,\r\n                movingCallback = options.moving,\r\n                stoppedCallback = options.stopped,\r\n\r\n                start = function(e) {\r\n                    var docSize = geom.getDocumentSize(doc),\r\n                        cursor;\r\n\r\n                    updateWithTouchData(e);\r\n                    updateWithMoveData(e);\r\n\r\n                    if (startingCallback) {\r\n                        var ret = startingCallback(e)\r\n                        if ( ret === false) {\r\n                            return;\r\n                        } else if (langx.isPlainObject(ret)) {\r\n                            if (ret.constraints) {\r\n                                constraints = ret.constraints;\r\n                            }\r\n                            if (ret.started) {\r\n                                startedCallback = ret.started;\r\n                            }\r\n                            if (ret.moving) {\r\n                                movingCallback = ret.moving;\r\n                            }                            \r\n                            if (ret.stopped) {\r\n                                stoppedCallback = ret.stopped;\r\n                            }     \r\n                        }\r\n                    }\r\n\r\n                    e.preventDefault();\r\n\r\n                    downButton = e.button;\r\n                    //handleEl = getHandleEl();\r\n                    startX = e.screenX;\r\n                    startY = e.screenY;\r\n\r\n                    originalPos = geom.relativePosition(elm);\r\n                    size = geom.size(elm);\r\n\r\n                    // Grab cursor from handle so we can place it on overlay\r\n                    cursor = styler.css(handleEl, \"cursor\");\r\n\r\n                    overlayDiv = noder.createElement(\"div\");\r\n                    styler.css(overlayDiv, {\r\n                        position: \"absolute\",\r\n                        top: 0,\r\n                        left: 0,\r\n                        width: docSize.width,\r\n                        height: docSize.height,\r\n                        zIndex: 0x7FFFFFFF,\r\n                        opacity: 0.0001,\r\n                        cursor: cursor\r\n                    });\r\n                    noder.append(doc.body, overlayDiv);\r\n\r\n                    eventer.on(doc, \"mousemove touchmove\", move).on(doc, \"mouseup touchend\", stop);\r\n\r\n                    if (startedCallback) {\r\n                        startedCallback(e);\r\n                    }\r\n                },\r\n\r\n                move = function(e) {\r\n                    updateWithTouchData(e);\r\n                    updateWithMoveData(e);\r\n\r\n                    if (e.button !== 0) {\r\n                        return stop(e);\r\n                    }\r\n\r\n                    e.deltaX = e.screenX - startX;\r\n                    e.deltaY = e.screenY - startY;\r\n\r\n                    if (auto) {\r\n                        var l = originalPos.left + e.deltaX,\r\n                            t = originalPos.top + e.deltaY;\r\n                        if (constraints) {\r\n\r\n                            if (l < constraints.minX) {\r\n                                l = constraints.minX;\r\n                            }\r\n\r\n                            if (l > constraints.maxX) {\r\n                                l = constraints.maxX;\r\n                            }\r\n\r\n                            if (t < constraints.minY) {\r\n                                t = constraints.minY;\r\n                            }\r\n\r\n                            if (t > constraints.maxY) {\r\n                                t = constraints.maxY;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    geom.relativePosition(elm, {\r\n                        left: l,\r\n                        top: t\r\n                    })\r\n\r\n                    e.preventDefault();\r\n                    if (movingCallback) {\r\n                        movingCallback(e);\r\n                    }\r\n                },\r\n\r\n                stop = function(e) {\r\n                    updateWithTouchData(e);\r\n\r\n                    eventer.off(doc, \"mousemove touchmove\", move).off(doc, \"mouseup touchend\", stop);\r\n\r\n                    noder.remove(overlayDiv);\r\n\r\n                    if (stoppedCallback) {\r\n                        stoppedCallback(e);\r\n                    }\r\n                };\r\n\r\n            eventer.on(handleEl, \"mousedown touchstart\", start);\r\n\r\n            this._handleEl = handleEl;\r\n\r\n        },\r\n\r\n        remove : function() {\r\n            eventer.off(this._handleEl);\r\n        }\r\n    });\r\n\r\n    plugins.register(Movable,\"movable\");\r\n\r\n    return interact.Movable = Movable;\r\n});\r\n\ndefine('skylark-domx-plugins-interact/resizable',[\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-data\",\r\n    \"skylark-domx-finder\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-styler\",\r\n    \"skylark-domx-query\",\r\n    \"skylark-domx-plugins-base\",\r\n    \"./interact\",\r\n    \"./movable\"\r\n],function(langx,noder,datax,finder,geom,eventer,styler,$,plugins,interact,Movable){\r\n    var on = eventer.on,\r\n        off = eventer.off,\r\n        attr = datax.attr,\r\n        removeAttr = datax.removeAttr,\r\n        offset = geom.pagePosition,\r\n        addClass = styler.addClass,\r\n        height = geom.height,\r\n        some = Array.prototype.some,\r\n        map = Array.prototype.map;\r\n\r\n\r\n    var Resizable = plugins.Plugin.inherit({\r\n        klassName: \"Resizable\",\r\n\r\n        \"pluginName\" : \"lark.interact.resizable\",\r\n        \r\n        options : {\r\n            // prevents browser level actions like forward back gestures\r\n            touchActionNone: true,\r\n            // selector for handle that starts dragging\r\n            handle : {\r\n                border : {\r\n                    directions : {\r\n                        top: true, //n\r\n                        left: true, //w\r\n                        right: true, //e\r\n                        bottom: true, //s\r\n                        topLeft : true, // nw\r\n                        topRight : true, // ne\r\n                        bottomLeft : true, // sw\r\n                        bottomRight : true // se                         \r\n                    },\r\n                    classes : {\r\n                        all : \"resizable-handle\",\r\n                        top : \"resizable-handle-n\",\r\n                        left: \"resizable-handle-w\",\r\n                        right: \"resizable-handle-e\",\r\n                        bottom: \"resizable-handle-s\", \r\n                        topLeft : \"resizable-handle-nw\", \r\n                        topRight : \"resizable-handle-ne\",\r\n                        bottomLeft : \"resizable-handle-sw\",             \r\n                        bottomRight : \"resizable-handle-se\"                         \r\n                    }\r\n                },\r\n                grabber: {\r\n                    selector : \"\",\r\n                    direction : \"bottomRight\"\r\n                },\r\n                selector: true\r\n            },\r\n\r\n            constraints : {\r\n                minWidth : null,\r\n                minHeight : null,\r\n                maxWidth : null,\r\n                maxHeight : null\r\n            }\r\n        },\r\n\r\n        _construct :function (elm, options) {\r\n            this.overrided(elm,options);\r\n\r\n\r\n            options = this.options;\r\n            var handle = options.handle || {},\r\n                constraints = options.constraints || {},\r\n                startedCallback = options.started,\r\n                movingCallback = options.moving,\r\n                stoppedCallback = options.stopped;\r\n\r\n            if (langx.isString(handle)) {\r\n                handleEl = finder.find(elm,handle);\r\n            } else if (langx.isHtmlNode(handle)) {\r\n                handleEl = handle;\r\n            }\r\n\r\n            function handleResize(handleEl,dir) {\r\n                let  startRect;\r\n\r\n                Movable(handleEl,{\r\n                    auto : false,\r\n                    started : function(e) {\r\n                        startRect = geom.relativeRect(elm);\r\n                        if (startedCallback) {\r\n                            startedCallback(e);\r\n                        }\r\n                    },\r\n                    moving : function(e) {\r\n                        currentRect = {\r\n                        };\r\n                        if (dir == \"right\" || dir == \"topRight\" || dir == \"bottomRight\" ) {\r\n                            currentRect.width = startRect.width + e.deltaX;\r\n                            if (constraints.minWidth && currentRect.width < constraints.minWidth) {\r\n                                currentRect.width = constraints.minWidth;\r\n                            }\r\n                            if (constraints.maxWidth && currentRect.width > constraints.maxWidth) {\r\n                                currentRect.width = constraints.maxWidth;\r\n                            }\r\n                        } \r\n\r\n                        if (dir == \"bottom\" || dir == \"bottomLeft\" || dir == \"bottomRight\" ) {\r\n                            currentRect.height = startRect.height + e.deltaY;\r\n                            if (constraints.minHeight && currentRect.height < constraints.minHeight) {\r\n                                currentRect.height = constraints.minHeight;\r\n                            }\r\n                            if (constraints.maxHeight && currentRect.height > constraints.maxHeight) {\r\n                                currentRect.height = constraints.maxHeight;\r\n                            }\r\n                        } \r\n\r\n                        if (dir == \"left\" || dir == \"topLeft\" || dir == \"bottomLeft\" ) {\r\n                            currentRect.left = startRect.left + e.deltaX;\r\n                            currentRect.width = startRect.width - e.deltaX;\r\n                            if (constraints.minWidth && currentRect.width < constraints.minWidth) {\r\n                                currentRect.left = currentRect.left + currentRect.width - constraints.minWidth;\r\n                                currentRect.width = constraints.minWidth;\r\n                            }\r\n                            if (constraints.maxWidth && currentRect.width > constraints.maxWidth) {\r\n                                currentRect.left = currentRect.left + currentRect.width - constraints.maxWidth;\r\n                                currentRect.width = constraints.maxWidth;\r\n                            }\r\n                        } \r\n\r\n                        if (dir == \"top\" || dir == \"topLeft\" || dir == \"topRight\" ) {\r\n                            currentRect.top = startRect.top + e.deltaY;\r\n                            currentRect.height = startRect.height - e.deltaY;\r\n                            if (constraints.minHeight && currentRect.height < constraints.minHeight) {\r\n                                currentRect.top = currentRect.top + currentRect.height - constraints.minHeight;\r\n                                currentRect.height = constraints.minHeight;\r\n                            }\r\n                            if (constraints.maxHeight && currentRect.height > constraints.maxHeight) {\r\n                                currentRect.top = currentRect.top + currentRect.height - constraints.maxHeight;\r\n                                currentRect.height = constraints.maxHeight;\r\n                            }\r\n                        } \r\n\r\n                        geom.relativeRect(elm,currentRect);\r\n\r\n                        if (movingCallback) {\r\n                            movingCallback(e);\r\n                        }\r\n                        eventer.resized(elm);\r\n\r\n                    },\r\n                    stopped: function(e) {\r\n                        if (stoppedCallback) {\r\n                            stoppedCallback(e);\r\n                        }                \r\n                    }\r\n                });\r\n            }\r\n\r\n            if (handle && handle.border) {\r\n                let borders = []\r\n                for (var dir in handle.border.directions) {\r\n                    if (handle.border.directions[dir]) {\r\n                        let handleEl = noder.createElement(\"div\",{\r\n                            \"className\": handle.border.classes.all + \" \" + handle.border.classes[dir],\r\n                            \"direction\" : dir\r\n                        },elm);   \r\n                        handleResize(handleEl,dir) ; \r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            if (handle && handle.grabber && handle.grabber.selector) {\r\n                 let handleEl = finder.find(elm,handle.grabber.selector);\r\n                 handleResize(handleEl,handle.grabber.direction) ; \r\n            }\r\n\r\n        },\r\n\r\n        // destroys the dragger.\r\n        remove: function() {\r\n            eventer.off(this._handleEl);\r\n        }\r\n    });\r\n\r\n    plugins.register(Resizable,\"resizable\");\r\n\r\n    return interact.Resizable = Resizable;\r\n});\r\n\ndefine('skylark-domx-plugins-interact/rotatable',[\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-data\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-styler\",\r\n    \"skylark-domx-plugins-base\",\r\n    \"./interact\"\r\n],function(langx,noder,datax,geom,eventer,styler,plugins,interact){\r\n    var on = eventer.on,\r\n        off = eventer.off,\r\n        attr = datax.attr,\r\n        removeAttr = datax.removeAttr,\r\n        offset = geom.pagePosition,\r\n        addClass = styler.addClass,\r\n        height = geom.height,\r\n        some = Array.prototype.some,\r\n        map = Array.prototype.map;\r\n\r\n\r\n\r\n    function applyTranform(obj,tX,tY) {\r\n        // Constrain the angle of camera (between 0 and 180)\r\n        if (tY > 180) tY = 180;\r\n        if (tY < 0) tY = 0;\r\n\r\n        // Apply the angle\r\n        obj.style.transform = \"rotateX(\" + -tY + \"deg) rotateY(\" + tX + \"deg)\";\r\n    }\r\n\r\n\r\n    var Rotatable = plugins.Plugin.inherit({\r\n        klassName: \"Rotatable\",\r\n\r\n        pluginName : \"lark.interact.rotatable\",\r\n\r\n\r\n        _construct : function (elm, options) {\r\n            this.overrided(elm,options);\r\n\r\n\r\n            options = this.options;\r\n            var self = this,\r\n                handleEl = options.handle || elm,\r\n                overlayDiv,\r\n                doc = options.document || document,\r\n                downButton,\r\n                start,\r\n                stop,\r\n                prevX,\r\n                prevY,\r\n                startingCallback = options.starting,\r\n                startedCallback = options.started,\r\n                movingCallback = options.moving,\r\n                stoppedCallback = options.stopped,\r\n\r\n                tX = 0,\r\n                tY = 10,\r\n                deltaX = 0,\r\n                deltaY = 0,\r\n\r\n                timer,\r\n\r\n                start = function(e) {\r\n                    if (e.pointerType==\"mouse\" &&  e.button !== 0) {\r\n                        return stop(e);\r\n                    }\r\n                    \r\n                    var docSize = geom.getDocumentSize(doc),\r\n                        cursor;\r\n\r\n                    if (startingCallback) {\r\n                        var ret = startingCallback(e)\r\n                        if ( ret === false) {\r\n                            return;\r\n                        } else if (langx.isPlainObject(ret)) {\r\n                            if (ret.started) {\r\n                                startedCallback = ret.started;\r\n                            }\r\n                            if (ret.moving) {\r\n                                movingCallback = ret.moving;\r\n                            }                            \r\n                            if (ret.stopped) {\r\n                                stoppedCallback = ret.stopped;\r\n                            }     \r\n                        }\r\n                    }\r\n\r\n                    e.preventDefault();\r\n\r\n                    downButton = e.button;\r\n\r\n                    //handleEl = getHandleEl();\r\n                    prevX = e.clientX;\r\n                    prevY = e.clientY;\r\n\r\n                    // Grab cursor from handle so we can place it on overlay\r\n                    cursor = styler.css(handleEl, \"cursor\");\r\n\r\n                    overlayDiv = noder.createElement(\"div\");\r\n                    styler.css(overlayDiv, {\r\n                        position: \"absolute\",\r\n                        top: 0,\r\n                        left: 0,\r\n                        width: docSize.width,\r\n                        height: docSize.height,\r\n                        zIndex: 0x7FFFFFFF,\r\n                        opacity: 0.0001,\r\n                        cursor: cursor\r\n                    });\r\n                    noder.append(doc.body, overlayDiv);\r\n\r\n                    clearInterval(timer);\r\n\r\n                    eventer.on(doc, \"pointermove\", move).on(doc, \"pointerup\", stop);\r\n\r\n                    if (startedCallback) {\r\n                        startedCallback(e);\r\n                    }\r\n                },\r\n\r\n                move = function(e) {\r\n\r\n\r\n                    deltaX = e.deltaX = e.clientX - prevX;\r\n                    deltaY = e.deltaY = e.clientY - prevY;\r\n\r\n                    prevX = e.clientX;\r\n                    prevY = e.clientY;\r\n\r\n\r\n                    tX += deltaX * 0.1;\r\n                    tY += deltaY * 0.1;\r\n                    applyTranform(elm,tX,tY);\r\n\r\n                    e.preventDefault();\r\n\r\n                    if (movingCallback) {\r\n                        movingCallback(e);\r\n                    }\r\n                },\r\n\r\n                stop = function(e) { \r\n                    eventer.off(doc, \"pointermove\", move).off(doc, \"pointerup\", stop);\r\n\r\n                    let deta\r\n\r\n                    timer = setInterval(function() {\r\n                        deltaX *= 0.95;\r\n                        deltaY *= 0.95;\r\n                        tX += deltaX * 0.1;\r\n                        tY += deltaX * 0.1;\r\n                        applyTranform(elm,tX,tY);\r\n\r\n                        ///playSpin(false);\r\n                        if (Math.abs(deltaX) < 0.5 && Math.abs(deltaY) < 0.5) {\r\n                          clearInterval(timer);\r\n                          //playSpin(true);\r\n                        }\r\n                    }, 17);\r\n\r\n                    noder.remove(overlayDiv);\r\n\r\n                    if (stoppedCallback) {\r\n                        stoppedCallback(e);\r\n                    }\r\n                };\r\n\r\n            eventer.on(handleEl, \"pointerdown\", start);\r\n\r\n            this._handleEl = handleEl;\r\n\r\n        },\r\n\r\n        remove : function() {\r\n            eventer.off(this._handleEl);\r\n        }\r\n    });\r\n\r\n    plugins.register(Rotatable,\"rotatable\");\r\n\r\n    return interact.Rotatable = Rotatable;\r\n});\r\n\ndefine('skylark-domx-plugins-interact/scalable',[\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-data\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-styler\",\r\n    \"skylark-domx-query\",\r\n    \"skylark-domx-plugins-base\",\r\n    \"./interact\"\r\n],function(langx,noder,datax,geom,eventer,styler,$,plugins,interact){\r\n    var on = eventer.on,\r\n        off = eventer.off,\r\n        attr = datax.attr,\r\n        removeAttr = datax.removeAttr,\r\n        offset = geom.pagePosition,\r\n        addClass = styler.addClass,\r\n        height = geom.height,\r\n        some = Array.prototype.some,\r\n        map = Array.prototype.map;\r\n\r\n\r\n\r\n    function applyTranform(elms,radius) {\r\n        // Apply the angle\r\n        $(elms).forEach(function(elm){\r\n            let $elm = $(elm);\r\n            var originalTransform = $elm.data(\"originalTransform\");\r\n            if (!originalTransform) {\r\n                originalTransform = $elm.css(\"transform\");\r\n                $elm.data(\"originalTransform\",originalTransform);\r\n            }\r\n            $elm.css(\"transform\",originalTransform +\" translateZ(\" +  radius +\"px\");\r\n        });\r\n    }\r\n\r\n\r\n    var Scalable = plugins.Plugin.inherit({\r\n        klassName: \"Scalable\",\r\n\r\n        pluginName : \"lark.interact.scalable\",\r\n\r\n\r\n        _construct : function (elm, options) {\r\n            this.overrided(elm,options);\r\n\r\n            let radius = this.options.radius || 0,\r\n                targets = this.options.targets || elm;\r\n\r\n            eventer.on(elm,\"mousewheel\", function(e) {\r\n                var d = e.wheelDelta / 20 || -e.detail;\r\n                radius += d;\r\n                applyTranform(targets,radius);\r\n            });\r\n\r\n            applyTranform(targets,radius);\r\n        }\r\n    });\r\n\r\n    plugins.register(Scalable,\"scalable\");\r\n\r\n    return interact.Scalable = Scalable;\r\n});\r\n\ndefine('skylark-domx-plugins-interact/main',[\r\n    \"./interact\",\r\n    \"./movable\",\r\n    \"./resizable\",\r\n    \"./rotatable\",\r\n    \"./rotatable\",\r\n    \"./scalable\"\r\n], function(interact) {\r\n    return interact;\r\n})\r\n;\ndefine('skylark-domx-plugins-interact', ['skylark-domx-plugins-interact/main'], function (main) { return main; });\n\n"]}