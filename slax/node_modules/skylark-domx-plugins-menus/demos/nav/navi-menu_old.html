<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Flipster Demo</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=550, initial-scale=1">

    <link rel="stylesheet" href="../../skins/default/menu.css">
    <link rel="stylesheet" href="../../skins/default/cascade.css">
    <link rel="stylesheet" href="../../skins/default/nav.old.css">
    <style>
        *,
        *:before,
        *:after {
          box-sizing: border-box;
        }

        html,
        body {
          margin: 0;
          padding: 0;
          height: 100%;
        }

        body {
          color: #333333;
          font-weight: 400;
          font-size: 15px;
          font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
          line-height: 20px;
          margin: 0;
          padding: 4em 0 4em 20%;
        }

        a {
          color: #da0d25;
          text-decoration: none;
        }
        a:hover,
        a:focus {
          color: #f22840;
          text-decoration: none;
        }
        p { margin: 0 0 20px; }

        h1,
        h2,{
          margin: 10px 0;
          font-weight: 500;
          line-height: 40px;
          color: inherit;
          text-align: center;
        }
        h1 small,
        h2 small {
          font-weight: 400;
          line-height: 1;
          color: #8d8d8d;
        }
        h1 { font-size: 28px; }
        h2 { font-size: 22px; }

        /* @end */

        .main-header {
          position: fixed;
          top: 0;
          bottom: 0;
          left: 0;
          width: 20%;
          background: #eee;
          padding: 1em;
        }

        .main-header__nav {
          border-top: solid 1px #ccc;
          margin: 1em -1em;
        }

        .main-header__nav a {
          display: block;
          padding: 0.5em 1em;
          border-bottom: solid 1px #ddd;
        }

        .main-header__nav a:hover,
        .main-header__nav a:focus {
          color: #eee;
          background: #da0d25;
        }

        @media (max-width: 800px) {
          body { padding: 0; }

          .main-header {
            position: relative;
            width: 100%;
          }

          .main-header__nav a { display: inline-block; border: none; }
        }

        .intro {
          padding: 4em 2em;
        }

        .demo {
          padding: 6em 2em;
        }

        .demo h2 {
          text-align: center;
          font-size: 22px;
          margin-bottom: 1em;
        }

        .demo .flipster {
          margin: 0 -2em;
        }

        .code {
          display: block;
          background: #eee;
          padding: 1em;
          border-radius: 1em;
          margin: 2em auto;
          max-width: 30em;
          font-size: 0.8em;
          width: fit-content;
          white-space: pre-wrap;
        }

        .button {
          display: inline-block;
          padding: 5px 10px;
          margin: 0;
          background-color: #da0d25;
          background-position: center center;
          background-repeat: no-repeat;
          color: #FFF;
          text-shadow: none;
          vertical-align: middle;
          cursor: pointer;
          border: 0;
          transition: all 300ms ease;
        }

        .button:hover,
        .button:focus {
          color: #7a0715;
          background: #f22840;
        }

        ul.flip-items {
            display: block;
            list-style: none;
        }

        ul.flip-items li {
            display:  none;
            position: relative;
            height: 300px
        }

        ul.flip-items li img {
            display: block;
            position: absolute;;
             left: 0;
            top:0;
            right: 0;
            bottom: 0;         
            margin: auto; 
        }


    </style>
</head>
<body>
<header class="main-header">
    <h1>jQuery Flipster</h1>
    <iframe src="https://ghbtns.com/github-btn.html?user=drien&repo=jquery-flipster&type=star&count=true" frameborder="0" scrolling="0" width="90px" height="20px"></iframe>
    <a href="http://libscore.com/#$.fn.flipster" target="_blank"><img src="http://api.libscore.com/badge/$.fn.flipster.svg"></a>

    <nav class="main-header__nav" role="navigation">
        <a href="#demo-default">Default Settings (Coverflow)</a>
        <a href="#demo-carousel">Carousel</a>
        <a href="#demo-wheel">Wheel</a>
        <a href="#demo-flat">Flat</a>
    </nav>
</header>

<article id="intro" class="intro">
    <p>jQuery Flipster is a CSS3 3D transform-based jQuery plugin built to replicate the familiar 'cover flow' effect, but also supports a variety of styles. Not only is it gorgeous to look at, Flipster is also:</p>

    <ul>
        <li><strong>Responsive</strong> Automatically centers and scales to fit the area provided.</li>
        <li><strong>Touch Friendly</strong> Swipe between items on touch devices without interrupting scroll.</li>
        <li><strong>Lightweight</strong> Javascript and CSS combined are only 5kb gzipped (13kb without gzip). Only dependency is jQuery.</li>
        <li><strong>Customizable</strong> Four built in styles (coverflow, carousel, wheel and flat) with plenty of options to configure Flipster the way you want</li>
    </ul>

    <p>But don't take our word for it. Check out the demos below, or <a href="https://github.com/drien/jquery-flipster">download from GitHub</a> to try it yourself.</p>
</article>

<article id="demo-carousel" class="demo">

    <h2>Flipster Carousel</h2>

    <div id="carousel">
        <ul class="lark-menu nav" role="navigation"></ul>
        <ul class="flip-items">
            <li data-flip-title="Red">
                <img src="../assets/images/text1.gif">
            </li>
            <li data-flip-title="Razzmatazz" data-flip-category="Purples">
                <img src="../assets/images/text2.gif">
             </li>
            <li data-flip-title="Deep Lilac" data-flip-category="Purples">
                <img src="../assets/images/text3.gif">
            </li>
            <li data-flip-title="Daisy Bush" data-flip-category="Purples">
                <img src="../assets/images/text4.gif">
            </li>
            <li data-flip-title="Cerulean Blue" data-flip-category="Blues">
                <img src="../assets/images/text5.gif">
            </li>
            <li data-flip-title="Dodger Blue" data-flip-category="Blues">
                <img src="../assets/images/text6.gif">
            </li>
            <li data-flip-title="Cyan" data-flip-category="Blues">
                <img src="../assets/images/text7.gif">
            </li>
            <li data-flip-title="Robin's Egg" data-flip-category="Blues">
                <img src="../assets/images/text8.gif">
            </li>
            <li data-flip-title="Deep Sea" data-flip-category="Greens">
                <img src="../assets/images/text9.gif">
            </li>
            <li data-flip-title="Apple" data-flip-category="Greens">
                <img src="../assets/images/text10.gif">
            </li>
            <li data-flip-title="Pistachio" data-flip-category="Greens">
                <img src="../assets/images/text11.gif">
            </li>
            <li data-flip-title="Pear" data-flip-category="Greens">
                <img src="../assets/images/text12.gif">
            </li>
            <li data-flip-title="Bright Sun" data-flip-category="Yellows">
                <img src="../assets/images/text13.gif">
            </li>
            <li data-flip-title="Mikado" data-flip-category="Yellows">
                <img src="../assets/images/text14.gif">
            </li>
        </ul>
    </div>

<pre class="code">$("#carousel").flipster({
    style: 'carousel',
    spacing: -0.5,
    nav: true,
    buttons: true,
});</pre>

</article>
    <script type="text/javascript" src="../require.js" data-main="../bootstrap.js"></script>
    <script>
        var initPage = function(langx,domx) {
            let $ = domx.query,
                fx = domx.fx;

            let $imageItems = $("ul.flip-items > li"),
                $nav,
                $navItems,
                $navLinks,
                currentIndex,
                $currentItem,

                classes = {
                    navItem  : "menu-item",
                    navCategory: "category",
                    navCategoryLink : "link-category",
                    navChild : "child",
                    navLink : "link",
                    navCurrent : "current"
                };

            var navCategories = {};


            $nav = $("#carousel .lark-menu"); //$('<ul class="' + classes.nav + '" role="navigation" />');
            $navLinks = $('');

            let itemsData = []
            $imageItems.each(function(i) {
                var $imageItem = $(this),
                    category = $imageItem.data('flip-category'),
                    title = $imageItem.data('flip-title') || $imageItem.attr('title') || i,
                    index =  i;

                let itemData = {
                  category,
                  title,
                  index
                };

                if ( category ) {
                    let itemsCategory = itemsData[category];

                    if (!itemsCategory) {
                      itemsCategory = {
                        category,
                        index,
                        children : [
                        ]
                      };
                      itemsData.push(itemsCategory);
                      itemsData[category] = itemsCategory

                    }

                    itemsCategory.children.push(itemData);

                } else {
                  itemsData.push(itemData);
                }

            });

            for (let i=0; i<itemsData.length;i++) {
                let itemData = itemsData[i];
                let navLink = $('<a href="#" class="' + classes.navLink + '">' + itemData.title + '</a>');

                if (itemData.index !== undefined) {
                    navLink.data('index', itemData.index);
                }

                $navLinks = $navLinks.add(navLink);

                if (itemData.children) {
                    let category = itemData.category,
                        childrenItems = itemData.children;
                    if ( !navCategories[category] ) {

                        var categoryItem = $('<li class="' + classes.navItem + ' ' + classes.navCategory + '">');
                        var categoryLink = $('<a href="#" class="' + classes.navLink + ' ' + classes.navCategoryLink + '" data-flip-category="' + category + '">' + category + '</a>')
                                .data('category', itemData.category)
                                .data('index', itemData.index);

                        navCategories[category] = $('<ul class="' + classes.navChild + '" />');

                        $navLinks = $navLinks.add(categoryLink);

                        categoryItem
                            .append(categoryLink, navCategories[category])
                            .appendTo($nav);
                    }

                    for (let j =0 ;j<childrenItems.length;j++) {
                       let childItemData = childrenItems[j];
                       let navLink1 = $('<a href="#" class="' + classes.navLink + '">' + childItemData.title + '</a>')
                        .data('index', childItemData.index);

                      $navLinks = $navLinks.add(navLink1);
                      navCategories[category].append(navLink1);                  
                      navLink1.wrap('<li class="' + classes.navItem + '">');
                    }
                } else {
                  $nav.append(navLink);                   
                }
                navLink.wrap('<li class="' + classes.navItem + '">');
            }


            $navItems = $nav.find('.' + classes.navItem);

            $nav.on('click', 'a', function(e) {
                var index = $(this).data('index');
                if ( index >= 0 ) {
                    show(index);
                    e.preventDefault();
                }
            });

            function updateNavMenu() {

                var category = $currentItem.data('flip-category');

                $navItems.removeClass(classes.navCurrent);

                $navLinks
                    .filter(function() {
                        return ($(this).data('index') === currentIndex || (category && $(this).data('category') === category));
                    })
                    .parent()
                    .addClass(classes.navCurrent);

            }

            function show(index) {
                let $pre = $currentItem;
                currentIndex =index;
                $currentItem = $imageItems.eq(currentIndex);

                if ($pre) {
                    $pre.hide(100,function(){
                        $currentItem.show(100);
                    });
                } else {
                    $currentItem.show(100);                    
                }
                updateNavMenu();
            }

            /*
            $('.lark-menu.cascade.multiExpand').plugin("lark.menus.cascade",{
              "multitier" : {
                "mode" : "cascade",
                "multiExpand" : true
              }                
            });
            */


        };
    </script>

</body>
</html>
