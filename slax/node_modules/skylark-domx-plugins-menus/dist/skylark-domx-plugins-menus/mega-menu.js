/**
 * skylark-domx-plugins-menus - The skylark menu plugin library.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-domx/skylark-domx-plugins-menus/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-query","skylark-domx-lists","skylark-domx-plugins-base","./menus","./menu"],function(e,a,s,i,n,r){"use strict";var l=r.inherit({klassName:"MegaMenu",pluginName:"lark.menus.mega",options:{menuBehaviour:"click",stickyHeader:!0,caret:!1,caretArrows:[{up:"caret-up",down:"caret-down",upUrl:"",downUrl:""}],highlighter:!0,followingHighlighter:!1,highlightColor:"",textHighlighter:!1,textHighlighterColor:"",animation:!1,animationClass:""},_construct:function(s,i){r.prototype._construct.call(this,s,i);let n=this.options;n.selector;var l=a(".main-links ul li a"),t=a(".menu-dropdown .menu-item-wrapper"),o=[],h=[],d=(a("#"+t.attr("id")),this.options.caretArrows[0].up),c=this.options.caretArrows[0].down;if(!1===n.stickyHeader?a(".mega-menu").removeClass("sticky-header"):a(".mega-menu").addClass("sticky-header"),!0===n.caret)d=n.caretArrows[0].up,c=n.caretArrows[0].down;(n.caretArrows[0].up||n.caretArrows[0].down)&&(n.caretArrows[0].upUrl=null,n.caretArrows[0].downUrl=null),a("a[data-submenu]").append('<span class="caret '+c+'"></span>'),!0===n.caret&&""!==n.caretArrows[0].downUrl&&(a(".mega-menu span.caret").removeClass("undefined"),a(".mega-menu span.caret").addClass("caret-img down"),a(".mega-menu span.caret.caret-img.down").css({"background-image":"url("+n.caretArrows[0].downUrl+")"})),a("<style>\n            .mega-menu .main-links ul li a:hover{\n              border-color:"+n.highlightColor+"}\n          </style>").appendTo("head"),l.on(n.menuBehaviour,function(){l.removeClass("highlight"),l.css({"border-color":""})}),""===n.menuBehaviour&&(n.menuBehaviour="click"),l.each(function(s){var i=a(this).attr("data-submenu");o.push(a(this).attr("data-submenu")),a(this).on(n.menuBehaviour,function(){var r=e.inArray(i,h),m=a(this).find(".caret.caret-img");(l.find("span").removeClass(d),l.find("span").addClass(c),o[s]!=h[r]||a(t[r]).hasClass("active")?(a(t[r]).removeClass("active"),a(this).find("span").removeClass(d),a(this).find("span").addClass(c)):(t.removeClass("active"),a(t[r]).addClass("active"),a(this).find("span").removeClass(c),a(this).find("span").addClass(d)),a(".menu-dropdown").find(".menu-item-wrapper").hasClass("active")&&(a(".mega-menu span.caret").addClass("down"),a(".mega-menu span.caret").css({"background-image":"url("+n.caretArrows[0].downUrl+")"})),m.hasClass("down")?(m.removeClass("down"),m.addClass("up"),m.css({"background-image":"url("+n.caretArrows[0].upUrl+")"})):(m.removeClass("up"),m.addClass("down"),m.css({"background-image":"url("+n.caretArrows[0].downUrl+")"})),(l.find("span").hasClass("caret-up")||a(this).find("span").hasClass("up")&&!a(this).hasClass("highlight"))&&(a(this).addClass("highlight"),a(this).css({"border-color":n.highlightColor})),t.hasClass("dropdown"))&&a("#"+h[r]+".dropdown").css({left:a(this).offset().left})})}),!0===n.followingHighlighter&&(a(".main-links ul").append('<div class="follow-highlighter"></div>'),l.mouseover(function(e,s){e.pageX,a(this).offset().left,a(this).innerWidth();a(".follow-highlighter").css({display:"block"}),a(".main-links ul").addClass("follow-highlighter-enabled"),a(".follow-highlighter").css({width:a(this).innerWidth(),left:a(this).offset().left,"background-color":n.highlightColor})})),a(".main-links ul").each(function(){a(this).mouseleave(function(){a(".main-links ul").removeClass("follow-highlighter-enabled"),a(".follow-highlighter").css({display:"none",left:a(l[0]).offset().left})})}),!1===n.highlighter&&(a(".main-links").addClass("disable-highlighter"),a(".follow-highlighter").remove()),!0===n.textHighlighter&&a(".main-links").addClass("text-highlighter"),n.textHighlighterColor&&a("style").append(".mega-menu .text-highlighter.main-links ul li a:hover{\n            color:"+n.textHighlighterColor+"}"),t.each(function(e){h.push(a(t[e]).attr("id"))}),!0===n.animation&&t.addClass(n.animationClass),a(".mobile-nav-icon a").click(function(){a(".follow-highlighter").remove(),a(".main-links").hasClass("active")?(a(".main-links").removeClass("active"),a(".menu-dropdown").hide()):(a(".main-links").addClass("active"),a(".menu-dropdown").show())}),a(".menu-item-wrapper").prepend('<a href="#" class="back-link">Back</a>'),a(window).resize(function(){a(window).width()<768?a(".mega-menu").hasClass("sticky-header")&&(a(".mega-menu").addClass("responsive-menu"),a(".main-links").css({"margin-top":a(".mobile-nav-icon").outerHeight()+"px"})):a(".main-links").css({"margin-top":"0px"})})}});return i.register(l),n.MegaMenu=l});
//# sourceMappingURL=sourcemaps/mega-menu.js.map
