{"version":3,"sources":["mega-menu.js"],"names":["define","langx","$","lists","plugins","menus","Menu","MegaMenu","inherit","klassName","pluginName","options","menuBehaviour","stickyHeader","caret","caretArrows","up","down","upUrl","downUrl","highlighter","followingHighlighter","highlightColor","textHighlighter","textHighlighterColor","animation","animationClass","_construct","elm","prototype","call","this","settings","selector","mainLinks","subMenu","mainLinksDataAttribute","iDofSubMenus","caretUp","attr","caretDown","removeClass","addClass","append","css","background-image","appendTo","on","border-color","each","i","linkID","push","findPositionOfSubmenus","inArray","imageCaret","find","hasClass","left","offset","mouseover","e","pageX","innerWidth","display","width","background-color","mouseleave","remove","click","hide","show","prepend","window","resize","margin-top","outerHeight","register"],"mappings":";;;;;;;AAAAA,QACE,sBACA,qBACA,qBACA,4BACA,UACA,UACA,SAASC,EAAMC,EAAEC,EAAMC,EAAQC,EAAMC,GACrC,aAEA,IAAIC,EAAWD,EAAKE,SAClBC,UAAY,WAEZC,WAAa,kBAEbC,SACEC,cAAe,QACfC,cAAc,EAEdC,OAAM,EACNC,cACEC,GAAI,WACJC,KAAM,aACNC,MAAM,GACNC,QAAQ,KAEVC,aAAa,EACbC,sBAAsB,EACtBC,eAAe,GACfC,iBAAiB,EACjBC,qBAAsB,GACtBC,WAAU,EACVC,eAAgB,IAIlBC,WAAa,SAASC,EAAIjB,GACtBL,EAAKuB,UAAUF,WAAWG,KAAKC,KAAKH,EAAIjB,GAExC,IAAIqB,EAAWD,KAAKpB,QAENqB,EAASC,SAAvB,IACIC,EAAYhC,EAAE,uBACdiC,EAAUjC,EAAE,qCACZkC,KACAC,KAGAC,GAFsBpC,EAAE,IAAIiC,EAAQI,KAAK,OAE/BR,KAAKpB,QAAQI,YAAY,GAAGC,IACtCwB,EAAYT,KAAKpB,QAAQI,YAAY,GAAGE,KAY5C,IAR8B,IAA1Be,EAASnB,aACXX,EAAE,cAAcuC,YAAY,iBAG5BvC,EAAE,cAAcwC,SAAS,kBAIJ,IAAnBV,EAASlB,MACPwB,EAAUN,EAASjB,YAAY,GAAGC,GAClCwB,EAAYR,EAASjB,YAAY,GAAGE,MAItCe,EAASjB,YAAY,GAAGC,IAAMgB,EAASjB,YAAY,GAAGE,QACxDe,EAASjB,YAAY,GAAGG,MAAQ,KAChCc,EAASjB,YAAY,GAAGI,QAAU,MAIpCjB,EAAE,mBAAmByC,OAAO,sBAAwBH,EAAY,cAGzC,IAAnBR,EAASlB,OAAsD,KAApCkB,EAASjB,YAAY,GAAGI,UACrDjB,EAAE,yBAAyBuC,YAAY,aACvCvC,EAAE,yBAAyBwC,SAAS,kBACpCxC,EAAE,wCAAwC0C,KAAKC,mBAAqB,OAAQb,EAASjB,YAAY,GAAGI,QAAS,OAI/GjB,EAAE,0FAEoB8B,EAASV,eAC3B,yBACSwB,SAAS,QAGtBZ,EAAUa,GAAGf,EAASpB,cAAe,WACnCsB,EAAUO,YAAY,aACtBP,EAAUU,KAAKI,eAAe,OAID,KAA3BhB,EAASpB,gBACXoB,EAASpB,cAAgB,SAI3BsB,EAAUe,KAAK,SAASC,GAEtB,IAAIC,EAASjD,EAAE6B,MAAMQ,KAAK,gBAE1BH,EAAuBgB,KAAKlD,EAAE6B,MAAMQ,KAAK,iBAEzCrC,EAAE6B,MAAMgB,GAAGf,EAASpB,cAAc,WAEhC,IAAIyC,EAAyBpD,EAAMqD,QAASH,EAAQd,GAEhDkB,EAAarD,EAAE6B,MAAMyB,KAAK,qBAG9BtB,EAAUsB,KAAK,QAAQf,YAAYH,GACnCJ,EAAUsB,KAAK,QAAQd,SAASF,GAK5BJ,EAAuBc,IAAMb,EAAagB,IAA4BnD,EAAEiC,EAAQkB,IAAyBI,SAAS,WASlHvD,EAAEiC,EAAQkB,IAAyBZ,YAAY,UAE/CvC,EAAE6B,MAAMyB,KAAK,QAAQf,YAAYH,GACjCpC,EAAE6B,MAAMyB,KAAK,QAAQd,SAASF,KAVhCL,EAAQM,YAAY,UACpBvC,EAAEiC,EAAQkB,IAAyBX,SAAS,UAE5CxC,EAAE6B,MAAMyB,KAAK,QAAQf,YAAYD,GACjCtC,EAAE6B,MAAMyB,KAAK,QAAQd,SAASJ,IAU5BpC,EAAE,kBAAkBsD,KAAK,sBAAsBC,SAAS,YAC1DvD,EAAE,yBAAyBwC,SAAS,QACpCxC,EAAE,yBAAyB0C,KAAKC,mBAAqB,OAAQb,EAASjB,YAAY,GAAGI,QAAS,OAI5FoC,EAAWE,SAAS,SACtBF,EAAWd,YAAY,QACvBc,EAAWb,SAAS,MACpBa,EAAWX,KAAKC,mBAAqB,OAAQb,EAASjB,YAAY,GAAGG,MAAO,QAI5EqC,EAAWd,YAAY,MACvBc,EAAWb,SAAS,QACpBa,EAAWX,KAAKC,mBAAqB,OAAQb,EAASjB,YAAY,GAAGI,QAAS,QAK5Ee,EAAUsB,KAAK,QAAQC,SAAS,aAAevD,EAAE6B,MAAMyB,KAAK,QAAQC,SAAS,QAAUvD,EAAE6B,MAAM0B,SAAS,gBAC1GvD,EAAE6B,MAAMW,SAAS,aAGjBxC,EAAE6B,MAAMa,KAAKI,eAAgBhB,EAASV,kBAIpCa,EAAQsB,SAAS,cACUvD,EAAE,IAAImC,EAAagB,GAAwB,aACjDT,KAAKc,KAAQxD,EAAE6B,MAAM4B,SAASD,YASrB,IAAlC1B,EAASX,uBAGXnB,EAAE,kBAAkByC,OAAO,0CAG3BT,EAAU0B,UAAU,SAASC,EAAEX,GAEGW,EAAEC,MAAQ5D,EAAE6B,MAAM4B,SAASD,KAC7BxD,EAAE6B,MAAMgC,aAEtC7D,EAAE,uBAAuB0C,KAAKoB,QAAW,UACzC9D,EAAE,kBAAkBwC,SAAS,8BAC7BxC,EAAE,uBAAuB0C,KAAKqB,MAAU/D,EAAE6B,MAAMgC,aAAeL,KAASxD,EAAE6B,MAAM4B,SAASD,KAAOQ,mBAAoBlC,EAASV,oBAMjIpB,EAAE,kBAAkB+C,KAAK,WACvB/C,EAAE6B,MAAMoC,WAAW,WACjBjE,EAAE,kBAAkBuC,YAAY,8BAChCvC,EAAE,uBAAuB0C,KAAKoB,QAAW,OAAQN,KAASxD,EAAEgC,EAAU,IAAIyB,SAASD,YAK1D,IAAzB1B,EAASZ,cACXlB,EAAE,eAAewC,SAAS,uBAC1BxC,EAAE,uBAAuBkE,WAIM,IAA7BpC,EAAST,iBACXrB,EAAE,eAAewC,SAAS,oBAGxBV,EAASR,sBACXtB,EAAE,SAASyC,OAAO,6EACNX,EAASR,qBACrB,KAIAW,EAAQc,KAAK,SAASC,GACpBb,EAAae,KAAKlD,EAAEiC,EAAQe,IAAIX,KAAK,UAIZ,IAAvBP,EAASP,WACXU,EAAQO,SAASV,EAASN,gBAI5BxB,EAAE,sBAAsBmE,MAAM,WAC5BnE,EAAE,uBAAuBkE,SACrBlE,EAAE,eAAeuD,SAAS,WAC5BvD,EAAE,eAAeuC,YAAY,UAC7BvC,EAAE,kBAAkBoE,SAGpBpE,EAAE,eAAewC,SAAS,UAC1BxC,EAAE,kBAAkBqE,UAOxBrE,EAAE,sBAAsBsE,QAAQ,0CAEhCtE,EAAEuE,QAAQC,OAAO,WACZxE,EAAEuE,QAAQR,QAAU,IAGlB/D,EAAE,cAAcuD,SAAS,mBAC3BvD,EAAE,cAAcwC,SAAS,mBACzBxC,EAAE,eAAe0C,KAAK+B,aAAczE,EAAE,oBAAoB0E,cAAc,QAO1E1E,EAAE,eAAe0C,KAAK+B,aAAc,aAqB/C,OAFAvE,EAAQyE,SAAStE,GAEVF,EAAME,SAAWA","file":"../mega-menu.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var MegaMenu = Menu.inherit({\r\n    klassName : \"MegaMenu\",\r\n\r\n    pluginName : \"lark.menus.mega\",\r\n\r\n    options : {\r\n      menuBehaviour: \"click\",\r\n      stickyHeader: true,\r\n      //selector: $(this),\r\n      caret:false,\r\n      caretArrows: [{\r\n        up: \"caret-up\",\r\n        down: \"caret-down\",\r\n        upUrl:\"\",\r\n        downUrl:\"\",\r\n      }],\r\n      highlighter: true,\r\n      followingHighlighter: false,\r\n      highlightColor:\"\",\r\n      textHighlighter: false,\r\n      textHighlighterColor: \"\",\r\n      animation:false,\r\n      animationClass: \"\",\r\n\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        let settings = this.options;\r\n        \r\n        var element = settings.selector;\r\n        var mainLinks = $(\".main-links ul li a\");\r\n        var subMenu = $(\".menu-dropdown .menu-item-wrapper\");\r\n        var mainLinksDataAttribute = [];\r\n        var iDofSubMenus = [];\r\n        var selectElementwithId = $(\"#\"+subMenu.attr(\"id\"));\r\n\r\n        var caretUp = this.options.caretArrows[0].up;\r\n        var caretDown = this.options.caretArrows[0].down;\r\n\r\n        // Sticky Heder\r\n\r\n        if (settings.stickyHeader === false) {\r\n          $(\".mega-menu\").removeClass(\"sticky-header\");\r\n        }\r\n        else {\r\n          $(\".mega-menu\").addClass(\"sticky-header\");\r\n        }\r\n\r\n        // If caret: custom then it will exclude default settings mentioned above\r\n        if (settings.caret === true) {\r\n          var caretUp = settings.caretArrows[0].up;\r\n          var caretDown = settings.caretArrows[0].down;\r\n        }\r\n\r\n        // If icon caret (up or down) is not empty image caret should be hidden\r\n        if (settings.caretArrows[0].up || settings.caretArrows[0].down ) {\r\n          settings.caretArrows[0].upUrl = null;\r\n          settings.caretArrows[0].downUrl = null;\r\n        }\r\n\r\n        // Creating Caret icon for every link which have data-submenu attribute\r\n        $(\"a[data-submenu]\").append('<span class=\"caret ' + caretDown + '\"></span>');\r\n\r\n        // Set Initial Image path for carret (Default is down)\r\n        if (settings.caret === true && settings.caretArrows[0].downUrl !== \"\") {\r\n          $(\".mega-menu span.caret\").removeClass(\"undefined\");\r\n          $(\".mega-menu span.caret\").addClass(\"caret-img down\");\r\n          $(\".mega-menu span.caret.caret-img.down\").css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n        }\r\n\r\n        // Append Style on DOM\r\n        $(`<style>\r\n            .mega-menu .main-links ul li a:hover{\r\n              border-color:` +settings.highlightColor+\r\n            `}\r\n          </style>`).appendTo(\"head\");\r\n\r\n        // Remove Active link Highlight\r\n        mainLinks.on(settings.menuBehaviour, function(){\r\n          mainLinks.removeClass(\"highlight\");\r\n          mainLinks.css({\"border-color\":\"\"});\r\n        });\r\n\r\n        // If a user didn't defined menu behaviour\r\n        if (settings.menuBehaviour === \"\") {\r\n          settings.menuBehaviour = \"click\";\r\n        }\r\n\r\n        // Menu Toggle Works\r\n        mainLinks.each(function(i){\r\n\r\n          var linkID = $(this).attr(\"data-submenu\");\r\n\r\n          mainLinksDataAttribute.push($(this).attr(\"data-submenu\"));\r\n\r\n          $(this).on(settings.menuBehaviour,function(){\r\n            // Find Position of Menu ULs to help pass index for perticular ID on each menu links\r\n            var findPositionOfSubmenus = langx.inArray( linkID, iDofSubMenus );\r\n\r\n            var imageCaret = $(this).find(\".caret.caret-img\");\r\n\r\n            // Sets every links default behavour for caret except currently clicked\r\n            mainLinks.find(\"span\").removeClass(caretUp);\r\n            mainLinks.find(\"span\").addClass(caretDown);\r\n\r\n            // $(\".caret.caret-img\").css(\"background-image\").replace(/\\\"/g, \"\") == \"url(\" +settings.caretArrows[0].downUrl+ \")\"\r\n\r\n            // Icon Caret toggling\r\n            if (mainLinksDataAttribute[i] == iDofSubMenus[findPositionOfSubmenus] && !$(subMenu[findPositionOfSubmenus]).hasClass(\"active\")) {\r\n\r\n              subMenu.removeClass(\"active\");\r\n              $(subMenu[findPositionOfSubmenus]).addClass(\"active\");\r\n\r\n              $(this).find(\"span\").removeClass(caretDown);\r\n              $(this).find(\"span\").addClass(caretUp);\r\n            }\r\n            else {\r\n                $(subMenu[findPositionOfSubmenus]).removeClass(\"active\");\r\n\r\n                $(this).find(\"span\").removeClass(caretUp);\r\n                $(this).find(\"span\").addClass(caretDown);\r\n            }\r\n\r\n            // Sets every links default behavour for image caret except currently clicked\r\n            if ($(\".menu-dropdown\").find(\".menu-item-wrapper\").hasClass(\"active\")) {\r\n              $(\".mega-menu span.caret\").addClass(\"down\");\r\n              $(\".mega-menu span.caret\").css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n            }\r\n\r\n            // Image caret toggling\r\n            if (imageCaret.hasClass(\"down\")) {\r\n              imageCaret.removeClass(\"down\");\r\n              imageCaret.addClass(\"up\");\r\n              imageCaret.css({\"background-image\" : \"url(\" +settings.caretArrows[0].upUrl+ \")\"});\r\n              // console.log(imageCaret[0].className);\r\n            }\r\n            else {\r\n              imageCaret.removeClass(\"up\");\r\n              imageCaret.addClass(\"down\");\r\n              imageCaret.css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n              // console.log(imageCaret[0].className);\r\n            }\r\n\r\n            // Active link Highlight\r\n            if (mainLinks.find(\"span\").hasClass(\"caret-up\") || $(this).find(\"span\").hasClass(\"up\") && !$(this).hasClass(\"highlight\") ) {\r\n              $(this).addClass(\"highlight\");\r\n\r\n              // Changing Highlight Color\r\n              $(this).css({\"border-color\": settings.highlightColor});\r\n            }\r\n\r\n            // Normal Dropdown Positioning\r\n            if (subMenu.hasClass(\"dropdown\") ) {\r\n              var dropDownforClickedLink = $(\"#\"+iDofSubMenus[findPositionOfSubmenus]+\".dropdown\");\r\n              dropDownforClickedLink.css({\"left\": $(this).offset().left })\r\n            }\r\n\r\n          });\r\n\r\n        });\r\n\r\n\r\n        // If Follow highlighter set true\r\n        if (settings.followingHighlighter === true) {\r\n\r\n          // Add a element with class first\r\n          $(\".main-links ul\").append('<div class=\"follow-highlighter\"></div>');\r\n\r\n          // While Mouser Hover\r\n          mainLinks.mouseover(function(e,i){\r\n\r\n            var getCurrentElementMousePos = e.pageX - $(this).offset().left;\r\n            var currentElementHalfWidth = $(this).innerWidth() / 2;\r\n\r\n            $(\".follow-highlighter\").css({\"display\": \"block\"});\r\n            $(\".main-links ul\").addClass(\"follow-highlighter-enabled\")\r\n            $(\".follow-highlighter\").css({\"width\" : $(this).innerWidth() , \"left\" : $(this).offset().left , \"background-color\": settings.highlightColor});\r\n\r\n          });\r\n        }\r\n\r\n        // While Mouse Unhover\r\n        $(\".main-links ul\").each(function(){\r\n          $(this).mouseleave(function(){\r\n            $(\".main-links ul\").removeClass(\"follow-highlighter-enabled\");\r\n            $(\".follow-highlighter\").css({\"display\": \"none\", \"left\" : $(mainLinks[0]).offset().left});\r\n          })\r\n        })\r\n\r\n        // If no need of highighter\r\n        if (settings.highlighter === false) {\r\n          $(\".main-links\").addClass(\"disable-highlighter\");\r\n          $(\".follow-highlighter\").remove();\r\n        }\r\n\r\n        // If Text Highlighter Set to true\r\n        if (settings.textHighlighter === true) {\r\n          $(\".main-links\").addClass(\"text-highlighter\");\r\n        }\r\n        // Text Highlighter Color\r\n        if (settings.textHighlighterColor) {\r\n          $(\"style\").append(`.mega-menu .text-highlighter.main-links ul li a:hover{\r\n            color:` + settings.textHighlighterColor +\r\n          `}`);\r\n        }\r\n\r\n          // Get menus IDs\r\n          subMenu.each(function(i){\r\n            iDofSubMenus.push($(subMenu[i]).attr(\"id\"));\r\n          });\r\n\r\n          // Add Animations\r\n          if (settings.animation === true) {\r\n            subMenu.addClass(settings.animationClass);\r\n          }\r\n\r\n          // Mobile Nav icon\r\n          $(\".mobile-nav-icon a\").click(function(){\r\n            $(\".follow-highlighter\").remove();\r\n            if ($(\".main-links\").hasClass(\"active\")) {\r\n              $(\".main-links\").removeClass(\"active\");\r\n              $(\".menu-dropdown\").hide();\r\n            }\r\n            else {\r\n              $(\".main-links\").addClass(\"active\");\r\n              $(\".menu-dropdown\").show();\r\n            }\r\n          });\r\n\r\n\r\n          // Responsive options\r\n\r\n          $(\".menu-item-wrapper\").prepend('<a href=\"#\" class=\"back-link\">Back</a>');\r\n\r\n          $(window).resize(function() {\r\n           if ($(window).width() < 768) {\r\n\r\n             // Get main-links marging top as height of mobile-nav-icon\r\n             if ($(\".mega-menu\").hasClass(\"sticky-header\")) {\r\n               $(\".mega-menu\").addClass(\"responsive-menu\");\r\n               $(\".main-links\").css({\"margin-top\": $(\".mobile-nav-icon\").outerHeight()+\"px\"});\r\n\r\n               // $(\".menu-item-wrapper\").prepend('<a href=\"#\" class=\"back-link\">Back</a>');\r\n\r\n             }\r\n\r\n           } else {\r\n             $(\".main-links\").css({\"margin-top\": \"0px\"});\r\n             // $(\".back-link\").remove();\r\n            // $(\".mega-menu\").removeClass(\"responsive-menu\");\r\n           }\r\n          });\r\n\r\n          ///$(document).ready(\r\n          ///  function(){\r\n          ///    $(\".back-link\").on('click', function(){\r\n          ///      mainLinks.trigger('click');\r\n         ///       $(mainLinks[mainLinks.length - 1]).trigger('click');\r\n          ///    });\r\n          ///  }\r\n          ///)\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(MegaMenu);\r\n\r\n  return menus.MegaMenu = MegaMenu;\t\r\n});"]}