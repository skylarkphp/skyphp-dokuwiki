{"version":3,"sources":["skylark-domx-plugins-menus.js"],"names":["define","skylark","attach","langx","$","lists","plugins","menus","Menu","Plugin","inherit","klassName","pluginName","options","template","classes","base","selectors","container","item","templates","general","separator","hasChildren","active","submenu","children","descendant","data","onAction","_construct","elm","prototype","call","this","_$container","listenTo","e","itemData","currentTarget","renderMenuItemHtml","_renderItemHtml","itemTpl","isString","isFunction","renderGeneralMenuItem","_renderGeneralItemHtml","renderHasChildrenMenuItem","_renderHasChildrenItemHtml","register","AccordionMenu","multitier","togglable","sublist","hasSublist","multiExpand","CascadeMenu","MegaMenu","menuBehaviour","stickyHeader","caret","caretArrows","up","down","upUrl","downUrl","highlighter","followingHighlighter","highlightColor","textHighlighter","textHighlighterColor","animation","animationClass","settings","selector","mainLinks","subMenu","mainLinksDataAttribute","iDofSubMenus","caretUp","attr","caretDown","removeClass","addClass","append","css","background-image","appendTo","on","border-color","each","i","linkID","push","findPositionOfSubmenus","inArray","imageCaret","find","hasClass","dropDownforClickedLink","left","offset","mouseover","pageX","innerWidth","display","width","background-color","mouseleave","remove","click","hide","show","prepend","window","resize","margin-top","outerHeight","NavMenu","items","resetItems","itemsData","self","$itemsContainer","forEach","renderItem","$container","$item","$childrenContainer","childItemData","TreeMenu","mixin","$el","plugin","toggle","keys","noder","styler","popups","PopupMenu","delay","icons","position","my","at","role","disabled","wrapper","blur","focus","select","element","activeMenu","mouseHandled","lastMousePosition","x","y","tabIndex","mousedown","event","preventDefault","_activateItem","target","not","disable","length","isPropagationStopped","has","expand","is","closest","trigger","parents","clearTimeout","timer","mouseenter","mousemove","keepActiveItem","_menuItems","first","_delay","notContained","contains","collapseAll","keydown","document","_closeOnDocumentClick","previousFilter","clientX","clientY","actualTarget","siblings","_keydown","match","prev","character","skip","keyCode","PAGE_UP","previousPage","PAGE_DOWN","nextPage","HOME","_move","END","UP","previous","DOWN","next","LEFT","collapse","RIGHT","ENTER","SPACE","_activate","ESC","toString","String","fromCharCode","filterTimer","_filterMenuItems","index","nextAll","_itemRole","menu","listbox","nested","focused","type","_scrollIntoView","parent","_close","test","_startOpening","borderTop","paddingTop","scroll","elementHeight","itemHeight","_hasScroll","parseFloat","top","scrollTop","height","fromFocus","_open","extend","of","open","all","currentMenu","startMenu","close","_isDivider","text","newItem","isFirstItem","prevAll","isLastItem","filter","direction","last","prop","ui","escapedCharacter","replace","regex","RegExp","trim","main"],"mappings":"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","file":"../skylark-domx-plugins-menus.js","sourcesContent":["define('skylark-domx-plugins-menus/menus',[\r\n\t\"skylark-langx/skylark\"\r\n],function(skylark){\r\n\treturn skylark.attach(\"domx.plugins.menus\");\r\n});\ndefine('skylark-domx-plugins-menus/menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\"\r\n],function(langx,$,lists,plugins,menus){\r\n  'use strict'\r\n\r\n\r\n  var Menu = plugins.Plugin.inherit({\r\n    klassName : \"Menu\",\r\n\r\n    pluginName : \"lark.menus.menu\",\r\n\r\n    options : {\r\n      template : \"\",\r\n\r\n      classes : {\r\n        base : \"lark-menu\"\r\n      },\r\n\r\n      selectors : {\r\n        container : null\r\n      },\r\n\r\n      item : {\r\n        templates : {\r\n          general : '<li class=\"menu-item\"><a href=\"#\" class=\"link\"><%= title %></a></li>',\r\n          separator : \"\",\r\n          hasChildren : '<li class=\"menu-item hasChildren\"><a href=\"#\" class=\"link\"><%= title %></a><ul class=\"submenu\"></ul>',\r\n        },\r\n\r\n        classes : {\r\n          base : \"menu-item\",\r\n          active : \"active\",\r\n          hasChildren : \"hasChildren\"\r\n        },\r\n\r\n        selectors : {\r\n          general : \"li\",\r\n          hasChildren : \":has(ul)\"\r\n        }\r\n      },\r\n\r\n      submenu : {\r\n        template : \"<ul></ul>\",\r\n        classes : {\r\n          base : \"submenu\"\r\n        },\r\n        selectors : {\r\n          children : \"> ul\",\r\n          descendant : \"ul\"\r\n        }\r\n      },\r\n\r\n      data : {\r\n        ///items : []\r\n      },\r\n\r\n      onAction : null\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        plugins.Plugin.prototype._construct.call(this,elm,options);\r\n\r\n        this._$container = this.$(this.options.selectors.container);\r\n\r\n        if (this.options.onAction) {\r\n          this.listenTo(this._$container,\"click\",`.${this.options.item.classes.base}`,(e)=>{\r\n              var itemData = $(e.currentTarget).data(\"item\");\r\n              this.options.onAction(itemData);\r\n\r\n          });\r\n        }\r\n\r\n    },\r\n\r\n    renderMenuItemHtml : function(itemData) {\r\n      if (!this._renderItemHtml) {\r\n        let itemTpl = this.options.item.template;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return this._renderItemHtml(itemData);\r\n    },\r\n\r\n    renderGeneralMenuItem : function(itemData) {\r\n      if (!this._renderGeneralItemHtml) {\r\n        let itemTpl = this.options.item.templates.general;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderGeneralItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderGeneralItemHtml = itemTpl;\r\n        }\r\n      }\r\n      return $(this._renderGeneralItemHtml(itemData));\r\n    },\r\n\r\n    renderHasChildrenMenuItem : function(itemData) {\r\n      if (!this._renderHasChildrenItemHtml) {\r\n        let itemTpl = this.options.item.templates.hasChildren;\r\n        if (langx.isString(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = langx.template(itemTpl);\r\n        } else if (langx.isFunction(itemTpl)) {\r\n          this._renderHasChildrenItemHtml = itemTpl;\r\n        }\r\n      }\r\n\r\n      return $(this._renderHasChildrenItemHtml(itemData));\r\n    }   \r\n\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Menu);\r\n\r\n  return menus.Menu = Menu; \r\n});\ndefine('skylark-domx-plugins-menus/accordion-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n  \r\n   var AccordionMenu = Menu.inherit({\r\n    klassName : \"AccordionMenu\",\r\n\r\n    pluginName : \"lark.menus.accordion\",\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        lists.multitier(elm, {\r\n          togglable : true,\r\n\r\n          classes : {\r\n            active :  this.options.item.classes.active  // active\r\n           /// collapse : \"collapse\",\r\n           /// in : \"in\",\r\n          },\r\n\r\n          selectors : {\r\n            item : this.options.item.selectors.general,          //li\r\n            sublist : this.options.submenu.selectors.descendant, //\"ul\",\r\n            hasSublist : this.options.item.selectors.hasChildren//\":has(ul)\",\r\n            ///handler : \" > a\"\r\n          },\r\n\r\n          multiExpand : false\r\n\r\n        });\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(AccordionMenu);\r\n\r\n  return menus.AccordionMenu = AccordionMenu; \r\n});\ndefine('skylark-domx-plugins-menus/cascade-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var CascadeMenu = Menu.inherit({\r\n    klassName : \"CascadeMenu\",\r\n\r\n    pluginName : \"lark.menus.cascade\",\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        lists.multitier(elm, {\r\n          togglable : true,\r\n\r\n          classes : {\r\n            active :  this.options.item.classes.active  // active\r\n           /// collapse : \"collapse\",\r\n           /// in : \"in\",\r\n          },\r\n\r\n          selectors : {\r\n            item : this.options.item.selectors.general,          //li\r\n            sublist : this.options.submenu.selectors.descendant, //\"ul\",\r\n            hasSublist : this.options.item.selectors.hasChildren//\":has(ul)\",\r\n            ///handler : \" > a\"\r\n          },\r\n\r\n          multiExpand : false\r\n\r\n        });\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(CascadeMenu);\r\n\r\n  return menus.CascadeMenu = CascadeMenu;\t\r\n});\ndefine('skylark-domx-plugins-menus/mega-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var MegaMenu = Menu.inherit({\r\n    klassName : \"MegaMenu\",\r\n\r\n    pluginName : \"lark.menus.mega\",\r\n\r\n    options : {\r\n      menuBehaviour: \"click\",\r\n      stickyHeader: true,\r\n      //selector: $(this),\r\n      caret:false,\r\n      caretArrows: [{\r\n        up: \"caret-up\",\r\n        down: \"caret-down\",\r\n        upUrl:\"\",\r\n        downUrl:\"\",\r\n      }],\r\n      highlighter: true,\r\n      followingHighlighter: false,\r\n      highlightColor:\"\",\r\n      textHighlighter: false,\r\n      textHighlighterColor: \"\",\r\n      animation:false,\r\n      animationClass: \"\",\r\n\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        let settings = this.options;\r\n        \r\n        var element = settings.selector;\r\n        var mainLinks = $(\".main-links ul li a\");\r\n        var subMenu = $(\".menu-dropdown .menu-item-wrapper\");\r\n        var mainLinksDataAttribute = [];\r\n        var iDofSubMenus = [];\r\n        var selectElementwithId = $(\"#\"+subMenu.attr(\"id\"));\r\n\r\n        var caretUp = this.options.caretArrows[0].up;\r\n        var caretDown = this.options.caretArrows[0].down;\r\n\r\n        // Sticky Heder\r\n\r\n        if (settings.stickyHeader === false) {\r\n          $(\".mega-menu\").removeClass(\"sticky-header\");\r\n        }\r\n        else {\r\n          $(\".mega-menu\").addClass(\"sticky-header\");\r\n        }\r\n\r\n        // If caret: custom then it will exclude default settings mentioned above\r\n        if (settings.caret === true) {\r\n          var caretUp = settings.caretArrows[0].up;\r\n          var caretDown = settings.caretArrows[0].down;\r\n        }\r\n\r\n        // If icon caret (up or down) is not empty image caret should be hidden\r\n        if (settings.caretArrows[0].up || settings.caretArrows[0].down ) {\r\n          settings.caretArrows[0].upUrl = null;\r\n          settings.caretArrows[0].downUrl = null;\r\n        }\r\n\r\n        // Creating Caret icon for every link which have data-submenu attribute\r\n        $(\"a[data-submenu]\").append('<span class=\"caret ' + caretDown + '\"></span>');\r\n\r\n        // Set Initial Image path for carret (Default is down)\r\n        if (settings.caret === true && settings.caretArrows[0].downUrl !== \"\") {\r\n          $(\".mega-menu span.caret\").removeClass(\"undefined\");\r\n          $(\".mega-menu span.caret\").addClass(\"caret-img down\");\r\n          $(\".mega-menu span.caret.caret-img.down\").css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n        }\r\n\r\n        // Append Style on DOM\r\n        $(`<style>\r\n            .mega-menu .main-links ul li a:hover{\r\n              border-color:` +settings.highlightColor+\r\n            `}\r\n          </style>`).appendTo(\"head\");\r\n\r\n        // Remove Active link Highlight\r\n        mainLinks.on(settings.menuBehaviour, function(){\r\n          mainLinks.removeClass(\"highlight\");\r\n          mainLinks.css({\"border-color\":\"\"});\r\n        });\r\n\r\n        // If a user didn't defined menu behaviour\r\n        if (settings.menuBehaviour === \"\") {\r\n          settings.menuBehaviour = \"click\";\r\n        }\r\n\r\n        // Menu Toggle Works\r\n        mainLinks.each(function(i){\r\n\r\n          var linkID = $(this).attr(\"data-submenu\");\r\n\r\n          mainLinksDataAttribute.push($(this).attr(\"data-submenu\"));\r\n\r\n          $(this).on(settings.menuBehaviour,function(){\r\n            // Find Position of Menu ULs to help pass index for perticular ID on each menu links\r\n            var findPositionOfSubmenus = langx.inArray( linkID, iDofSubMenus );\r\n\r\n            var imageCaret = $(this).find(\".caret.caret-img\");\r\n\r\n            // Sets every links default behavour for caret except currently clicked\r\n            mainLinks.find(\"span\").removeClass(caretUp);\r\n            mainLinks.find(\"span\").addClass(caretDown);\r\n\r\n            // $(\".caret.caret-img\").css(\"background-image\").replace(/\\\"/g, \"\") == \"url(\" +settings.caretArrows[0].downUrl+ \")\"\r\n\r\n            // Icon Caret toggling\r\n            if (mainLinksDataAttribute[i] == iDofSubMenus[findPositionOfSubmenus] && !$(subMenu[findPositionOfSubmenus]).hasClass(\"active\")) {\r\n\r\n              subMenu.removeClass(\"active\");\r\n              $(subMenu[findPositionOfSubmenus]).addClass(\"active\");\r\n\r\n              $(this).find(\"span\").removeClass(caretDown);\r\n              $(this).find(\"span\").addClass(caretUp);\r\n            }\r\n            else {\r\n                $(subMenu[findPositionOfSubmenus]).removeClass(\"active\");\r\n\r\n                $(this).find(\"span\").removeClass(caretUp);\r\n                $(this).find(\"span\").addClass(caretDown);\r\n            }\r\n\r\n            // Sets every links default behavour for image caret except currently clicked\r\n            if ($(\".menu-dropdown\").find(\".menu-item-wrapper\").hasClass(\"active\")) {\r\n              $(\".mega-menu span.caret\").addClass(\"down\");\r\n              $(\".mega-menu span.caret\").css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n            }\r\n\r\n            // Image caret toggling\r\n            if (imageCaret.hasClass(\"down\")) {\r\n              imageCaret.removeClass(\"down\");\r\n              imageCaret.addClass(\"up\");\r\n              imageCaret.css({\"background-image\" : \"url(\" +settings.caretArrows[0].upUrl+ \")\"});\r\n              // console.log(imageCaret[0].className);\r\n            }\r\n            else {\r\n              imageCaret.removeClass(\"up\");\r\n              imageCaret.addClass(\"down\");\r\n              imageCaret.css({\"background-image\" : \"url(\" +settings.caretArrows[0].downUrl+ \")\"});\r\n              // console.log(imageCaret[0].className);\r\n            }\r\n\r\n            // Active link Highlight\r\n            if (mainLinks.find(\"span\").hasClass(\"caret-up\") || $(this).find(\"span\").hasClass(\"up\") && !$(this).hasClass(\"highlight\") ) {\r\n              $(this).addClass(\"highlight\");\r\n\r\n              // Changing Highlight Color\r\n              $(this).css({\"border-color\": settings.highlightColor});\r\n            }\r\n\r\n            // Normal Dropdown Positioning\r\n            if (subMenu.hasClass(\"dropdown\") ) {\r\n              var dropDownforClickedLink = $(\"#\"+iDofSubMenus[findPositionOfSubmenus]+\".dropdown\");\r\n              dropDownforClickedLink.css({\"left\": $(this).offset().left })\r\n            }\r\n\r\n          });\r\n\r\n        });\r\n\r\n\r\n        // If Follow highlighter set true\r\n        if (settings.followingHighlighter === true) {\r\n\r\n          // Add a element with class first\r\n          $(\".main-links ul\").append('<div class=\"follow-highlighter\"></div>');\r\n\r\n          // While Mouser Hover\r\n          mainLinks.mouseover(function(e,i){\r\n\r\n            var getCurrentElementMousePos = e.pageX - $(this).offset().left;\r\n            var currentElementHalfWidth = $(this).innerWidth() / 2;\r\n\r\n            $(\".follow-highlighter\").css({\"display\": \"block\"});\r\n            $(\".main-links ul\").addClass(\"follow-highlighter-enabled\")\r\n            $(\".follow-highlighter\").css({\"width\" : $(this).innerWidth() , \"left\" : $(this).offset().left , \"background-color\": settings.highlightColor});\r\n\r\n          });\r\n        }\r\n\r\n        // While Mouse Unhover\r\n        $(\".main-links ul\").each(function(){\r\n          $(this).mouseleave(function(){\r\n            $(\".main-links ul\").removeClass(\"follow-highlighter-enabled\");\r\n            $(\".follow-highlighter\").css({\"display\": \"none\", \"left\" : $(mainLinks[0]).offset().left});\r\n          })\r\n        })\r\n\r\n        // If no need of highighter\r\n        if (settings.highlighter === false) {\r\n          $(\".main-links\").addClass(\"disable-highlighter\");\r\n          $(\".follow-highlighter\").remove();\r\n        }\r\n\r\n        // If Text Highlighter Set to true\r\n        if (settings.textHighlighter === true) {\r\n          $(\".main-links\").addClass(\"text-highlighter\");\r\n        }\r\n        // Text Highlighter Color\r\n        if (settings.textHighlighterColor) {\r\n          $(\"style\").append(`.mega-menu .text-highlighter.main-links ul li a:hover{\r\n            color:` + settings.textHighlighterColor +\r\n          `}`);\r\n        }\r\n\r\n          // Get menus IDs\r\n          subMenu.each(function(i){\r\n            iDofSubMenus.push($(subMenu[i]).attr(\"id\"));\r\n          });\r\n\r\n          // Add Animations\r\n          if (settings.animation === true) {\r\n            subMenu.addClass(settings.animationClass);\r\n          }\r\n\r\n          // Mobile Nav icon\r\n          $(\".mobile-nav-icon a\").click(function(){\r\n            $(\".follow-highlighter\").remove();\r\n            if ($(\".main-links\").hasClass(\"active\")) {\r\n              $(\".main-links\").removeClass(\"active\");\r\n              $(\".menu-dropdown\").hide();\r\n            }\r\n            else {\r\n              $(\".main-links\").addClass(\"active\");\r\n              $(\".menu-dropdown\").show();\r\n            }\r\n          });\r\n\r\n\r\n          // Responsive options\r\n\r\n          $(\".menu-item-wrapper\").prepend('<a href=\"#\" class=\"back-link\">Back</a>');\r\n\r\n          $(window).resize(function() {\r\n           if ($(window).width() < 768) {\r\n\r\n             // Get main-links marging top as height of mobile-nav-icon\r\n             if ($(\".mega-menu\").hasClass(\"sticky-header\")) {\r\n               $(\".mega-menu\").addClass(\"responsive-menu\");\r\n               $(\".main-links\").css({\"margin-top\": $(\".mobile-nav-icon\").outerHeight()+\"px\"});\r\n\r\n               // $(\".menu-item-wrapper\").prepend('<a href=\"#\" class=\"back-link\">Back</a>');\r\n\r\n             }\r\n\r\n           } else {\r\n             $(\".main-links\").css({\"margin-top\": \"0px\"});\r\n             // $(\".back-link\").remove();\r\n            // $(\".mega-menu\").removeClass(\"responsive-menu\");\r\n           }\r\n          });\r\n\r\n          ///$(document).ready(\r\n          ///  function(){\r\n          ///    $(\".back-link\").on('click', function(){\r\n          ///      mainLinks.trigger('click');\r\n         ///       $(mainLinks[mainLinks.length - 1]).trigger('click');\r\n          ///    });\r\n          ///  }\r\n          ///)\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(MegaMenu);\r\n\r\n  return menus.MegaMenu = MegaMenu;\t\r\n});\ndefine('skylark-domx-plugins-menus/nav-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var NavMenu = Menu.inherit({\r\n    klassName : \"NavMenu\",\r\n\r\n    pluginName : \"lark.menus.nav\",\r\n\r\n    options : {\r\n      item : {\r\n        templates : {\r\n        } \r\n      }\r\n    },\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        if (this.options.data.items) {\r\n          this.resetItems(this.options.data.items);\r\n        }\r\n\r\n        lists.multitier(elm, {\r\n          togglable : false,\r\n\r\n          classes : {\r\n            active :  this.options.item.classes.active  // active\r\n           /// collapse : \"collapse\",\r\n           /// in : \"in\",\r\n          },\r\n\r\n          selectors : {\r\n            item : this.options.item.selectors.general,          //li\r\n            sublist : this.options.submenu.selectors.descendant, //\"ul\",\r\n            hasSublist : this.options.item.selectors.hasChildren//\":has(ul)\",\r\n            ///handler : \" > a\"\r\n          },\r\n\r\n          multiExpand : false\r\n\r\n        });\r\n    },\r\n\r\n    resetItems : function(itemsData) {\r\n      let self = this;\r\n\r\n      function renderItem(itemData,$container) {\r\n        let $item;\r\n        if (itemData.children) {\r\n          $item = self.renderHasChildrenMenuItem(itemData);\r\n        } else {\r\n          $item = self.renderGeneralMenuItem(itemData);\r\n        }\r\n\r\n        $item.data(\"item\",itemData);\r\n        $container.append($item)\r\n\r\n        if (itemData.children) {\r\n          let $childrenContainer = $item.find(self.options.submenu.selectors.children);\r\n          itemData.children.forEach((childItemData) => {\r\n            renderItem(childItemData,$childrenContainer);            \r\n          });\r\n        }\r\n      }\r\n        \r\n      let $itemsContainer = this.$(this.options.selectors.container)\r\n\r\n      itemsData.forEach((itemData)=>{\r\n        renderItem(itemData,$itemsContainer);\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(NavMenu);\r\n\r\n  return menus.NavMenu = NavMenu;\t\r\n});\n define('skylark-domx-plugins-menus/tree-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./menus\",\r\n  \"./menu\",\r\n  \"skylark-domx-plugins-toggles\"\r\n],function(langx,$,lists,plugins,menus,Menu){\r\n  'use strict'\r\n\r\n  var TreeMenu = Menu.inherit({\r\n    klassName : \"Tree\",\r\n\r\n    pluginName : \"lark.menus.tree\",\r\n\r\n    _construct : function(elm,options) {\r\n        Menu.prototype._construct.call(this,elm,options);\r\n\r\n        lists.multitier(elm,langx.mixin({\r\n          hide : function($el) {\r\n            $el.plugin(\"lark.toggles.collapse\").hide();\r\n          },\r\n          toggle : function($el) {\r\n            $el.plugin(\"lark.toggles.collapse\").toggle();\r\n          }\r\n        },this.options));\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(TreeMenu);\r\n\r\n  return menus.TreeMenu = TreeMenu;\t\r\n});\ndefine('skylark-domx-plugins-menus/popup-menu',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-devices-keyboard/keys\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-styler\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-lists\",\r\n  \"skylark-domx-plugins-base\",\r\n \t\"skylark-domx-plugins-popups/popups\",\r\n  \"./menus\",\r\n  \"./menu\"\r\n],function(langx,keys,noder,styler, $,lists,plugins,popups,menus,Menu){\r\n  'use strict'\r\n\r\n  \tvar PopupMenu = Menu.inherit({\r\n\r\n    \tklassName : \"PopupMenu\",\r\n\r\n    \tpluginName : \"lark.menus.popup\",\r\n\r\n\t\tdelay: 300,\r\n\t\toptions: {\r\n\t\t\ticons: {\r\n\t\t\t\tsubmenu: \"ui-icon-caret-1-e\"\r\n\t\t\t},\r\n\t\t\t///items: \"> *\",\r\n\t\t\t///menus: \"ul\",\r\n\t\t\tposition: {\r\n\t\t\t\tmy: \"left top\",\r\n\t\t\t\tat: \"right top\"\r\n\t\t\t},\r\n\r\n\t\t\trole: \"menu\",\r\n\r\n\r\n\t\t\titem : {\r\n\t\t\t\tclasses : {\r\n\t\t\t\t\tbase : \"menu-item\",\r\n          \t\t\tactive : \"active\",\r\n          \t\t\tdisabled : \"disabled\",\r\n          \t\t\twrapper : \"menu-item-wrapper\"\r\n\t\t\t\t},\r\n\t\t\t\tselector : \"> *\"\r\n\t\t\t},\r\n\r\n\t\t\t// Callbacks\r\n\t\t\tblur: null,\r\n\t\t\tfocus: null,\r\n\t\t\tselect: null\r\n\t\t},\r\n\r\n    \t_construct : function(elm,options) {\r\n        \tMenu.prototype._construct.call(this,elm,options);\r\n\t\t\tthis.element = this.$();\r\n\r\n\t\t\tthis.activeMenu = this.element;\r\n\r\n\t\t\t// Flag used to prevent firing of the click handler\r\n\t\t\t// as the event bubbles up through nested menus\r\n\t\t\tthis.mouseHandled = false;\r\n\t\t\tthis.lastMousePosition = { x: null, y: null };\r\n\t\t\tthis.element\r\n\t\t\t\t.attr( {\r\n\t\t\t\t\trole: this.options.role,\r\n\t\t\t\t\ttabIndex: 0\r\n\t\t\t\t} );\r\n\r\n\t\t\tthis.listenTo(this.element, {\r\n\r\n\t\t\t\t// Prevent focus from sticking to links inside menu after clicking\r\n\t\t\t\t// them (focus should always stay on UL during navigation).\r\n\t\t\t\t'mousedown': function( event ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\tthis._activateItem( event );\r\n\t\t\t\t},\r\n\t\t\t\t\"click\": function( event ) {\r\n\t\t\t\t\tvar target = $( event.target );\r\n\t\t\t\t\t//var active = $( $.ui.safeActiveElement( this.document[ 0 ] ) );\r\n\t\t\t\t\tvar active = $(noder.active());\r\n\t\t\t\t\tif ( !this.mouseHandled && target.not(`.${this.options.item.classes.disable}`).length ) {\r\n\t\t\t\t\t\tthis.select( event );\r\n\r\n\t\t\t\t\t\t// Only set the mouseHandled flag if the event will bubble, see #9469.\r\n\t\t\t\t\t\tif ( !event.isPropagationStopped() ) {\r\n\t\t\t\t\t\t\tthis.mouseHandled = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Open submenu on click\r\n\t\t\t\t\t\tif ( target.has(`.${this.options.submenu.classes.base}`).length ) {\r\n\t\t\t\t\t\t\tthis.expand( event );\r\n\t\t\t\t\t\t} else if ( !this.element.is( \":focus\" ) &&\r\n\t\t\t\t\t\t\t\tactive.closest( `.${this.options.submenu.classes.base}` ).length ) {\r\n\r\n\t\t\t\t\t\t\t// Redirect focus to the menu\r\n\t\t\t\t\t\t\tthis.element.trigger( \"focus\", [ true ] );\r\n\r\n\t\t\t\t\t\t\t// If the active item is on the top level, let it stay active.\r\n\t\t\t\t\t\t\t// Otherwise, blur the active item since it is no longer visible.\r\n\t\t\t\t\t\t\tif ( this.active && this.active.parents( `.${this.options.submenu.classes.base}` ).length === 1 ) {\r\n\t\t\t\t\t\t\t\tclearTimeout( this.timer );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"mouseenter\": \"_activateItem\",\r\n\t\t\t\t\"mousemove\": \"_activateItem\",\r\n\t\t\t}, `.${this.options.item.classes.base}`);\r\n\r\n\t\t\tthis.listenTo(this.element, {\r\n\t\t\t\t\"mouseleave\": \"collapseAll\",\r\n\t\t\t\t\"focus\": function( event, keepActiveItem ) {\r\n\r\n\t\t\t\t\t// If there's already an active item, keep it active\r\n\t\t\t\t\t// If not, activate the first item\r\n\t\t\t\t\tvar item = this.active || this._menuItems().first();\r\n\r\n\t\t\t\t\tif ( !keepActiveItem ) {\r\n\t\t\t\t\t\tthis.focus( event, item );\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"blur\": function( event ) {\r\n\t\t\t\t\tthis._delay( function() {\r\n\t\t\t\t\t\tvar notContained = !noder.contains(\r\n\t\t\t\t\t\t\tthis.element[ 0 ],\r\n\t\t\t\t\t\t\t//$.ui.safeActiveElement( this.document[ 0 ] )\r\n\t\t\t\t\t\t\tnoder.active()\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tif ( notContained ) {\r\n\t\t\t\t\t\t\tthis.collapseAll( event );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t},\r\n\t\t\t\t\"keydown\": \"_keydown\"\r\n\t\t\t} );\r\n\r\n\t\t\tthis.listenTo(this.element, \"mouseleave\",  `.${this.options.submenu.classes.base}`, \"collapseAll\");\r\n\r\n\t\t\t///this.refresh();\r\n\r\n\t\t\t// Clicks outside of a menu collapse any open menus\r\n\t\t\tthis.listenTo( $(document), {\r\n\t\t\t\tclick: function( event ) {\r\n\t\t\t\t\tif ( this._closeOnDocumentClick( event ) ) {\r\n\t\t\t\t\t\tthis.collapseAll( event, true );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Reset the mouseHandled flag\r\n\t\t\t\t\tthis.mouseHandled = false;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t},\r\n\r\n\t\t_activateItem: function( event ) {\r\n\r\n\t\t\t// Ignore mouse events while typeahead is active, see #10458.\r\n\t\t\t// Prevents focusing the wrong item when typeahead causes a scroll while the mouse\r\n\t\t\t// is over an item in the menu\r\n\t\t\tif ( this.previousFilter ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// If the mouse didn't actually move, but the page was scrolled, ignore the event (#9356)\r\n\t\t\tif ( event.clientX === this.lastMousePosition.x &&\r\n\t\t\t\t\tevent.clientY === this.lastMousePosition.y ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.lastMousePosition = {\r\n\t\t\t\tx: event.clientX,\r\n\t\t\t\ty: event.clientY\r\n\t\t\t};\r\n\r\n\t\t\tvar actualTarget = $( event.target ).closest( `.${this.options.item.classes.base}` ),\r\n\t\t\t\ttarget = $( event.currentTarget );\r\n\r\n\t\t\t// Ignore bubbled events on parent items, see #11641\r\n\t\t\tif ( actualTarget[ 0 ] !== target[ 0 ] ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// If the item is already active, there's nothing to do\r\n\t\t\tif ( target.is(`.${this.options.item.classes.active}`) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Remove ui-state-active class from siblings of the newly focused menu item\r\n\t\t\t// to avoid a jump caused by adjacent elements both having a class with a border\r\n\t\t\t///this._removeClass( target.siblings().children( \".ui-state-active\" ),\r\n\t\t\t///\tnull, \"ui-state-active\" );\r\n\t\t\ttarget.siblings().children( `.${this.options.item.classes.active}` ).removeClass(this.options.item.classes.active);\r\n\t\t\tthis.focus( event, target );\r\n\t\t},\r\n\r\n\t\t_keydown: function( event ) {\r\n\t\t\tvar match, prev, character, skip,\r\n\t\t\t\tpreventDefault = true;\r\n\r\n\t\t\tswitch ( event.keyCode ) {\r\n\t\t\tcase keys.PAGE_UP:\r\n\t\t\t\tthis.previousPage( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.PAGE_DOWN:\r\n\t\t\t\tthis.nextPage( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.HOME:\r\n\t\t\t\tthis._move( \"first\", \"first\", event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.END:\r\n\t\t\t\tthis._move( \"last\", \"last\", event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.UP:\r\n\t\t\t\tthis.previous( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.DOWN:\r\n\t\t\t\tthis.next( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.LEFT:\r\n\t\t\t\tthis.collapse( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.RIGHT:\r\n\t\t\t\tif ( this.active && !this.active.is( `.${this.options.item.classes.disabled}`) ) {\r\n\t\t\t\t\tthis.expand( event );\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.ENTER:\r\n\t\t\tcase keys.SPACE:\r\n\t\t\t\tthis._activate( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keys.ESC:\r\n\t\t\t\tthis.collapse( event );\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tpreventDefault = false;\r\n\t\t\t\tprev = this.previousFilter || \"\";\r\n\t\t\t\tskip = false;\r\n\r\n\t\t\t\t// Support number pad values\r\n\t\t\t\tcharacter = event.keyCode >= 96 && event.keyCode <= 105 ?\r\n\t\t\t\t\t( event.keyCode - 96 ).toString() : String.fromCharCode( event.keyCode );\r\n\r\n\t\t\t\tclearTimeout( this.filterTimer );\r\n\r\n\t\t\t\tif ( character === prev ) {\r\n\t\t\t\t\tskip = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcharacter = prev + character;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmatch = this._filterMenuItems( character );\r\n\t\t\t\tmatch = skip && match.index( this.active.next() ) !== -1 ?\r\n\t\t\t\t\tthis.active.nextAll( `.${this.options.item.classes.base}` ) :\r\n\t\t\t\t\tmatch;\r\n\r\n\t\t\t\t// If no matches on the current filter, reset to the last character pressed\r\n\t\t\t\t// to move down the menu to the first item that starts with that character\r\n\t\t\t\tif ( !match.length ) {\r\n\t\t\t\t\tcharacter = String.fromCharCode( event.keyCode );\r\n\t\t\t\t\tmatch = this._filterMenuItems( character );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( match.length ) {\r\n\t\t\t\t\tthis.focus( event, match );\r\n\t\t\t\t\tthis.previousFilter = character;\r\n\t\t\t\t\tthis.filterTimer = this._delay( function() {\r\n\t\t\t\t\t\tdelete this.previousFilter;\r\n\t\t\t\t\t}, 1000 );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete this.previousFilter;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( preventDefault ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_activate: function( event ) {\r\n\t\t\tif ( this.active && !this.active.is( `.${this.options.item.classes.disabled}` ) ) {\r\n\t\t\t\tif ( this.active.children( \"[aria-haspopup='true']\" ).length ) {\r\n\t\t\t\t\tthis.expand( event );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.select( event );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_itemRole: function() {\r\n\t\t\treturn {\r\n\t\t\t\tmenu: \"menuitem\",\r\n\t\t\t\tlistbox: \"option\"\r\n\t\t\t}[ this.options.role ];\r\n\t\t},\r\n\r\n\t\tfocus: function( event, item ) {\r\n\t\t\tvar nested, focused, activeParent;\r\n\t\t\tthis.blur( event, event && event.type === \"focus\" );\r\n\r\n\t\t\tthis._scrollIntoView( item );\r\n\r\n\t\t\tthis.active = item.first();\r\n\r\n\t\t\tfocused = this.active.children( `.${this.options.item.classes.wrapper}` );\r\n\t\t\t///this._addClass( focused, null, \"ui-state-active\" );\r\n\t\t\tfocused.addClass(this.options.item.classes.active);\r\n\r\n\t\t\t// Only update aria-activedescendant if there's a role\r\n\t\t\t// otherwise we assume focus is managed elsewhere\r\n\t\t\tif ( this.options.role ) {\r\n\t\t\t\tthis.element.attr( \"aria-activedescendant\", focused.attr( \"id\" ) );\r\n\t\t\t}\r\n\r\n\t\t\t// Highlight active parent menu item, if any\r\n\t\t\tactiveParent = this.active\r\n\t\t\t\t.parent()\r\n\t\t\t\t\t.closest( `.${this.options.item.classes.base}`)\r\n\t\t\t\t\t\t.children( `.${this.options.item.classes.wrapper}`);\r\n\t\t\t///this._addClass( activeParent, null, \"ui-state-active\" );\r\n\t\t\tactiveParent.addClass(this.options.item.classes.active );\r\n\r\n\t\t\tif ( event && event.type === \"keydown\" ) {\r\n\t\t\t\tthis._close();\r\n\t\t\t} else {\r\n\t\t\t\tthis.timer = this._delay( function() {\r\n\t\t\t\t\tthis._close();\r\n\t\t\t\t}, this.delay );\r\n\t\t\t}\r\n\r\n\t\t\tnested = item.children( `.${this.options.submenu.classes.base}` );\r\n\t\t\tif ( nested.length && event && ( /^mouse/.test( event.type ) ) ) {\r\n\t\t\t\tthis._startOpening( nested );\r\n\t\t\t}\r\n\t\t\tthis.activeMenu = item.parent();\r\n\r\n\t\t\t///this._trigger( \"focus\", event, { item: item } );\r\n\t\t\tthis.trigger(\"focus\",{item : item})\r\n\t\t},\r\n\r\n\t\t_scrollIntoView: function( item ) {\r\n\t\t\tvar borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;\r\n\t\t\tif ( this._hasScroll() ) {\r\n\t\t\t\tborderTop = parseFloat( styler.css( this.activeMenu[ 0 ], \"borderTopWidth\" ) ) || 0;\r\n\t\t\t\tpaddingTop = parseFloat( styler.css( this.activeMenu[ 0 ], \"paddingTop\" ) ) || 0;\r\n\t\t\t\toffset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;\r\n\t\t\t\tscroll = this.activeMenu.scrollTop();\r\n\t\t\t\telementHeight = this.activeMenu.height();\r\n\t\t\t\titemHeight = item.outerHeight();\r\n\r\n\t\t\t\tif ( offset < 0 ) {\r\n\t\t\t\t\tthis.activeMenu.scrollTop( scroll + offset );\r\n\t\t\t\t} else if ( offset + itemHeight > elementHeight ) {\r\n\t\t\t\t\tthis.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tblur: function( event, fromFocus ) {\r\n\t\t\tif ( !fromFocus ) {\r\n\t\t\t\tclearTimeout( this.timer );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !this.active ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t///this._removeClass( this.active.children( \".ui-menu-item-wrapper\" ),\r\n\t\t\t///\tnull, \"ui-state-active\" );\r\n\t\t\tthis.active.children( `.${this.options.item.classes.wrapper}` ).removeClass(this.options.item.classes.active);\r\n\r\n\t\t\t///this._trigger( \"blur\", event, { item: this.active } );\r\n\t\t\tthis.trigger( \"blur\", { item: this.active } );\r\n\t\t\tthis.active = null;\r\n\t\t},\r\n\r\n\t\t_startOpening: function( submenu ) {\r\n\t\t\tclearTimeout( this.timer );\r\n\r\n\t\t\t// Don't open if already open fixes a Firefox bug that caused a .5 pixel\r\n\t\t\t// shift in the submenu position when mousing over the caret icon\r\n\t\t\t///if ( submenu.attr( \"aria-hidden\" ) !== \"true\" ) {\r\n\t\t\t///\treturn;\r\n\t\t\t///}\r\n\r\n\t\t\tthis.timer = this._delay( function() {\r\n\t\t\t\tthis._close();\r\n\t\t\t\tthis._open( submenu );\r\n\t\t\t}, this.delay );\r\n\t\t},\r\n\r\n\t\t_open: function( submenu ) {\r\n\t\t\tvar position = langx.extend( {\r\n\t\t\t\tof: this.active\r\n\t\t\t}, this.options.position );\r\n\r\n\t\t\tclearTimeout( this.timer );\r\n\t\t\tthis.element.find( `.${this.options.submenu.classes.base}`).not( submenu.parents( `.${this.options.submenu.classes.base}` ) )\r\n\t\t\t\t.hide()\r\n\t\t\t\t.attr( \"aria-hidden\", \"true\" );\r\n\r\n\t\t\t//submenu\r\n\t\t\t//\t.show()\r\n\t\t\t//\t.removeAttr( \"aria-hidden\" )\r\n\t\t\t//\t.attr( \"aria-expanded\", \"true\" )\r\n\t\t\t//\t.position( position );\r\n\t\t\tpopups.open(submenu.attr( \"aria-expanded\", \"true\" ),{\r\n\t\t\t\tposition\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tcollapseAll: function( event, all ) {\r\n\t\t\tclearTimeout( this.timer );\r\n\t\t\tthis.timer = this._delay( function() {\r\n\r\n\t\t\t\t// If we were passed an event, look for the submenu that contains the event\r\n\t\t\t\tvar currentMenu = all ? this.element :\r\n\t\t\t\t\t$( event && event.target ).closest( this.element.find( `.${this.options.submenu.classes.base}`) );\r\n\r\n\t\t\t\t// If we found no valid submenu ancestor, use the main menu to close all\r\n\t\t\t\t// sub menus anyway\r\n\t\t\t\tif ( !currentMenu.length ) {\r\n\t\t\t\t\tcurrentMenu = this.element;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._close( currentMenu );\r\n\r\n\t\t\t\tthis.blur( event );\r\n\r\n\t\t\t\t// Work around active item staying active after menu is blurred\r\n\t\t\t\t///this._removeClass( currentMenu.find( \".ui-state-active\" ), null, \"ui-state-active\" );\r\n\t\t\t\tcurrentMenu.find( `.${this.options.item.classes.active}`).removeClass(this.options.item.classes.active );\r\n\r\n\t\t\t\tthis.activeMenu = currentMenu;\r\n\t\t\t}, all ? 0 : this.delay );\r\n\t\t},\r\n\r\n\t\t// With no arguments, closes the currently active menu - if nothing is active\r\n\t\t// it closes all menus.  If passed an argument, it will search for menus BELOW\r\n\t\t_close: function( startMenu ) {\r\n\t\t\tif ( !startMenu ) {\r\n\t\t\t\tstartMenu = this.active ? this.active.parent() : this.element;\r\n\t\t\t}\r\n\r\n\t\t\t//startMenu.find(`.${this.options.submenu.classes.base}` )\r\n\t\t\t//\t.hide()\r\n\t\t\t//\t.attr( \"aria-hidden\", \"true\" )\r\n\t\t\t//\t.attr( \"aria-expanded\", \"false\" );\r\n\t\t\tpopups.close(startMenu.find(`.${this.options.submenu.classes.base}` ).attr( \"aria-expanded\", \"false\" ));\r\n\t\t},\r\n\r\n\t\t_closeOnDocumentClick: function( event ) {\r\n\t\t\treturn !$( event.target ).closest(`.${this.options.submenu.classes.base}` ).length;\r\n\t\t},\r\n\r\n\t\t_isDivider: function( item ) {\r\n\r\n\t\t\t// Match hyphen, em dash, en dash\r\n\t\t\treturn !/[^\\-\\u2014\\u2013\\s]/.test( item.text() );\r\n\t\t},\r\n\r\n\t\tcollapse: function( event ) {\r\n\t\t\tvar newItem = this.active &&\r\n\t\t\t\tthis.active.parent().closest( `.${this.options.item.classes.base}`, this.element );\r\n\t\t\tif ( newItem && newItem.length ) {\r\n\t\t\t\tthis._close();\r\n\t\t\t\tthis.focus( event, newItem );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\texpand: function( event ) {\r\n\t\t\tvar newItem = this.active && this._menuItems( this.active.children( `.${this.options.submenu.classes.base}` ) ).first();\r\n\r\n\t\t\tif ( newItem && newItem.length ) {\r\n\t\t\t\tthis._open( newItem.parent() );\r\n\r\n\t\t\t\t// Delay so Firefox will not hide activedescendant change in expanding submenu from AT\r\n\t\t\t\tthis._delay( function() {\r\n\t\t\t\t\tthis.focus( event, newItem );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tnext: function( event ) {\r\n\t\t\tthis._move( \"next\", \"first\", event );\r\n\t\t},\r\n\r\n\t\tprevious: function( event ) {\r\n\t\t\tthis._move( \"prev\", \"last\", event );\r\n\t\t},\r\n\r\n\t\tisFirstItem: function() {\r\n\t\t\treturn this.active && !this.active.prevAll( `.${this.options.item.classes.base}` ).length;\r\n\t\t},\r\n\r\n\t\tisLastItem: function() {\r\n\t\t\treturn this.active && !this.active.nextAll( `.${this.options.item.classes.base}` ).length;\r\n\t\t},\r\n\r\n\t\t_menuItems: function( menu ) {\r\n\t\t\treturn ( menu || this.element )\r\n\t\t\t\t.find( this.options.items )\r\n\t\t\t\t.filter( `.${this.options.item.classes.base}` );\r\n\t\t},\r\n\r\n\t\t_move: function( direction, filter, event ) {\r\n\t\t\tvar next;\r\n\t\t\tif ( this.active ) {\r\n\t\t\t\tif ( direction === \"first\" || direction === \"last\" ) {\r\n\t\t\t\t\tnext = this.active\r\n\t\t\t\t\t\t[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( `.${this.options.item.classes.base}` )\r\n\t\t\t\t\t\t.last();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnext = this.active\r\n\t\t\t\t\t\t[ direction + \"All\" ]( `.${this.options.item.classes.base}` )\r\n\t\t\t\t\t\t.first();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( !next || !next.length || !this.active ) {\r\n\t\t\t\tnext = this._menuItems( this.activeMenu )[ filter ]();\r\n\t\t\t}\r\n\r\n\t\t\tthis.focus( event, next );\r\n\t\t},\r\n\r\n\t\tnextPage: function( event ) {\r\n\t\t\tvar item, base, height;\r\n\r\n\t\t\tif ( !this.active ) {\r\n\t\t\t\tthis.next( event );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this.isLastItem() ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this._hasScroll() ) {\r\n\t\t\t\tbase = this.active.offset().top;\r\n\t\t\t\theight = this.element.height();\r\n\t\t\t\tthis.active.nextAll( `.${this.options.item.classes.base}` ).each( function() {\r\n\t\t\t\t\titem = $( this );\r\n\t\t\t\t\treturn item.offset().top - base - height < 0;\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tthis.focus( event, item );\r\n\t\t\t} else {\r\n\t\t\t\tthis.focus( event, this._menuItems( this.activeMenu )\r\n\t\t\t\t\t[ !this.active ? \"first\" : \"last\" ]() );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpreviousPage: function( event ) {\r\n\t\t\tvar item, base, height;\r\n\t\t\tif ( !this.active ) {\r\n\t\t\t\tthis.next( event );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this.isFirstItem() ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( this._hasScroll() ) {\r\n\t\t\t\tbase = this.active.offset().top;\r\n\t\t\t\theight = this.element.height();\r\n\t\t\t\tthis.active.prevAll( `.${this.options.item.classes.base}` ).each( function() {\r\n\t\t\t\t\titem = $( this );\r\n\t\t\t\t\treturn item.offset().top - base + height > 0;\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tthis.focus( event, item );\r\n\t\t\t} else {\r\n\t\t\t\tthis.focus( event, this._menuItems( this.activeMenu ).first() );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_hasScroll: function() {\r\n\t\t\treturn this.element.outerHeight() < this.element.prop( \"scrollHeight\" );\r\n\t\t},\r\n\r\n\t\tselect: function( event ) {\r\n\r\n\t\t\t// TODO: It should never be possible to not have an active item at this\r\n\t\t\t// point, but the tests don't trigger mouseenter before click.\r\n\t\t\tthis.active = this.active || $( event.target ).closest( `.${this.options.item.classes.base}` );\r\n\t\t\tvar ui = { item: this.active };\r\n\t\t\tif ( !this.active.has( `.${this.options.submenu.classes.base}` ).length ) {\r\n\t\t\t\tthis.collapseAll( event, true );\r\n\t\t\t}\r\n\t\t\t///this._trigger( \"select\", event, ui );\r\n\t\t\tthis.trigger( \"select\", ui );\r\n\t\t},\r\n\r\n\t\t_filterMenuItems: function( character ) {\r\n\t\t\tvar escapedCharacter = character.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" ),\r\n\t\t\t\tregex = new RegExp( \"^\" + escapedCharacter, \"i\" );\r\n\r\n\t\t\treturn this.activeMenu\r\n\t\t\t\t.find( this.options.items )\r\n\r\n\t\t\t\t\t// Only match on items, not dividers or other content (#10571)\r\n\t\t\t\t\t.filter( `.${this.options.item.classes.base}` )\r\n\t\t\t\t\t\t.filter( function() {\r\n\t\t\t\t\t\t\treturn regex.test(\r\n\t\t\t\t\t\t\t\tlangx.trim( $( this ).children( `.${this.options.item.classes.wrapper}`).text() ) );\r\n\t\t\t\t\t\t} );\r\n\t\t}\r\n\t} );\r\n\r\n  plugins.register(PopupMenu);\r\n\r\n  return menus.PopupMenu = PopupMenu;\t\r\n\r\n});\r\n\ndefine('skylark-domx-plugins-menus/main',[\r\n    \"./menus\",\r\n    \"./accordion-menu\",\r\n    \"./cascade-menu\",\r\n    \"./mega-menu\",\r\n    \"./nav-menu\",\r\n    \"./tree-menu\",\r\n    \"./popup-menu\"\r\n], function(menus) {\r\n    return menus;\r\n});\ndefine('skylark-domx-plugins-menus', ['skylark-domx-plugins-menus/main'], function (main) { return main; });\n\n"]}