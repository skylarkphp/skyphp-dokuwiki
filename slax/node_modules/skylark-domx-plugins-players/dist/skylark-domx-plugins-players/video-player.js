/**
 * skylark-domx-plugins-players - A  ui library for rendering various media data specified by mime-type.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-noder","skylark-domx-eventer","skylark-domx-query","skylark-domx-plugins-base","./players"],function(s,i,e,t,o,a){"use strict";var n=o.Plugin.inherit({klassName:"VideoPlayer",pluginName:"lark.players.video",options:{classes:{videoContent:"video-content",videoLoading:"video-loading",videoPlaying:"video-playing"},videoPosterProperty:"poster",videoSourcesProperty:"sources"},_construct:function(s,i){o.Plugin.prototype._construct.call(this,s,i);let a,n=this.$(),l=t("<video/>"),r=this._video=l[0];n.addClass(this.options.classes.videoContent);var p=this._$poster=t("<img/>");p.prop("draggable",!1),n.append(p),p.css({maxWidth:"100%",maxHeight:"100%"});var d=this._$play=t("<a/>");d.prop("target","_blank"),r.controls=!0,this.listenTo(l,"error",function(){}),this.listenTo(l,"pause",function(){r.seeking||(a=!1,this.$().removeClass(this.options.classes.videoLoading).removeClass(this.options.classes.videoPlaying),this.trigger("pause"))}),this.listenTo(l,"playing",()=>{a=!1,this.$().removeClass(this.options.classes.videoLoading).addClass(this.options.classes.videoPlaying),this.trigger("playing")}),this.listenTo(l,"play",()=>{a=!0,this.$().addClass(this.options.classes.videoLoading),this.trigger("play")}),this.listenTo(d,"click",s=>{e.stop(s),a?this.pause():this.play()}),n.append(l),l.css({maxWidth:"100%",maxHeight:"100%"}),n.append(d),this.options.media&&this.source(this.options.media)},source:function(s){this._media=s;let i=s.title||"",e=s.href,t=s.type,o=s.poster||"",a=s.altText||"",n=this.$(),l=this._video,r=this._$play,p=this._$poster;n.prop("title",i),l.canPlayType&&e&&t&&l.canPlayType(t)&&(l.src=e),l.poster=o,p.prop({src:o,alt:a}),r.prop({download:i,href:e})},load:function(){this._video.load()},play:function(){this._video.play()},stop:function(){},pause:function(){this._video.pause()}});return o.register(n),a.VideoPlayer=n});
//# sourceMappingURL=sourcemaps/video-player.js.map
