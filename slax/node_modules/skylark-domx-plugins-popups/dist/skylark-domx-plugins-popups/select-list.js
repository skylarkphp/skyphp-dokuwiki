/**
 * skylark-domx-plugins-popups - The skylark popup utility library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./popups","./dropdown"],function(e,t,i,s,n,l,d,o,a){var r=d.Plugin.inherit({klassName:"SelectList",pluginName:"lark.popups.selectlist",options:{emptyLabelHTML:'<li data-value=""><a href="#">No items</a></li>'},_construct:function(t,i){this.overrided(t,i),this.$element=this.$(),this.$button=this.$element.find(".btn.dropdown-toggle"),this.$hiddenField=this.$element.find(".hidden-field"),this.$label=this.$element.find(".selected-label"),this.$dropdownMenu=this.$element.find(".dropdown-menu"),this.$button.plugin("lark.popups.dropdown"),this.$element.on("click.selectlist",".dropdown-menu a",e.proxy(this.itemClicked,this)),this.setDefaultSelection(),"auto"!==this.options.resize&&"auto"!==this.$element.attr("data-resize")||this.resize(),0===this.$dropdownMenu.children("li").length&&(this.disable(),this.doSelect(l(this.options.emptyLabelHTML))),this.$element.on("shown.dropdown",function(){var e=l(this);l(document).on("keypress.selectlist",function(t){var i=String.fromCharCode(t.which);e.find("li").each(function(e,t){if(l(t).text().charAt(0).toLowerCase()===i)return l(t).children("a").focus(),!1})})}),this.$element.on("hide.dropdown",function(){l(document).off("keypress.selectlist")})},_destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},doSelect:function(e){var t;this.$selectedItem=t=e,this.$hiddenField.val(this.$selectedItem.attr("data-value")),this.$label.html(l(this.$selectedItem.children()[0]).html()),this.$element.find("li").each(function(){t.is(l(this))?l(this).attr("data-selected",!0):l(this).removeData("selected").removeAttr("data-selected")})},itemClicked:function(e){this.$element.trigger("clicked.selectlist",this.$selectedItem),e.preventDefault(),l(e.currentTarget).parent("li").is(".disabled, :disabled")||(l(e.target).parent().is(this.$selectedItem)||this.itemChanged(e),this.$element.find(".dropdown-toggle").focus())},itemChanged:function(e){this.doSelect(l(e.target).closest("li"));var t=this.selectedItem();this.$element.trigger("changed.selectlist",t)},resize:function(){var e=0,t=0,i=l("<div/>").addClass("selectlist-sizer");Boolean(l(document).find("html").hasClass("fuelux"))?l(document.body).append(i):l(".fuelux:first").append(i),i.append(this.$element.clone()),this.$element.find("a").each(function(){i.find(".selected-label").text(l(this).text()),t=i.find(".selectlist").outerWidth(),(t+=i.find(".sr-only").outerWidth())>e&&(e=t)}),e<=1||(this.$button.css("width",e),this.$dropdownMenu.css("width",e),i.remove())},selectedItem:function(){var t=this.$selectedItem.text();return e.mixin({text:t},this.$selectedItem.data())},selectByText:function(e){var t=l([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||l(this).text()||"").toLowerCase()===(e||"").toLowerCase())return t=l(this),!1}),this.doSelect(t)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);this.doSelect(t)},setDefaultSelection:function(){var e=this.$element.find("li[data-selected=true]").eq(0);0===e.length&&(e=this.$element.find("li").has("a").eq(0)),this.doSelect(e)},enable:function(){this.$element.removeClass("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$button.addClass("disabled")}});return r.prototype.getValue=r.prototype.selectedItem,d.register(r),o.SelectList=r});
//# sourceMappingURL=sourcemaps/select-list.js.map
