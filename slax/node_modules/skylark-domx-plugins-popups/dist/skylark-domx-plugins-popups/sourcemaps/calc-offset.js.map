{"version":3,"sources":["calc-offset.js"],"names":["define","geom","popups","calcOffset","popup","ref","dpSize","size","dpWidth","width","dpHeight","height","refHeight","doc","ownerDocument","docElem","documentElement","viewWidth","clientWidth","scrollLeft","viewHeight","clientHeight","scrollTop","offset","pagePosition","offsetLeft","left","offsetTop","top","Math","min","abs","bottom","right"],"mappings":";;;;;;;AAAAA,QACC,oBACA,YACC,SACDC,EACAC,GAwCG,OAAOA,EAAOC,WAlCd,SAAoBC,EAAOC,GACvB,IACIC,EAASL,EAAKM,KAAKH,GACnBI,EAAUF,EAAOG,MACjBC,EAAWJ,EAAOK,OAClBC,EAAYX,EAAKU,OAAON,GACxBQ,EAAMT,EAAMU,cACZC,EAAUF,EAAIG,gBACdC,EAAYF,EAAQG,YAAcjB,EAAKkB,WAAWN,GAClDO,EAAaL,EAAQM,aAAepB,EAAKqB,UAAUT,GACnDU,EAAStB,EAAKuB,aAAanB,GAC3BoB,EAAaF,EAAOG,KACpBC,EAAYJ,EAAOK,IAYvB,OAVAD,GAAaf,EAEba,GACII,KAAKC,IAAIL,EAAaA,EAAajB,EAAUS,GAAaA,EAAYT,EACtEqB,KAAKE,IAAIN,EAAajB,EAAUS,GAAa,IAO7CW,IALJD,GACIE,KAAKC,IAAIH,EAAaA,EAAYjB,EAAWU,GAAcA,EAAaV,EACxEmB,KAAKE,IAAIrB,EAAWE,EArBX,GAAA,GAyBToB,OAAQT,EAAOS,OACfN,KAAMD,EACNQ,MAAOV,EAAOU,MACdxB,MAAOc,EAAOd,MACdE,OAAQY,EAAOZ","file":"../calc-offset.js","sourcesContent":["define([\r\n\t\"skylark-domx-geom\",\r\n\t\"./popups\"\r\n],function(\r\n\tgeom,\r\n\tpopups\r\n){\r\n    /**\r\n    * checkOffset - get the offset below/above and left/right element depending on screen position\r\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n    */\r\n    function calcOffset(popup, ref) {\r\n        var extraY = 0;\r\n        var dpSize = geom.size(popup);\r\n        var dpWidth = dpSize.width;\r\n        var dpHeight = dpSize.height;\r\n        var refHeight = geom.height(ref);\r\n        var doc = popup.ownerDocument;\r\n        var docElem = doc.documentElement;\r\n        var viewWidth = docElem.clientWidth + geom.scrollLeft(doc);\r\n        var viewHeight = docElem.clientHeight + geom.scrollTop(doc);\r\n        var offset = geom.pagePosition(ref);\r\n        var offsetLeft = offset.left;\r\n        var offsetTop = offset.top;\r\n\r\n        offsetTop += refHeight;\r\n\r\n        offsetLeft -=\r\n            Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n            Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\r\n\r\n        offsetTop -=\r\n            Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n            Math.abs(dpHeight + refHeight - extraY) : extraY));\r\n\r\n        return {\r\n            top: offsetTop,\r\n            bottom: offset.bottom,\r\n            left: offsetLeft,\r\n            right: offset.right,\r\n            width: offset.width,\r\n            height: offset.height\r\n        };\r\n    }\r\n\r\n    return popups.calcOffset = calcOffset;\r\n\t\t\r\n});"]}