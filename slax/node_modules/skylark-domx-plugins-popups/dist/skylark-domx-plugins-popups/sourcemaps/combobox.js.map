{"version":3,"sources":["combobox.js"],"names":["define","langx","browser","eventer","noder","geom","$","plugins","popups","Dropdown","ComboBox","Plugin","inherit","klassName","pluginName","options","autoResizeMenu","filterOnKeypress","showOptionsOnKeypress","filter","list","predicate","self","visible","$dropMenu","find","remove","each","i","$li","this","text","trim","removeClass","addClass","substr","length","append","_construct","elm","overrided","$element","$input","$button","plugin","$inputGroupBtn","on","proxy","itemclicked","inputchanged","menuShown","keypress","setDefaultSelection","children","val","_destroy","attr","outerHTML","doSelect","$item","$selectedItem","clearSelection","resizeMenu","width","outerWidth","selectedItem","data","txt","mixin","notFound","selectByText","textContent","innerText","toLowerCase","selectByValue","value","selector","selectBySelector","selectByIndex","index","item","removeData","removeAttr","enable","disable","e","target","parent","trigger","synthetic","preventDefault","focus","IS_NAVIGATIONAL","which","hasClass","toggle","selected","$selected","next","prev","previousKeyPress","extra","prototype","getValue","register"],"mappings":"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","file":"../combobox.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-browser\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-geom\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./popups\",\r\n  \"./dropdown\"\r\n],function(langx,browser,eventer,noder,geom,$,plugins,popups,Dropdown){\r\n\r\n\r\n\t// COMBOBOX CONSTRUCTOR AND PROTOTYPE\r\n\r\n\tvar ComboBox = plugins.Plugin.inherit({\r\n\t\tklassName: \"ComboBox\",\r\n\r\n\t\tpluginName : \"lark.popups.combobox\",\r\n\r\n\t\toptions : {\r\n\r\n\t\t\tautoResizeMenu: true,\r\n\t\t\tfilterOnKeypress: false,\r\n\t\t\tshowOptionsOnKeypress: false,\r\n\t\t\tfilter: function filter (list, predicate, self) {\r\n\t\t\t\tvar visible = 0;\r\n\t\t\t\tself.$dropMenu.find('.empty-indicator').remove();\r\n\r\n\t\t\t\tlist.each(function (i) {\r\n\t\t\t\t\tvar $li = $(this);\r\n\t\t\t\t\tvar text = $(this).text().trim();\r\n\r\n\t\t\t\t\t$li.removeClass();\r\n\r\n\t\t\t\t\tif (text === predicate) {\r\n\t\t\t\t\t\t$li.addClass('text-success');\r\n\t\t\t\t\t\tvisible++;\r\n\t\t\t\t\t} else if (text.substr(0, predicate.length) === predicate) {\r\n\t\t\t\t\t\t$li.addClass('text-info');\r\n\t\t\t\t\t\tvisible++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$li.addClass('hidden');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (visible === 0) {\r\n\t\t\t\t\tself.$dropMenu.append('<li class=\"empty-indicator text-muted\"><em>No Matches</em></li>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n    \t_construct : function(elm,options) {\r\n      \t\tthis.overrided(elm,options);\r\n      \t\tthis.$element = this.$();\r\n\r\n\t\t\tthis.$dropMenu = this.$element.find('.dropdown-menu');\r\n\t\t\tthis.$input = this.$element.find('input');\r\n\t\t\tthis.$button = this.$element.find('.btn');\r\n\t\t\tthis.$button.plugin(\"lark.popups.dropdown\");\r\n\t\t\tthis.$inputGroupBtn = this.$element.find('.input-group-btn');\r\n\r\n\t\t\tthis.$element.on('click.lark', 'a', langx.proxy(this.itemclicked, this));\r\n\t\t\tthis.$element.on('change.lark', 'input', langx.proxy(this.inputchanged, this));\r\n\t\t\tthis.$element.on('shown.bs.dropdown', langx.proxy(this.menuShown, this));\r\n\t\t\tthis.$input.on('keyup.lark', langx.proxy(this.keypress, this));\r\n\r\n\t\t\t// set default selection\r\n\t\t\tthis.setDefaultSelection();\r\n\r\n\t\t\t// if dropdown is empty, disable it\r\n\t\t\tvar items = this.$dropMenu.children('li');\r\n\t\t\tif( items.length === 0) {\r\n\t\t\t\tthis.$button.addClass('disabled');\r\n\t\t\t}\r\n\r\n\t\t\t// filter on load in case the first thing they do is press navigational key to pop open the menu\r\n\t\t\tif (this.options.filterOnKeypress) {\r\n\t\t\t\tthis.options.filter(this.$dropMenu.find('li'), this.$input.val(), this);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_destroy: function () {\r\n\t\t\tthis.$element.remove();\r\n\t\t\t// remove any external bindings\r\n\t\t\t// [none]\r\n\r\n\t\t\t// set input value attrbute in markup\r\n\t\t\tthis.$element.find('input').each(function () {\r\n\t\t\t\t$(this).attr('value', $(this).val());\r\n\t\t\t});\r\n\r\n\t\t\t// empty elements to return to original markup\r\n\t\t\t// [none]\r\n\r\n\t\t\treturn this.$element[0].outerHTML;\r\n\t\t},\r\n\r\n\t\tdoSelect: function ($item) {\r\n\r\n\t\t\tif (typeof $item[0] !== 'undefined') {\r\n\t\t\t\t// remove selection from old item, may result in remove and\r\n\t\t\t\t// re-addition of class if item is the same\r\n\t\t\t\tthis.$element.find('li.selected:first').removeClass('selected');\r\n\r\n\t\t\t\t// add selection to new item\r\n\t\t\t\tthis.$selectedItem = $item;\r\n\t\t\t\tthis.$selectedItem.addClass('selected');\r\n\r\n\t\t\t\t// update input\r\n\t\t\t\tthis.$input.val(this.$selectedItem.text().trim());\r\n\t\t\t} else {\r\n\t\t\t\t// this is a custom input, not in the menu\r\n\t\t\t\tthis.$selectedItem = null;\r\n\t\t\t\tthis.$element.find('li.selected:first').removeClass('selected');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclearSelection: function () {\r\n\t\t\tthis.$selectedItem = null;\r\n\t\t\tthis.$input.val('');\r\n\t\t\tthis.$dropMenu.find('li').removeClass('selected');\r\n\t\t},\r\n\r\n\t\tmenuShown: function () {\r\n\t\t\tif (this.options.autoResizeMenu) {\r\n\t\t\t\tthis.resizeMenu();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tresizeMenu: function () {\r\n\t\t\tvar width = this.$element.outerWidth();\r\n\t\t\tthis.$dropMenu.outerWidth(width);\r\n\t\t},\r\n\r\n\t\tselectedItem: function () {\r\n\t\t\tvar item = this.$selectedItem;\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\tvar txt = this.$selectedItem.text().trim();\r\n\t\t\t\tdata = langx.mixin({\r\n\t\t\t\t\ttext: txt\r\n\t\t\t\t}, this.$selectedItem.data());\r\n\t\t\t} else {\r\n\t\t\t\tdata = {\r\n\t\t\t\t\ttext: this.$input.val().trim(),\r\n\t\t\t\t\tnotFound: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\tselectByText: function (text) {\r\n\t\t\tvar $item = $([]);\r\n\t\t\tthis.$element.find('li').each(function () {\r\n\t\t\t\tif ((this.textContent || this.innerText || $(this).text() || '').trim().toLowerCase() === (text || '').trim().toLowerCase()) {\r\n\t\t\t\t\t$item = $(this);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.doSelect($item);\r\n\t\t},\r\n\r\n\t\tselectByValue: function (value) {\r\n\t\t\tvar selector = 'li[data-value=\"' + value + '\"]';\r\n\t\t\tthis.selectBySelector(selector);\r\n\t\t},\r\n\r\n\t\tselectByIndex: function (index) {\r\n\t\t\t// zero-based index\r\n\t\t\tvar selector = 'li:eq(' + index + ')';\r\n\t\t\tthis.selectBySelector(selector);\r\n\t\t},\r\n\r\n\t\tselectBySelector: function (selector) {\r\n\t\t\tvar $item = this.$element.find(selector);\r\n\t\t\tthis.doSelect($item);\r\n\t\t},\r\n\r\n\t\tsetDefaultSelection: function () {\r\n\t\t\tvar selector = 'li[data-selected=true]:first';\r\n\t\t\tvar item = this.$element.find(selector);\r\n\r\n\t\t\tif (item.length > 0) {\r\n\t\t\t\t// select by data-attribute\r\n\t\t\t\tthis.selectBySelector(selector);\r\n\t\t\t\titem.removeData('selected');\r\n\t\t\t\titem.removeAttr('data-selected');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tenable: function () {\r\n\t\t\tthis.$element.removeClass('disabled');\r\n\t\t\tthis.$input.removeAttr('disabled');\r\n\t\t\tthis.$button.removeClass('disabled');\r\n\t\t},\r\n\r\n\t\tdisable: function () {\r\n\t\t\tthis.$element.addClass('disabled');\r\n\t\t\tthis.$input.attr('disabled', true);\r\n\t\t\tthis.$button.addClass('disabled');\r\n\t\t},\r\n\r\n\t\titemclicked: function (e) {\r\n\t\t\tthis.$selectedItem = $(e.target).parent();\r\n\r\n\t\t\t// set input text and trigger input change event marked as synthetic\r\n\t\t\tthis.$input.val(this.$selectedItem.text().trim()).trigger('change', {\r\n\t\t\t\tsynthetic: true\r\n\t\t\t});\r\n\r\n\t\t\t// pass object including text and any data-attributes\r\n\t\t\t// to onchange event\r\n\t\t\tvar data = this.selectedItem();\r\n\r\n\t\t\t// trigger changed event\r\n\t\t\tthis.$element.trigger('changed.lark', data);\r\n\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t// return focus to control after selecting an option\r\n\t\t\tthis.$element.find('.dropdown-toggle').focus();\r\n\t\t},\r\n\r\n\t\tkeypress: function (e) {\r\n\t\t\tvar ENTER = 13;\r\n\t\t\t//var TAB = 9;\r\n\t\t\tvar ESC = 27;\r\n\t\t\tvar LEFT = 37;\r\n\t\t\tvar UP = 38;\r\n\t\t\tvar RIGHT = 39;\r\n\t\t\tvar DOWN = 40;\r\n\r\n\t\t\tvar IS_NAVIGATIONAL = (\r\n\t\t\t\te.which === UP ||\r\n\t\t\t\te.which === DOWN ||\r\n\t\t\t\te.which === LEFT ||\r\n\t\t\t\te.which === RIGHT\r\n\t\t\t);\r\n\r\n\t\t\tif(this.options.showOptionsOnKeypress && !this.$inputGroupBtn.hasClass('open')){\r\n\t\t\t\tthis.$button.plugin(\"lark.popups.dropdown\").toggle();\r\n\t\t\t\tthis.$input.focus();\r\n\t\t\t}\r\n\r\n\t\t\tif (e.which === ENTER) {\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tvar selected = this.$dropMenu.find('li.selected').text().trim();\r\n\t\t\t\tif(selected.length > 0){\r\n\t\t\t\t\tthis.selectByText(selected);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.selectByText(this.$input.val());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$inputGroupBtn.removeClass('open');\r\n\t\t\t} else if (e.which === ESC) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.clearSelection();\r\n\t\t\t\tthis.$inputGroupBtn.removeClass('open');\r\n\t\t\t} else if (this.options.showOptionsOnKeypress) {\r\n\t\t\t\tif (e.which === DOWN || e.which === UP) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tvar $selected = this.$dropMenu.find('li.selected');\r\n\t\t\t\t\tif ($selected.length > 0) {\r\n\t\t\t\t\t\tif (e.which === DOWN) {\r\n\t\t\t\t\t\t\t$selected = $selected.next(':not(.hidden)');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$selected = $selected.prev(':not(.hidden)');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($selected.length === 0){\r\n\t\t\t\t\t\tif (e.which === DOWN) {\r\n\t\t\t\t\t\t\t$selected = this.$dropMenu.find('li:not(.hidden):first');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$selected = this.$dropMenu.find('li:not(.hidden):last');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.doSelect($selected);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Avoid filtering on navigation key presses\r\n\t\t\tif (this.options.filterOnKeypress && !IS_NAVIGATIONAL) {\r\n\t\t\t\tthis.options.filter(this.$dropMenu.find('li'), this.$input.val(), this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.previousKeyPress = e.which;\r\n\t\t},\r\n\r\n\t\tinputchanged: function (e, extra) {\r\n\t\t\tvar val = $(e.target).val();\r\n\t\t\t// skip processing for internally-generated synthetic event\r\n\t\t\t// to avoid double processing\r\n\t\t\tif (extra && extra.synthetic) {\r\n\t\t\t\tthis.selectByText(val);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.selectByText(val);\r\n\r\n\t\t\t// find match based on input\r\n\t\t\t// if no match, pass the input value\r\n\t\t\tvar data = this.selectedItem();\r\n\t\t\tif (data.text.length === 0) {\r\n\t\t\t\tdata = {\r\n\t\t\t\t\ttext: val\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// trigger changed event\r\n\t\t\tthis.$element.trigger('changed.lark', data);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\r\n\tComboBox.prototype.getValue = ComboBox.prototype.selectedItem;\r\n\r\n    plugins.register(ComboBox);\r\n\r\n\treturn popups.ComboBox = ComboBox;\r\n});\r\n"]}