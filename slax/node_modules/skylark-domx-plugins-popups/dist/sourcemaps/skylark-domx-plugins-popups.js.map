{"version":3,"sources":["skylark-domx-plugins-popups.js"],"names":["define","skylark","geom","$","plugins","stack","popups","around","ref","dpSize","size","popup","dpWidth","width","dpHeight","height","refHeight","doc","ownerDocument","docElem","documentElement","viewWidth","clientWidth","scrollLeft","viewHeight","clientHeight","scrollTop","offset","pagePosition","offsetLeft","left","offsetTop","top","Math","min","abs","bottom","right","open","options","$popup","show","removeAttr","position","push","close","count","i","length","pop","hide","attr","calcOffset","langx","browser","eventer","noder","backdrop","toggle","Dropdown","Plugin","inherit","klassName","pluginName","selectors","toggler","_construct","elm","this","overrided","$el","$element","_elm","on","keydown","e","$this","is","$parent","getParent","isActive","hasClass","clearMenus","document","closest","createElement","addClass","insertAfter","relatedTarget","trigger","create","isDefaultPrevented","toggleClass","test","which","target","tagName","preventDefault","stopPropagation","find","$items","index","eq","selector","replace","parent","remove","each","type","contains","removeClass","register","ComboBox","autoResizeMenu","filterOnKeypress","showOptionsOnKeypress","filter","list","predicate","self","visible","$dropMenu","$li","text","trim","substr","append","$input","$button","plugin","$inputGroupBtn","proxy","itemclicked","inputchanged","menuShown","keypress","setDefaultSelection","items","children","val","_destroy","outerHTML","doSelect","$item","$selectedItem","clearSelection","resizeMenu","outerWidth","selectedItem","item","data","txt","mixin","notFound","selectByText","textContent","innerText","toLowerCase","selectByValue","value","selectBySelector","selectByIndex","removeData","enable","disable","synthetic","focus","IS_NAVIGATIONAL","selected","$selected","next","prev","previousKeyPress","extra","prototype","getValue","SelectList","emptyLabelHTML","$hiddenField","$label","$dropdownMenu","itemClicked","resize","key","String","fromCharCode","idx","charAt","off","html","currentTarget","itemChanged","newWidth","sizer","Boolean","body","clone","css","has","main"],"mappings":"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","file":"../skylark-domx-plugins-popups.js","sourcesContent":["define('skylark-domx-plugins-popups/popups',[\r\n\t\"skylark-langx-ns\",\r\n\t\"skylark-domx-geom\",\r\n\t\"skylark-domx-query\",\r\n    \"skylark-domx-plugins-base/plugins\"\r\n],function(skylark,geom,$,plugins){\r\n\r\n\tvar stack = [];\r\n\r\n\r\n\r\n    /**\r\n    * get the offset below/above and left/right element depending on screen position\r\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n    */\r\n    function around(ref) {\r\n        var extraY = 0;\r\n        var dpSize = geom.size(popup);\r\n        var dpWidth = dpSize.width;\r\n        var dpHeight = dpSize.height;\r\n        var refHeight = geom.height(ref);\r\n        var doc = ref.ownerDocument;\r\n        var docElem = doc.documentElement;\r\n        var viewWidth = docElem.clientWidth + geom.scrollLeft(doc);\r\n        var viewHeight = docElem.clientHeight + geom.scrollTop(doc);\r\n        var offset = geom.pagePosition(ref);\r\n        var offsetLeft = offset.left;\r\n        var offsetTop = offset.top;\r\n\r\n        offsetTop += refHeight;\r\n\r\n        offsetLeft -=\r\n            Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n            Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\r\n\r\n        offsetTop -=\r\n            Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n            Math.abs(dpHeight + refHeight - extraY) : extraY));\r\n\r\n        return {\r\n            top: offsetTop,\r\n            bottom: offset.bottom,\r\n            left: offsetLeft,\r\n            right: offset.right,\r\n            width: offset.width,\r\n            height: offset.height\r\n        };\r\n    }\r\n\r\n\r\n\t/*\r\n\t * Popup the ui elment at the specified position\r\n\t * @param popup  element to display\r\n\t * @param options\r\n\t *  - around {HtmlEleent}\r\n\t *  - at {x,y}\r\n\t *  - parent {}\r\n\t */\r\n\r\n\tfunction open(popup,options) {\r\n\t\tif (options.around) {\r\n\t\t\t//A DOM node that should be used as a reference point for placing the pop-up. \r\n\t\t}\r\n\r\n\t\tlet $popup = $(popup);\r\n\r\n\t\t$popup.show()\r\n\t\t\t  .removeAttr( \"aria-hidden\" )\r\n   \t\t\t  .position( options.position );\r\n\r\n   \t\tstack.push({\r\n   \t\t\tpopup : $popup[0]\r\n   \t\t})\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Close specified popup and any popups that it parented.\r\n\t * If no popup is specified, closes all popups.\r\n     */\r\n\tfunction close(popup) {\r\n\t\tvar count = 0;\r\n\r\n\t\tif (popup) {\r\n\t\t\tpopup = $(popup)[0];\r\n\t\t\tfor (var i= stack.length-1; i>=0; i--) {\r\n\t\t\t\tif (stack[i].popup == popup) {\r\n\t\t\t\t\tcount = stack.length - i; \r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcount = stack.length;\r\n\t\t}\r\n\t\tfor (var i=0; i<count ; i++ ) {\r\n\t\t\tvar top = stack.pop(),\r\n\t\t\t\t$popup = $(top.popup);\r\n\t\t\t$popup.hide()\r\n\t\t\t\t.attr( \"aria-hidden\", \"true\" );\r\n\t\t} \r\n\t}\r\n\treturn plugins.popups = {\r\n\t\taround,\r\n\t\topen,\r\n\t\tclose\r\n\t};\r\n});\ndefine('skylark-domx-plugins-popups/calc-offset',[\r\n\t\"skylark-domx-geom\",\r\n\t\"./popups\"\r\n],function(\r\n\tgeom,\r\n\tpopups\r\n){\r\n    /**\r\n    * checkOffset - get the offset below/above and left/right element depending on screen position\r\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n    */\r\n    function calcOffset(popup, ref) {\r\n        var extraY = 0;\r\n        var dpSize = geom.size(popup);\r\n        var dpWidth = dpSize.width;\r\n        var dpHeight = dpSize.height;\r\n        var refHeight = geom.height(ref);\r\n        var doc = popup.ownerDocument;\r\n        var docElem = doc.documentElement;\r\n        var viewWidth = docElem.clientWidth + geom.scrollLeft(doc);\r\n        var viewHeight = docElem.clientHeight + geom.scrollTop(doc);\r\n        var offset = geom.pagePosition(ref);\r\n        var offsetLeft = offset.left;\r\n        var offsetTop = offset.top;\r\n\r\n        offsetTop += refHeight;\r\n\r\n        offsetLeft -=\r\n            Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n            Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\r\n\r\n        offsetTop -=\r\n            Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n            Math.abs(dpHeight + refHeight - extraY) : extraY));\r\n\r\n        return {\r\n            top: offsetTop,\r\n            bottom: offset.bottom,\r\n            left: offsetLeft,\r\n            right: offset.right,\r\n            width: offset.width,\r\n            height: offset.height\r\n        };\r\n    }\r\n\r\n    return popups.calcOffset = calcOffset;\r\n\t\t\r\n});\ndefine('skylark-domx-plugins-popups/dropdown',[\n  \"skylark-langx/langx\",\n  \"skylark-domx-browser\",\n  \"skylark-domx-eventer\",\n  \"skylark-domx-noder\",\n  \"skylark-domx-geom\",\n  \"skylark-domx-query\",\n  \"skylark-domx-plugins-base\",\n  \"./popups\"\n],function(langx,browser,eventer,noder,geom,$,plugins,popups){\n\n  'use strict';\n\n  // DROPDOWN CLASS DEFINITION\n  // =========================\n\n  var backdrop = '.dropdown-backdrop';\n  var toggle   = '[data-toggle=\"dropdown\"]';\n\n  var Dropdown = plugins.Plugin.inherit({\n    klassName: \"Dropdown\",\n\n    pluginName : \"lark.popups.dropdown\",\n\n    options : {\n      \"selectors\" : {\n        \"toggler\" : '[data-toggle=\"dropdown\"],.dropdown-menu'\n      }\n\n    },\n\n    _construct : function(elm,options) {\n      this.overrided(elm,options);\n\n      var $el = this.$element = $(this._elm);\n      $el.on('click.dropdown', this.toggle);\n      $el.on('keydown.dropdown', this.options.selectors.toggler,this.keydown);\n    },\n\n    toggle : function (e) {\n      var $this = $(this)\n\n      if ($this.is('.disabled, :disabled')) {\n        return;\n      }\n\n      var $parent  = getParent($this)\n      var isActive = $parent.hasClass('open');\n\n      clearMenus()\n\n      if (!isActive) {\n        if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\n          // if mobile we use a backdrop because click events don't delegate\n          $(document.createElement('div'))\n            .addClass('dropdown-backdrop')\n            .insertAfter($(this))\n            .on('click', clearMenus)\n        }\n\n        var relatedTarget = { relatedTarget: this }\n        $parent.trigger(e = eventer.create('show.dropdown', relatedTarget))\n\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n\n        $this\n          .trigger('focus')\n          .attr('aria-expanded', 'true')\n\n        $parent\n          .toggleClass('open')\n          .trigger(eventer.create('shown.dropdown', relatedTarget))\n      }\n\n      return false\n    },\n\n    keydown : function (e) {\n      if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) {\n        return;\n      }\n\n      var $this = $(this);\n\n      e.preventDefault()\n      e.stopPropagation()\n\n      if ($this.is('.disabled, :disabled')) {\n        return;\n      }\n\n      var $parent  = getParent($this)\n      var isActive = $parent.hasClass('open')\n\n      if (!isActive && e.which != 27 || isActive && e.which == 27) {\n        if (e.which == 27) $parent.find(toggle).trigger('focus')\n        return $this.trigger('click')\n      }\n\n      var desc = ' li:not(.disabled):visible a'\n      var $items = $parent.find('.dropdown-menu' + desc)\n\n      if (!$items.length) return\n\n      var index = $items.index(e.target)\n\n      if (e.which == 38 && index > 0)                 index--         // up\n      if (e.which == 40 && index < $items.length - 1) index++         // down\n      if (!~index)                                    index = 0\n\n      $items.eq(index).trigger('focus');\n    }\n\n  });\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = selector && $(selector);\n\n    return $parent && $parent.length ? $parent : $this.parent();\n  }\n\n  function clearMenus(e) {\n    if (e && e.which === 3) return\n    $(backdrop).remove()\n    $(toggle).each(function () {\n      var $this         = $(this)\n      var $parent       = getParent($this)\n      var relatedTarget = { relatedTarget: this }\n\n      if (!$parent.hasClass('open')) return\n\n      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && noder.contains($parent[0], e.target)) return\n\n      $parent.trigger(e = eventer.create('hide.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this.attr('aria-expanded', 'false')\n      $parent.removeClass('open').trigger(eventer.create('hidden.dropdown', relatedTarget))\n    })\n  }\n\n\n\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\n  // ===================================\n  $(document)\n    .on('click.dropdown.data-api', clearMenus)\n    .on('click.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() });\n\n  plugins.register(Dropdown);\n\n  return popups.Dropdown = Dropdown;\n\n});\n\ndefine('skylark-domx-plugins-popups/comboBox',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-browser\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-geom\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./popups\",\r\n  \"./dropdown\"\r\n],function(langx,browser,eventer,noder,geom,$,plugins,popups,Dropdown){\r\n\r\n\r\n\t// COMBOBOX CONSTRUCTOR AND PROTOTYPE\r\n\r\n\tvar ComboBox = plugins.Plugin.inherit({\r\n\t\tklassName: \"ComboBox\",\r\n\r\n\t\tpluginName : \"lark.popups.combobox\",\r\n\r\n\t\toptions : {\r\n\r\n\t\t\tautoResizeMenu: true,\r\n\t\t\tfilterOnKeypress: false,\r\n\t\t\tshowOptionsOnKeypress: false,\r\n\t\t\tfilter: function filter (list, predicate, self) {\r\n\t\t\t\tvar visible = 0;\r\n\t\t\t\tself.$dropMenu.find('.empty-indicator').remove();\r\n\r\n\t\t\t\tlist.each(function (i) {\r\n\t\t\t\t\tvar $li = $(this);\r\n\t\t\t\t\tvar text = $(this).text().trim();\r\n\r\n\t\t\t\t\t$li.removeClass();\r\n\r\n\t\t\t\t\tif (text === predicate) {\r\n\t\t\t\t\t\t$li.addClass('text-success');\r\n\t\t\t\t\t\tvisible++;\r\n\t\t\t\t\t} else if (text.substr(0, predicate.length) === predicate) {\r\n\t\t\t\t\t\t$li.addClass('text-info');\r\n\t\t\t\t\t\tvisible++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$li.addClass('hidden');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (visible === 0) {\r\n\t\t\t\t\tself.$dropMenu.append('<li class=\"empty-indicator text-muted\"><em>No Matches</em></li>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n    \t_construct : function(elm,options) {\r\n      \t\tthis.overrided(elm,options);\r\n      \t\tthis.$element = this.$();\r\n\r\n\t\t\tthis.$dropMenu = this.$element.find('.dropdown-menu');\r\n\t\t\tthis.$input = this.$element.find('input');\r\n\t\t\tthis.$button = this.$element.find('.btn');\r\n\t\t\tthis.$button.plugin(\"lark.popups.dropdown\");\r\n\t\t\tthis.$inputGroupBtn = this.$element.find('.input-group-btn');\r\n\r\n\t\t\tthis.$element.on('click.lark', 'a', langx.proxy(this.itemclicked, this));\r\n\t\t\tthis.$element.on('change.lark', 'input', langx.proxy(this.inputchanged, this));\r\n\t\t\tthis.$element.on('shown.bs.dropdown', langx.proxy(this.menuShown, this));\r\n\t\t\tthis.$input.on('keyup.lark', langx.proxy(this.keypress, this));\r\n\r\n\t\t\t// set default selection\r\n\t\t\tthis.setDefaultSelection();\r\n\r\n\t\t\t// if dropdown is empty, disable it\r\n\t\t\tvar items = this.$dropMenu.children('li');\r\n\t\t\tif( items.length === 0) {\r\n\t\t\t\tthis.$button.addClass('disabled');\r\n\t\t\t}\r\n\r\n\t\t\t// filter on load in case the first thing they do is press navigational key to pop open the menu\r\n\t\t\tif (this.options.filterOnKeypress) {\r\n\t\t\t\tthis.options.filter(this.$dropMenu.find('li'), this.$input.val(), this);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_destroy: function () {\r\n\t\t\tthis.$element.remove();\r\n\t\t\t// remove any external bindings\r\n\t\t\t// [none]\r\n\r\n\t\t\t// set input value attrbute in markup\r\n\t\t\tthis.$element.find('input').each(function () {\r\n\t\t\t\t$(this).attr('value', $(this).val());\r\n\t\t\t});\r\n\r\n\t\t\t// empty elements to return to original markup\r\n\t\t\t// [none]\r\n\r\n\t\t\treturn this.$element[0].outerHTML;\r\n\t\t},\r\n\r\n\t\tdoSelect: function ($item) {\r\n\r\n\t\t\tif (typeof $item[0] !== 'undefined') {\r\n\t\t\t\t// remove selection from old item, may result in remove and\r\n\t\t\t\t// re-addition of class if item is the same\r\n\t\t\t\tthis.$element.find('li.selected:first').removeClass('selected');\r\n\r\n\t\t\t\t// add selection to new item\r\n\t\t\t\tthis.$selectedItem = $item;\r\n\t\t\t\tthis.$selectedItem.addClass('selected');\r\n\r\n\t\t\t\t// update input\r\n\t\t\t\tthis.$input.val(this.$selectedItem.text().trim());\r\n\t\t\t} else {\r\n\t\t\t\t// this is a custom input, not in the menu\r\n\t\t\t\tthis.$selectedItem = null;\r\n\t\t\t\tthis.$element.find('li.selected:first').removeClass('selected');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclearSelection: function () {\r\n\t\t\tthis.$selectedItem = null;\r\n\t\t\tthis.$input.val('');\r\n\t\t\tthis.$dropMenu.find('li').removeClass('selected');\r\n\t\t},\r\n\r\n\t\tmenuShown: function () {\r\n\t\t\tif (this.options.autoResizeMenu) {\r\n\t\t\t\tthis.resizeMenu();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tresizeMenu: function () {\r\n\t\t\tvar width = this.$element.outerWidth();\r\n\t\t\tthis.$dropMenu.outerWidth(width);\r\n\t\t},\r\n\r\n\t\tselectedItem: function () {\r\n\t\t\tvar item = this.$selectedItem;\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\tvar txt = this.$selectedItem.text().trim();\r\n\t\t\t\tdata = langx.mixin({\r\n\t\t\t\t\ttext: txt\r\n\t\t\t\t}, this.$selectedItem.data());\r\n\t\t\t} else {\r\n\t\t\t\tdata = {\r\n\t\t\t\t\ttext: this.$input.val().trim(),\r\n\t\t\t\t\tnotFound: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\tselectByText: function (text) {\r\n\t\t\tvar $item = $([]);\r\n\t\t\tthis.$element.find('li').each(function () {\r\n\t\t\t\tif ((this.textContent || this.innerText || $(this).text() || '').trim().toLowerCase() === (text || '').trim().toLowerCase()) {\r\n\t\t\t\t\t$item = $(this);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.doSelect($item);\r\n\t\t},\r\n\r\n\t\tselectByValue: function (value) {\r\n\t\t\tvar selector = 'li[data-value=\"' + value + '\"]';\r\n\t\t\tthis.selectBySelector(selector);\r\n\t\t},\r\n\r\n\t\tselectByIndex: function (index) {\r\n\t\t\t// zero-based index\r\n\t\t\tvar selector = 'li:eq(' + index + ')';\r\n\t\t\tthis.selectBySelector(selector);\r\n\t\t},\r\n\r\n\t\tselectBySelector: function (selector) {\r\n\t\t\tvar $item = this.$element.find(selector);\r\n\t\t\tthis.doSelect($item);\r\n\t\t},\r\n\r\n\t\tsetDefaultSelection: function () {\r\n\t\t\tvar selector = 'li[data-selected=true]:first';\r\n\t\t\tvar item = this.$element.find(selector);\r\n\r\n\t\t\tif (item.length > 0) {\r\n\t\t\t\t// select by data-attribute\r\n\t\t\t\tthis.selectBySelector(selector);\r\n\t\t\t\titem.removeData('selected');\r\n\t\t\t\titem.removeAttr('data-selected');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tenable: function () {\r\n\t\t\tthis.$element.removeClass('disabled');\r\n\t\t\tthis.$input.removeAttr('disabled');\r\n\t\t\tthis.$button.removeClass('disabled');\r\n\t\t},\r\n\r\n\t\tdisable: function () {\r\n\t\t\tthis.$element.addClass('disabled');\r\n\t\t\tthis.$input.attr('disabled', true);\r\n\t\t\tthis.$button.addClass('disabled');\r\n\t\t},\r\n\r\n\t\titemclicked: function (e) {\r\n\t\t\tthis.$selectedItem = $(e.target).parent();\r\n\r\n\t\t\t// set input text and trigger input change event marked as synthetic\r\n\t\t\tthis.$input.val(this.$selectedItem.text().trim()).trigger('change', {\r\n\t\t\t\tsynthetic: true\r\n\t\t\t});\r\n\r\n\t\t\t// pass object including text and any data-attributes\r\n\t\t\t// to onchange event\r\n\t\t\tvar data = this.selectedItem();\r\n\r\n\t\t\t// trigger changed event\r\n\t\t\tthis.$element.trigger('changed.lark', data);\r\n\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t// return focus to control after selecting an option\r\n\t\t\tthis.$element.find('.dropdown-toggle').focus();\r\n\t\t},\r\n\r\n\t\tkeypress: function (e) {\r\n\t\t\tvar ENTER = 13;\r\n\t\t\t//var TAB = 9;\r\n\t\t\tvar ESC = 27;\r\n\t\t\tvar LEFT = 37;\r\n\t\t\tvar UP = 38;\r\n\t\t\tvar RIGHT = 39;\r\n\t\t\tvar DOWN = 40;\r\n\r\n\t\t\tvar IS_NAVIGATIONAL = (\r\n\t\t\t\te.which === UP ||\r\n\t\t\t\te.which === DOWN ||\r\n\t\t\t\te.which === LEFT ||\r\n\t\t\t\te.which === RIGHT\r\n\t\t\t);\r\n\r\n\t\t\tif(this.options.showOptionsOnKeypress && !this.$inputGroupBtn.hasClass('open')){\r\n\t\t\t\tthis.$button.plugin(\"lark.popups.dropdown\").toggle();\r\n\t\t\t\tthis.$input.focus();\r\n\t\t\t}\r\n\r\n\t\t\tif (e.which === ENTER) {\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tvar selected = this.$dropMenu.find('li.selected').text().trim();\r\n\t\t\t\tif(selected.length > 0){\r\n\t\t\t\t\tthis.selectByText(selected);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.selectByText(this.$input.val());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$inputGroupBtn.removeClass('open');\r\n\t\t\t} else if (e.which === ESC) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.clearSelection();\r\n\t\t\t\tthis.$inputGroupBtn.removeClass('open');\r\n\t\t\t} else if (this.options.showOptionsOnKeypress) {\r\n\t\t\t\tif (e.which === DOWN || e.which === UP) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tvar $selected = this.$dropMenu.find('li.selected');\r\n\t\t\t\t\tif ($selected.length > 0) {\r\n\t\t\t\t\t\tif (e.which === DOWN) {\r\n\t\t\t\t\t\t\t$selected = $selected.next(':not(.hidden)');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$selected = $selected.prev(':not(.hidden)');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($selected.length === 0){\r\n\t\t\t\t\t\tif (e.which === DOWN) {\r\n\t\t\t\t\t\t\t$selected = this.$dropMenu.find('li:not(.hidden):first');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$selected = this.$dropMenu.find('li:not(.hidden):last');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.doSelect($selected);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Avoid filtering on navigation key presses\r\n\t\t\tif (this.options.filterOnKeypress && !IS_NAVIGATIONAL) {\r\n\t\t\t\tthis.options.filter(this.$dropMenu.find('li'), this.$input.val(), this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.previousKeyPress = e.which;\r\n\t\t},\r\n\r\n\t\tinputchanged: function (e, extra) {\r\n\t\t\tvar val = $(e.target).val();\r\n\t\t\t// skip processing for internally-generated synthetic event\r\n\t\t\t// to avoid double processing\r\n\t\t\tif (extra && extra.synthetic) {\r\n\t\t\t\tthis.selectByText(val);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.selectByText(val);\r\n\r\n\t\t\t// find match based on input\r\n\t\t\t// if no match, pass the input value\r\n\t\t\tvar data = this.selectedItem();\r\n\t\t\tif (data.text.length === 0) {\r\n\t\t\t\tdata = {\r\n\t\t\t\t\ttext: val\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// trigger changed event\r\n\t\t\tthis.$element.trigger('changed.lark', data);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\r\n\tComboBox.prototype.getValue = ComboBox.prototype.selectedItem;\r\n\r\n    plugins.register(ComboBox);\r\n\r\n\treturn popups.ComboBox = ComboBox;\r\n});\r\n\ndefine('skylark-domx-plugins-popups/select-list',[\n  \"skylark-langx/langx\",\n  \"skylark-domx-browser\",\n  \"skylark-domx-eventer\",\n  \"skylark-domx-noder\",\n  \"skylark-domx-geom\",\n  \"skylark-domx-query\",\n  \"skylark-domx-plugins-base\",\n  \"./popups\",\n  \"./dropdown\"\n],function(langx,browser,eventer,noder,geom,$,plugins,popups,Dropdown){\n\n\n\t// SELECT CONSTRUCTOR AND PROTOTYPE\n\n\tvar SelectList = plugins.Plugin.inherit({\n\t\tklassName: \"SelectList\",\n\n\t\tpluginName : \"lark.popups.selectlist\",\n\t\n\t\toptions : {\n\t\t\temptyLabelHTML: '<li data-value=\"\"><a href=\"#\">No items</a></li>'\n\n\t\t},\n\n    \t_construct : function(elm,options) {\n      \t\tthis.overrided(elm,options);\n      \t\tthis.$element = this.$();\n\t\t\t//this.options = langx.mixin({}, $.fn.selectlist.defaults, options);\n\n\n\t\t\tthis.$button = this.$element.find('.btn.dropdown-toggle');\n\t\t\tthis.$hiddenField = this.$element.find('.hidden-field');\n\t\t\tthis.$label = this.$element.find('.selected-label');\n\t\t\tthis.$dropdownMenu = this.$element.find('.dropdown-menu');\n\n\t\t\tthis.$button.plugin(\"lark.popups.dropdown\");\n\n\t\t\tthis.$element.on('click.selectlist', '.dropdown-menu a', langx.proxy(this.itemClicked, this));\n\t\t\tthis.setDefaultSelection();\n\n\t\t\tif (this.options.resize === 'auto' || this.$element.attr('data-resize') === 'auto') {\n\t\t\t\tthis.resize();\n\t\t\t}\n\n\t\t\t// if selectlist is empty or is one item, disable it\n\t\t\tvar items = this.$dropdownMenu.children('li');\n\t\t\tif( items.length === 0) {\n\t\t\t\tthis.disable();\n\t\t\t\tthis.doSelect( $(this.options.emptyLabelHTML));\n\t\t\t}\n\n\t\t\t// support jumping focus to first letter in dropdown when key is pressed\n\t\t\tthis.$element.on('shown.dropdown', function () {\n\t\t\t\t\tvar $this = $(this);\n\t\t\t\t\t// attach key listener when dropdown is shown\n\t\t\t\t\t$(document).on('keypress.selectlist', function(e){\n\n\t\t\t\t\t\t// get the key that was pressed\n\t\t\t\t\t\tvar key = String.fromCharCode(e.which);\n\t\t\t\t\t\t// look the items to find the first item with the first character match and set focus\n\t\t\t\t\t\t$this.find(\"li\").each(function(idx,item){\n\t\t\t\t\t\t\tif ($(item).text().charAt(0).toLowerCase() === key) {\n\t\t\t\t\t\t\t\t$(item).children('a').focus();\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// unbind key event when dropdown is hidden\n\t\t\tthis.$element.on('hide.dropdown', function () {\n\t\t\t\t\t$(document).off('keypress.selectlist');\n\t\t\t});\n\t\t},\n\n\t\t_destroy: function () {\n\t\t\tthis.$element.remove();\n\t\t\t// any external bindings\n\t\t\t// [none]\n\t\t\t// empty elements to return to original markup\n\t\t\t// [none]\n\t\t\t// returns string of markup\n\t\t\treturn this.$element[0].outerHTML;\n\t\t},\n\n\t\tdoSelect: function ($item) {\n\t\t\tvar $selectedItem;\n\t\t\tthis.$selectedItem = $selectedItem = $item;\n\n\t\t\tthis.$hiddenField.val(this.$selectedItem.attr('data-value'));\n\t\t\tthis.$label.html($(this.$selectedItem.children()[0]).html());\n\n\t\t\t// clear and set selected item to allow declarative init state\n\t\t\t// unlike other controls, selectlist's value is stored internal, not in an input\n\t\t\tthis.$element.find('li').each(function () {\n\t\t\t\tif ($selectedItem.is($(this))) {\n\t\t\t\t\t$(this).attr('data-selected', true);\n\t\t\t\t} else {\n\t\t\t\t\t$(this).removeData('selected').removeAttr('data-selected');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\titemClicked: function (e) {\n\t\t\tthis.$element.trigger('clicked.selectlist', this.$selectedItem);\n\n\t\t\te.preventDefault();\n\t\t\t// ignore if a disabled item is clicked\n\t\t\tif ($(e.currentTarget).parent('li').is('.disabled, :disabled')) { return; }\n\n\t\t\t// is clicked element different from currently selected element?\n\t\t\tif (!($(e.target).parent().is(this.$selectedItem))) {\n\t\t\t\tthis.itemChanged(e);\n\t\t\t}\n\n\t\t\t// return focus to control after selecting an option\n\t\t\tthis.$element.find('.dropdown-toggle').focus();\n\t\t},\n\n\t\titemChanged: function (e) {\n\t\t\t//selectedItem needs to be <li> since the data is stored there, not in <a>\n\t\t\tthis.doSelect($(e.target).closest('li'));\n\n\t\t\t// pass object including text and any data-attributes\n\t\t\t// to onchange event\n\t\t\tvar data = this.selectedItem();\n\t\t\t// trigger changed event\n\t\t\tthis.$element.trigger('changed.selectlist', data);\n\t\t},\n\n\t\tresize: function () {\n\t\t\tvar width = 0;\n\t\t\tvar newWidth = 0;\n\t\t\tvar sizer = $('<div/>').addClass('selectlist-sizer');\n\n\n\t\t\tif (Boolean($(document).find('html').hasClass('fuelux'))) {\n\t\t\t\t// default behavior for fuel ux setup. means fuelux was a class on the html tag\n\t\t\t\t$(document.body).append(sizer);\n\t\t\t} else {\n\t\t\t\t// fuelux is not a class on the html tag. So we'll look for the first one we find so the correct styles get applied to the sizer\n\t\t\t\t$('.fuelux:first').append(sizer);\n\t\t\t}\n\n\t\t\tsizer.append(this.$element.clone());\n\n\t\t\tthis.$element.find('a').each(function () {\n\t\t\t\tsizer.find('.selected-label').text($(this).text());\n\t\t\t\tnewWidth = sizer.find('.selectlist').outerWidth();\n\t\t\t\tnewWidth = newWidth + sizer.find('.sr-only').outerWidth();\n\t\t\t\tif (newWidth > width) {\n\t\t\t\t\twidth = newWidth;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (width <= 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$button.css('width', width);\n\t\t\tthis.$dropdownMenu.css('width', width);\n\n\t\t\tsizer.remove();\n\t\t},\n\n\t\tselectedItem: function () {\n\t\t\tvar txt = this.$selectedItem.text();\n\t\t\treturn langx.mixin({\n\t\t\t\ttext: txt\n\t\t\t}, this.$selectedItem.data());\n\t\t},\n\n\t\tselectByText: function (text) {\n\t\t\tvar $item = $([]);\n\t\t\tthis.$element.find('li').each(function () {\n\t\t\t\tif ((this.textContent || this.innerText || $(this).text() || '').toLowerCase() === (text || '').toLowerCase()) {\n\t\t\t\t\t$item = $(this);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.doSelect($item);\n\t\t},\n\n\t\tselectByValue: function (value) {\n\t\t\tvar selector = 'li[data-value=\"' + value + '\"]';\n\t\t\tthis.selectBySelector(selector);\n\t\t},\n\n\t\tselectByIndex: function (index) {\n\t\t\t// zero-based index\n\t\t\tvar selector = 'li:eq(' + index + ')';\n\t\t\tthis.selectBySelector(selector);\n\t\t},\n\n\t\tselectBySelector: function (selector) {\n\t\t\tvar $item = this.$element.find(selector);\n\t\t\tthis.doSelect($item);\n\t\t},\n\n\t\tsetDefaultSelection: function () {\n\t\t\tvar $item = this.$element.find('li[data-selected=true]').eq(0);\n\n\t\t\tif ($item.length === 0) {\n\t\t\t\t$item = this.$element.find('li').has('a').eq(0);\n\t\t\t}\n\n\t\t\tthis.doSelect($item);\n\t\t},\n\n\t\tenable: function () {\n\t\t\tthis.$element.removeClass('disabled');\n\t\t\tthis.$button.removeClass('disabled');\n\t\t},\n\n\t\tdisable: function () {\n\t\t\tthis.$element.addClass('disabled');\n\t\t\tthis.$button.addClass('disabled');\n\t\t}\n\n\t});\t\n\n\n\tSelectList.prototype.getValue = SelectList.prototype.selectedItem;\n\n\n    plugins.register(SelectList);\n\n\treturn popups.SelectList = SelectList;\n});\n\ndefine('skylark-domx-plugins-popups/main',[\r\n\t\"./popups\",\r\n\t\"./calc-offset\",\r\n\t\"./dropdown\",\r\n\t\"./comboBox\",\r\n\t\"./select-list\"\r\n],function(popups){\r\n\treturn popups;\r\n});\ndefine('skylark-domx-plugins-popups', ['skylark-domx-plugins-popups/main'], function (main) { return main; });\n\n"]}