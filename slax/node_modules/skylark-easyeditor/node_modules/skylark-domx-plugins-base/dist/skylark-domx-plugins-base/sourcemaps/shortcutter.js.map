{"version":3,"sources":["shortcutter.js"],"names":["define","types","plugins","instantiate","slice","Array","prototype","shortcutter","pluginName","extfn","elm","options","plugin","this","args","call","arguments","apply","methodName","Error","isFunction","charAt","ret","undefined"],"mappings":";;;;;;;AAAAA,QACI,sBACA,YACA,iBACD,SACCC,EACAC,EACAC,GAEA,aAEA,IAAIC,EAAQC,MAAMC,UAAUF,MAuD5B,OAAQF,EAAQK,YArDhB,SAAqBC,EAAWC,GAK5B,OAAO,SAAUC,EAAIC,GACjB,IAAKC,EAAST,EAAYO,EAAKF,EAAW,YAC1C,GAAiB,aAAZG,EACH,OAAOC,GAAU,KAGnB,IAAKA,IACDA,EAAST,EAAYO,EAAKF,EAA6B,iBAAXG,GAAuBA,OAC7C,iBAAXA,GACT,OAAOE,KAGb,GAAIF,EAAS,CACT,IAAIG,EAAOV,EAAMW,KAAKC,UAAU,GAChC,GAAIP,EACA,OAAOA,EAAMQ,MAAML,EAAOE,GAE1B,GAAsB,iBAAXH,EAAqB,CAC5B,IAAIO,EAAaP,EAEjB,IAAMC,EACF,MAAM,IAAIO,MAAO,0BAA4BX,EACzC,uDAC+BU,EAAa,KAGpD,IAAMjB,EAAMmB,WAAYR,EAAQM,KAA6C,MAA3BA,EAAWG,OAAQ,GACjE,MAAM,IAAIF,MAAO,mBAAqBD,EAAa,SAAWV,EAC1D,oBAGRM,EAAOV,EAAMW,KAAKD,EAAK,GAEvB,IAAIQ,EAAMV,EAAOM,GAAYD,MAAML,EAAOE,GAK1C,OAJIQ,GAAOV,IACTU,OAAMC,GAGDD","file":"../shortcutter.js","sourcesContent":["define([\r\n    \"skylark-langx-types\",\r\n    \"./plugins\",\r\n    \"./instantiate\"\r\n], function(\r\n    types,\r\n    plugins,\r\n    instantiate\r\n) {\r\n    \"use strict\";\r\n\r\n    var slice = Array.prototype.slice;\r\n\r\n    function shortcutter(pluginName,extfn) {\r\n       /*\r\n        * Create or get or destory a plugin instance assocated with the element,\r\n        * and also you can execute the plugin method directory;\r\n        */\r\n        return function (elm,options) {\r\n            var  plugin = instantiate(elm, pluginName,\"instance\");\r\n            if ( options === \"instance\" ) {\r\n              return plugin || null;\r\n            }\r\n\r\n            if (!plugin) {\r\n                plugin = instantiate(elm, pluginName,typeof options == 'object' && options || {});\r\n                if (typeof options != \"string\") {\r\n                  return this;\r\n                }\r\n            } \r\n            if (options) {\r\n                var args = slice.call(arguments,1); //2\r\n                if (extfn) {\r\n                    return extfn.apply(plugin,args);\r\n                } else {\r\n                    if (typeof options == 'string') {\r\n                        var methodName = options;\r\n\r\n                        if ( !plugin ) {\r\n                            throw new Error( \"cannot call methods on \" + pluginName +\r\n                                \" prior to initialization; \" +\r\n                                \"attempted to call method '\" + methodName + \"'\" );\r\n                        }\r\n\r\n                        if ( !types.isFunction( plugin[ methodName ] ) || methodName.charAt( 0 ) === \"_\" ) {\r\n                            throw new Error( \"no such method '\" + methodName + \"' for \" + pluginName +\r\n                                \" plugin instance\" );\r\n                        }\r\n\r\n                        args = slice.call(args,1); //remove method name\r\n\r\n                        var ret = plugin[methodName].apply(plugin,args);\r\n                        if (ret == plugin) {\r\n                          ret = undefined;\r\n                        }\r\n\r\n                        return ret;\r\n                    }                \r\n                }                \r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return  plugins.shortcutter = shortcutter;\r\n});"]}