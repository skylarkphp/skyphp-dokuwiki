/**
 * skylark-io-caches - The skylarkjs web local storage classes library.
 * @author 
 * @version v0.9.0
 * @link 
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,r="function"==typeof n&&n.amd,i=!r&&"undefined"!=typeof exports;if(!r&&!n){var o={};n=t.define=function(e,t,n){"function"==typeof n?(o[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),r=e.split("/");n.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?n.pop():n.push(r[i]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):o[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=o[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-io-caches/caches",["skylark-langx-ns"],function(e){"use strict";let t=e.attach("io.caches");return t.storages=t.storages||{},t}),e("skylark-io-caches/clipboard",["./caches"],function(e){}),e("skylark-io-caches/cookie",["skylark-langx-types","skylark-langx-objects/mixin","skylark-langx-datetimes","./caches"],function(e,t,n,r){"use strict";function i(){return i}return t(i,{get:function(e){return sKey&&this.has(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},has:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},list:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=unescape(e[t]);return e},remove:function(e,t){e&&this.has(e)&&(document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(t?"; path="+t:""))},set:function(t,r,i,o,s,c){if(t&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(t)){var a=e.type(i);if("number"===a){var l=Date.now();l.setTime(l.getTime()+24*expire*60*60*1e3),i=l}else"string"===a&&(i=new Date(Date.now()+n.parseMilliSeconds(i)));document.cookie=escape(t)+"="+escape(r)+(i?"; domain="+i.toGMTString():"")+(s?"; domain="+s:"")+(o?"; path="+o:"")+(c?"; secure":"")}}}),r.cookie=i}),e("skylark-io-caches/local-file-system",["skylark-langx-objects/mixin","skylark-langx-events/Emitter","skylark-langx-async/Deferred","./caches"],function(e,t,n,r){"use strict";var i=window.requestFileSystem||window.webkitRequestFileSystem;window.resolveLocalFileSystemURL||window.webkitResolveLocalFileSystemURL,window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;function o(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}return t}var s=t.inherit({_fs:null,_isPersisted:!0,_cwd:null,init:function(e){this._fs=e,this._cwd=e.root},readfileAsArrayBuffer:function(e,t,n){this._cwd.getFile(e,{},function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(){t(null,this.result)},n.readAsArrayBuffer(e)},n)},n)},readfileAsDataURL:function(e,t,n){this._cwd.getFile(e,{},function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(){t(null,this.result)},n.readAsDataURL(e)},n)},n)},readfileAsText:function(e,t,n){this._cwd.getFile(e,{},function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(){t(null,this.result)},n.readAsText(e)},n)},n)},writefile:function(e,t,n,r){var i=this,o=e.split("/");o=o.slice(0,o.length-1),this.mkdir(o.join("/"),function(){i._cwd.getFile(e,{create:!0},function(e){e.createWriter(function(e){var i=!1;e.onwriteend=function(){if(!i)return i=!0,void this.truncate(this.position);n&&n()},e.onerror=r;var o=t;!o instanceof Blob&&(o=new Blob([t],{type:"text/plain"})),e.write(o)},r)},r)})},rmfile:function(e,t,n){this._cwd.getFile(e,{},function(e){e.remove(function(){t()},n)},n)},readdir:function(e,t,n){this._cwd.getDirectory(e,{},function(e){var r=e.createReader(),i=[];!function e(){r.readEntries(function(n){n.length?(i=i.concat(Array.prototype.slice.call(n).map(function(e){return e.name+(e.isDirectory?"/":"")})),e()):t(null,i)},n)}()},n)},mkdir:function(e,t,n){var r=e.split("/"),i=function(o,s){"."!=s[0]&&""!=s[0]||(s=s.slice(1)),0!=s.length?o.getDirectory(s[0],{create:!0,exclusive:!1},function(o){if(o.isDirectory)s.length&&1!=r.length?i(o,s.slice(1)):t&&t(o);else{var c=new Error(e+" is not a directory");if(!n)throw c;n(c)}},function(e){if(!n)throw e;n(e)}):t(o)};i(this._cwd,r)},rmdir:function(e,t,n){this._cwd.getDirectory(e,{},function(e){e.removeRecursively(function(){t()},n)},n)},copy:function(e,t,n){this._cwd.getFile(e,{},function(e){cwd.getDirectory(t,{},function(t){e.copyTo(t,function(){n()},n)},n)},n)},move:function(e,t,n){this._cwd.getFile(e,{},function(e){cwd.getDirectory(t,{},function(t){e.moveTo(t,function(){n()},n)},n)},n)},chdir:function(e,t){this._cwd.getDirectory(e,{},function(e){cwd=e,fs.onchdir&&fs.onchdir(cwd.fullPath),t()},t)},importFromHost:function(e){for(var t,r=new n,i=0;t=e[i];++i)!function(e){cwd.getFile(t.name,{create:!0,exclusive:!0},function(t){t.createWriter(function(t){t.write(e)},o)},o)}(t);return r.promise},exportToHost:function(){}});return e(s,{isSupported:function(){return!!i},request:function(e,t){e=e||10485760;var r=t?PERSISTENT:TEMPORARY,o=new n;return i(r,e,function(e){var n=new s(e,!!t);o.resolve(n)},function(e){o.reject(e)}),o.promise}}),r.requestLocalFileSystem=s.request,r.LocalFileSystem=s}),e("skylark-io-caches/storages/local",["skylark-langx-objects/mixin","skylark-langx-strings","../caches"],function(e,t,n){"use strict";var r=null;try{r=window.localStorage}catch(e){}function i(){return i}return e(i,{isSupported:function(){return!!r},set:function(e,n){return void 0===n?this.remove(e):(r.setItem(e,t.serializeValue(n)),n)},get:function(e,n){var i=t.deserializeValue(r.getItem(e));return void 0===i?n:i},remove:function(e){r.removeItem(e)},clear:function(){r.clear()},list:function(){for(var e={},t=0;t<r.length;t++)e[key]=r.key(t);return values}}),n.storages.local=i}),e("skylark-io-caches/storages/session",["skylark-langx-objects/mixin","skylark-langx-strings","../caches"],function(e,t,n){"use strict";var r=null;try{r=window.sessiionStorage}catch(e){}return e(function e(){return e},{isSupported:function(){return!!r},set:function(e,n){return void 0===n?this.remove(e):(r.setItem(e,t.serializeValue(n)),n)},get:function(e,n){var i=t.deserializeValue(r.getItem(e));return void 0===i?n:i},remove:function(e){r.removeItem(e)},clear:function(){r.clear()},list:function(){for(var e={},t=0;t<r.length;t++)e[key]=r.key(t);return values}}),n.storages.session=sessionStorage}),e("skylark-io-caches/main",["./caches","./clipboard","./cookie","./local-file-system","./storages/local","./storages/session"],function(e){"use strict";return e}),e("skylark-io-caches",["skylark-io-caches/main"],function(e){return e})}(n),!r){var s=require("skylark-langx-ns");i?module.exports=s:t.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-io-caches.js.map
