{"version":3,"sources":["read-image.js"],"names":["define","Deferred","diskfs","read","readImage","fileObj","d","img","Image","onload","resolve","onerror","e","reject","asDataUrl","then","dataUrl","src","catch","promise"],"mappings":";;;;;;;AAAAA,QACI,+BACA,WACA,UACF,SAASC,EAAUC,EAAOC,GAwB3B,OAAOD,EAAOE,UAtBd,SAAmBC,GACZ,IAAIC,EAAI,IAAIL,EACdM,EAAM,IAAIC,MAiBX,OAfAD,EAAIE,OAAS,WACXH,EAAEI,QAAQH,IAEZA,EAAII,QAAU,SAASC,GACrBN,EAAEO,OAAOD,IAGXT,EAAKE,GACJS,WAAY,IACVC,KAAK,SAASC,GACbT,EAAIU,IAAMD,IACXE,MAAM,SAASN,GACjBN,EAAEO,OAAOD,KAGHN,EAAEa","file":"../read-image.js","sourcesContent":["define([\r\n    \"skylark-langx-async/deferred\",\r\n    \"./diskfs\",\r\n    \"./read\"\r\n],function(Deferred, diskfs,read){\r\n\r\n\tfunction readImage(fileObj) {\r\n        var d = new Deferred,\r\n\t    \timg = new Image();\r\n\r\n\t    img.onload = function() {\r\n\t      d.resolve(img);\r\n\t    };\r\n\t    img.onerror = function(e) {\r\n\t      d.reject(e);\r\n\t    };\r\n\r\n\t    read(fileObj,{\r\n\t    \tasDataUrl : true\r\n\t    }).then(function(dataUrl){\r\n\t        img.src = dataUrl;\r\n\t    }).catch(function(e){\r\n\t    \td.reject(e);\r\n\t    });\r\n\r\n\t    return d.promise;\r\n\t}\r\n\r\n\treturn diskfs.readImage = readImage;\r\n\r\n});"]}