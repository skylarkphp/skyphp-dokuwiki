/**
 * skylark-langx-async - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(r,e){var t=e.define,require=e.require,n="function"==typeof t&&t.amd,o=!n&&"undefined"!=typeof exports;if(!n&&!t){var i={};t=e.define=function(r,e,t){"function"==typeof t?(i[r]={factory:t,deps:e.map(function(e){return function(r,e){if("."!==r[0])return r;var t=e.split("/"),n=r.split("/");t.pop();for(var o=0;o<n.length;o++)"."!=n[o]&&(".."==n[o]?t.pop():t.push(n[o]));return t.join("/")}(e,r)}),resolved:!1,exports:null},require(r)):i[r]={factory:null,resolved:!0,exports:t}},require=e.require=function(r){if(!i.hasOwnProperty(r))throw new Error("Module "+r+" has not been defined");var module=i[r];if(!module.resolved){var t=[];module.deps.forEach(function(r){t.push(require(r))}),module.exports=module.factory.apply(e,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(r,require){r("skylark-langx-async/deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(r,e,t){"use strict";var n=Array.prototype.slice,o=e.proxy,i=r.makeArray,s=t.result,u=t.mixin;u(Promise.prototype,{always:function(r){return this.then(r,r),this},done:function(){for(var r=0;r<arguments.length;r++)this.then(arguments[r]);return this},fail:function(r){return this.catch(r),this}});var a=function(){var r=this;this.promise=c(new Promise(function(e,t){r._resolve=e,r._reject=t}))};function c(r){if(r.isResolved)return r;var e=!0,t=!1,n=!1,o=r.then(function(r){return n=!0,e=!1,r},function(r){throw t=!0,e=!1,r});o.isResolved=function(){return n},o.isPending=function(){return e},o.isRejected=function(){return t},o.state=function(){return n?"resolved":t?"rejected":"pending"};var i=[],s=[];return o.then=function(r,e,t){return t&&this.progress(t),c(Promise.prototype.then.call(this,r&&function(e){return e&&void 0!==e.__ctx__?r.apply(e.__ctx__,e):r(e)},e&&function(r){return r&&void 0!==r.__ctx__?e.apply(r.__ctx__,r):e(r)}))},o.progress=function(r){return i.forEach(function(e){r(e)}),s.push(r),this},o.pipe=o.then,o.notify=function(r){try{return i.push(r),s.forEach(function(e){return e(r)})}catch(r){this.reject(r)}return this},o}return a.prototype.resolve=function(r){var e=n.call(arguments);return this.resolveWith(null,e)},a.prototype.resolveWith=function(r,e){return(e=e?i(e):[]).__ctx__=r,this._resolve(e),this._resolved=!0,this},a.prototype.notify=function(r){var e=s(this,"promise");return e.notify(r),this},a.prototype.reject=function(r){var e=n.call(arguments);return this.rejectWith(null,e)},a.prototype.rejectWith=function(r,e){return(e=e?i(e):[]).__ctx__=r,this._reject(e),this._rejected=!0,this},a.prototype.isResolved=function(){var r=s(this,"promise");return r.isResolved()},a.prototype.isRejected=function(){var r=s(this,"promise");return r.isRejected()},a.prototype.state=function(){var r=s(this,"promise");return r.state()},a.prototype.then=function(r,e,t){var n=s(this,"promise");return n.then(r,e,t)},a.prototype.progress=function(r){var e=s(this,"promise");return e.progress(r)},a.prototype.catch=function(r){var e=s(this,"promise");return e.catch(r)},a.prototype.always=function(){var r=s(this,"promise");return r.always.apply(r,arguments),this},a.prototype.done=function(){var r=s(this,"promise");return r.done.apply(r,arguments),this},a.prototype.fail=function(r){var e=s(this,"promise");return e.fail(r),this},a.all=function(r){var e=new a;return Promise.all(r).then(e.resolve.bind(e),e.reject.bind(e)),s(e,"promise")},a.first=function(r){return c(Promise.race(r))},a.when=function(r,e,t,n){var i=r&&"function"==typeof r.then,s=i&&r instanceof Promise;if(!i)return arguments.length>1?e?e(r):r:(new a).resolve(r);if(!s){var u=new a(r.cancel);r.then(o(u.resolve,u),o(u.reject,u),u.notify),r=u.promise}return e||t||n?r.then(e,t,n):r},a.reject=function(r){var e=new a;return e.reject(r),e.promise},a.immediate=a.resolve=function(r){var e=new a;return e.resolve.apply(e,arguments),e.promise},a.promise=function(r){var e=new a;return r(e.resolve.bind(e),e.reject.bind(e),e.progress.bind(e)),e.promise},a}),r("skylark-langx-async/async",["skylark-langx-ns","skylark-langx-objects","./deferred"],function(r,e,t){var n=e.each,o={Deferred:t,parallel:function(r,e,o){var i=[];return o=o||null,e=e||[],n(r,function(r,t){i.push(t.apply(o,e))}),t.all(i)},series:function(r,e,o){var i=[],s=new t,u=s.promise;return o=o||null,e=e||[],s.resolve(),n(r,function(r,t){u=u.then(function(){return t.apply(o,e)}),i.push(u)}),t.all(i)},waterful:function(r,e,o){var i=new t,s=i.promise;return o=o||null,e=e||[],i.resolveWith(o,e),n(r,function(r,e){s=s.then(e)}),s}};return r.attach("langx.async",o)}),r("skylark-langx-async/main",["./async"],function(r){return r}),r("skylark-langx-async",["skylark-langx-async/main"],function(r){return r})}(t),!n){var s=require("skylark-langx-ns");o?module.exports=s:e.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-langx-async.js.map
