{"version":3,"sources":["async.js"],"names":["define","skylark","objects","Deferred","each","async","parallel","arr","args","ctx","rets","i","func","push","apply","all","series","d","p","promise","resolve","then","waterful","resolveWith","attach"],"mappings":";;;;;;;AAAAA,QACI,mBACA,wBACA,cACF,SAASC,EAAQC,EAAQC,GACvB,IAAIC,EAAOF,EAAQE,KAEfC,GACAF,SAAWA,EAEXG,SAAW,SAASC,EAAIC,EAAKC,GACzB,IAAIC,KAQJ,OAPAD,EAAMA,GAAO,KACbD,EAAOA,MAEPJ,EAAKG,EAAI,SAASI,EAAEC,GAChBF,EAAKG,KAAKD,EAAKE,MAAML,EAAID,MAGtBL,EAASY,IAAIL,IAGxBM,OAAS,SAAST,EAAIC,EAAKC,GACvB,IAAIC,KACAO,EAAI,IAAId,EACRe,EAAID,EAAEE,QAaV,OAXAV,EAAMA,GAAO,KACbD,EAAOA,MAEPS,EAAEG,UACFhB,EAAKG,EAAI,SAASI,EAAEC,GAChBM,EAAIA,EAAEG,KAAK,WACP,OAAOT,EAAKE,MAAML,EAAID,KAE1BE,EAAKG,KAAKK,KAGPf,EAASY,IAAIL,IAGxBY,SAAW,SAASf,EAAIC,EAAKC,GACzB,IAAIQ,EAAI,IAAId,EACRe,EAAID,EAAEE,QAUV,OARAV,EAAMA,GAAO,KACbD,EAAOA,MAEPS,EAAEM,YAAYd,EAAID,GAElBJ,EAAKG,EAAI,SAASI,EAAEC,GAChBM,EAAIA,EAAEG,KAAKT,KAERM,IAIlB,OAAOjB,EAAQuB,OAAO,cAAcnB","file":"../async.js","sourcesContent":["define([\r\n    \"skylark-langx-ns\",\r\n    \"skylark-langx-objects\",\r\n    \"./deferred\"\r\n],function(skylark,objects,Deferred){\r\n    var each = objects.each;\r\n    \r\n    var async = {\r\n        Deferred : Deferred,\r\n\r\n        parallel : function(arr,args,ctx) {\r\n            var rets = [];\r\n            ctx = ctx || null;\r\n            args = args || [];\r\n\r\n            each(arr,function(i,func){\r\n                rets.push(func.apply(ctx,args));\r\n            });\r\n\r\n            return Deferred.all(rets);\r\n        },\r\n\r\n        series : function(arr,args,ctx) {\r\n            var rets = [],\r\n                d = new Deferred(),\r\n                p = d.promise;\r\n\r\n            ctx = ctx || null;\r\n            args = args || [];\r\n\r\n            d.resolve();\r\n            each(arr,function(i,func){\r\n                p = p.then(function(){\r\n                    return func.apply(ctx,args);\r\n                });\r\n                rets.push(p);\r\n            });\r\n\r\n            return Deferred.all(rets);\r\n        },\r\n\r\n        waterful : function(arr,args,ctx) {\r\n            var d = new Deferred(),\r\n                p = d.promise;\r\n\r\n            ctx = ctx || null;\r\n            args = args || [];\r\n\r\n            d.resolveWith(ctx,args);\r\n\r\n            each(arr,function(i,func){\r\n                p = p.then(func);\r\n            });\r\n            return p;\r\n        }\r\n    };\r\n\r\n\treturn skylark.attach(\"langx.async\",async);\t\r\n});"]}