{"version":3,"sources":["defer.js"],"names":["define","types","funcs","defer","fn","trigger","args","context","ret","cancel","fn1","isNumber","isFunction","apply","canceled","id","requestAnimationFrame","cancelAnimationFrame","setTimeout","clearTimeout"],"mappings":";;;;;;;AAAAA,QACI,sBACA,WACF,SAASC,EAAMC,GAkDb,OAAOA,EAAMC,MAhDb,SAAeC,EAAGC,EAAQC,EAAKC,GAC3B,IAAIC,GACAC,OAAS,MAEbC,EAAMN,EAcN,GAZKH,EAAMU,SAASN,IAAaJ,EAAMW,WAAWP,KAC9CE,EAAUD,EACVA,EAAOD,EACPA,EAAU,GAGVC,IACAI,EAAM,WACFN,EAAGS,MAAMN,EAAQD,KAIrBL,EAAMW,WAAWP,GAAU,CAC3B,IAAIS,GAAW,EACfT,EAAQ,WACCS,GACDJ,MAIRF,EAAIC,OAAS,WACTK,GAAW,OAGZ,CACH,IAAKC,EACU,GAAXV,GAAgBW,uBAChBD,EAAKC,sBAAsBN,GAC3BF,EAAIC,OAAS,WACT,OAAOQ,qBAAqBF,MAGhCA,EAAKG,WAAWR,EAAIL,GACpBG,EAAIC,OAAS,WACT,OAAOU,aAAaJ,KAKhC,OAAOP","file":"../defer.js","sourcesContent":["define([\r\n    \"skylark-langx-types\",\r\n    \"./funcs\"\r\n],function(types,funcs){\r\n\r\n    function defer(fn,trigger,args,context) {\r\n        var ret = {\r\n            cancel : null\r\n        },\r\n        fn1 = fn;\r\n\r\n        if (!types.isNumber(trigger) && !types.isFunction(trigger)) {\r\n            context = args;\r\n            args = trigger;\r\n            trigger = 0;\r\n        }\r\n\r\n        if (args) {\r\n            fn1 = function() {\r\n                fn.apply(context,args);\r\n            };\r\n        }\r\n\r\n        if (types.isFunction(trigger)) {\r\n            var canceled = false;\r\n            trigger(function(){\r\n                if (!canceled) {\r\n                    fn1();\r\n                }\r\n            });\r\n\r\n            ret.cancel = function() {\r\n                canceled = true;\r\n            }\r\n\r\n        } else {\r\n            var  id;\r\n            if (trigger == 0 && requestAnimationFrame) {\r\n                id = requestAnimationFrame(fn1);\r\n                ret.cancel = function() {\r\n                    return cancelAnimationFrame(id);\r\n                };\r\n            } else {\r\n                id = setTimeout(fn1,trigger);\r\n                ret.cancel = function() {\r\n                    return clearTimeout(id);\r\n                };\r\n            }            \r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    return funcs.defer = defer;\r\n})"]}