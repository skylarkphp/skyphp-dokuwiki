/**
 * skylark-langx-numerics - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-klass","./numerics","./Vector3"],function(t,e,n){var s=new n,r=new n(0,0,0),i=new n(1,1,1),o=new n,a=new n,h=new n,u=t({set:function(t,e,n,s,r,i,o,a,h,u,l,m,c,f,v,x){var M=this.elements;return M[0]=t,M[4]=e,M[8]=n,M[12]=s,M[1]=r,M[5]=i,M[9]=o,M[13]=a,M[2]=h,M[6]=u,M[10]=l,M[14]=m,M[3]=c,M[7]=f,M[11]=v,M[15]=x,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,r=1/s.setFromMatrixColumn(t,0).length(),i=1/s.setFromMatrixColumn(t,1).length(),o=1/s.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("mathsMatrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,s=t.y,r=t.z,i=Math.cos(n),o=Math.sin(n),a=Math.cos(s),h=Math.sin(s),u=Math.cos(r),l=Math.sin(r);if("XYZ"===t.order){var m=i*u,c=i*l,f=o*u,v=o*l;e[0]=a*u,e[4]=-a*l,e[8]=h,e[1]=c+f*h,e[5]=m-v*h,e[9]=-o*a,e[2]=v-m*h,e[6]=f+c*h,e[10]=i*a}else if("YXZ"===t.order){var x=a*u,M=a*l,y=h*u,d=h*l;e[0]=x+d*o,e[4]=y*o-M,e[8]=i*h,e[1]=i*l,e[5]=i*u,e[9]=-o,e[2]=M*o-y,e[6]=d+x*o,e[10]=i*a}else if("ZXY"===t.order){x=a*u,M=a*l,y=h*u,d=h*l;e[0]=x-d*o,e[4]=-i*l,e[8]=y+M*o,e[1]=M+y*o,e[5]=i*u,e[9]=d-x*o,e[2]=-i*h,e[6]=o,e[10]=i*a}else if("ZYX"===t.order){m=i*u,c=i*l,f=o*u,v=o*l;e[0]=a*u,e[4]=f*h-c,e[8]=m*h+v,e[1]=a*l,e[5]=v*h+m,e[9]=c*h-f,e[2]=-h,e[6]=o*a,e[10]=i*a}else if("YZX"===t.order){var p=i*a,g=i*h,z=o*a,k=o*h;e[0]=a*u,e[4]=k-p*l,e[8]=z*l+g,e[1]=l,e[5]=i*u,e[9]=-o*u,e[2]=-h*u,e[6]=g*l+z,e[10]=p-k*l}else if("XZY"===t.order){p=i*a,g=i*h,z=o*a,k=o*h;e[0]=a*u,e[4]=-l,e[8]=h*u,e[1]=p*l+k,e[5]=i*u,e[9]=g*l-z,e[2]=z*l-g,e[6]=o*u,e[10]=k*l+p}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(r,t,i)},lookAt:function(t,e,n){var s=this.elements;return h.subVectors(t,e),0===h.lengthSq()&&(h.z=1),h.normalize(),o.crossVectors(n,h),0===o.lengthSq()&&(1===Math.abs(n.z)?h.x+=1e-4:h.z+=1e-4,h.normalize(),o.crossVectors(n,h)),o.normalize(),a.crossVectors(h,o),s[0]=o.x,s[4]=a.x,s[8]=h.x,s[1]=o.y,s[5]=a.y,s[9]=h.y,s[2]=o.z,s[6]=a.z,s[10]=h.z,this},multiply:function(t,e){return void 0!==e?(console.warn("mathsMatrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,s=e.elements,r=this.elements,i=n[0],o=n[4],a=n[8],h=n[12],u=n[1],l=n[5],m=n[9],c=n[13],f=n[2],v=n[6],x=n[10],M=n[14],y=n[3],d=n[7],p=n[11],g=n[15],z=s[0],k=s[4],w=s[8],F=s[12],R=s[1],V=s[5],X=s[9],Y=s[13],Z=s[2],A=s[6],C=s[10],S=s[14],b=s[3],P=s[7],_=s[11],q=s[15];return r[0]=i*z+o*R+a*Z+h*b,r[4]=i*k+o*V+a*A+h*P,r[8]=i*w+o*X+a*C+h*_,r[12]=i*F+o*Y+a*S+h*q,r[1]=u*z+l*R+m*Z+c*b,r[5]=u*k+l*V+m*A+c*P,r[9]=u*w+l*X+m*C+c*_,r[13]=u*F+l*Y+m*S+c*q,r[2]=f*z+v*R+x*Z+M*b,r[6]=f*k+v*V+x*A+M*P,r[10]=f*w+v*X+x*C+M*_,r[14]=f*F+v*Y+x*S+M*q,r[3]=y*z+d*R+p*Z+g*b,r[7]=y*k+d*V+p*A+g*P,r[11]=y*w+d*X+p*C+g*_,r[15]=y*F+d*Y+p*S+g*q,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],s=t[8],r=t[12],i=t[1],o=t[5],a=t[9],h=t[13],u=t[2],l=t[6],m=t[10],c=t[14];return t[3]*(+r*a*l-s*h*l-r*o*m+n*h*m+s*o*c-n*a*c)+t[7]*(+e*a*c-e*h*m+r*i*m-s*i*c+s*h*u-r*a*u)+t[11]*(+e*h*l-e*o*c-r*i*l+n*i*c+r*o*u-n*h*u)+t[15]*(-s*o*u-e*a*l+e*o*m+s*i*l-n*i*m+n*a*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn("mathsMatrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,s=t.elements,r=s[0],i=s[1],o=s[2],a=s[3],h=s[4],u=s[5],l=s[6],m=s[7],c=s[8],f=s[9],v=s[10],x=s[11],M=s[12],y=s[13],d=s[14],p=s[15],g=f*d*m-y*v*m+y*l*x-u*d*x-f*l*p+u*v*p,z=M*v*m-c*d*m-M*l*x+h*d*x+c*l*p-h*v*p,k=c*y*m-M*f*m+M*u*x-h*y*x-c*u*p+h*f*p,w=M*f*l-c*y*l-M*u*v+h*y*v+c*u*d-h*f*d,F=r*g+i*z+o*k+a*w;if(0===F)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var R=1/F;return n[0]=g*R,n[1]=(y*v*a-f*d*a-y*o*x+i*d*x+f*o*p-i*v*p)*R,n[2]=(u*d*a-y*l*a+y*o*m-i*d*m-u*o*p+i*l*p)*R,n[3]=(f*l*a-u*v*a-f*o*m+i*v*m+u*o*x-i*l*x)*R,n[4]=z*R,n[5]=(c*d*a-M*v*a+M*o*x-r*d*x-c*o*p+r*v*p)*R,n[6]=(M*l*a-h*d*a-M*o*m+r*d*m+h*o*p-r*l*p)*R,n[7]=(h*v*a-c*l*a+c*o*m-r*v*m-h*o*x+r*l*x)*R,n[8]=k*R,n[9]=(M*f*a-c*y*a-M*i*x+r*y*x+c*i*p-r*f*p)*R,n[10]=(h*y*a-M*u*a+M*i*m-r*y*m-h*i*p+r*u*p)*R,n[11]=(c*u*a-h*f*a-c*i*m+r*f*m+h*i*x-r*u*x)*R,n[12]=w*R,n[13]=(c*y*o-M*f*o+M*i*v-r*y*v-c*i*d+r*f*d)*R,n[14]=(M*u*o-h*y*o-M*i*l+r*y*l+h*i*d-r*u*d)*R,n[15]=(h*f*o-c*u*o+c*i*l-r*f*l-h*i*v+r*u*v)*R,this},scale:function(t){var e=this.elements,n=t.x,s=t.y,r=t.z;return e[0]*=n,e[4]*=s,e[8]*=r,e[1]*=n,e[5]*=s,e[9]*=r,e[2]*=n,e[6]*=s,e[10]*=r,e[3]*=n,e[7]*=s,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,s))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),s=Math.sin(e),r=1-n,i=t.x,o=t.y,a=t.z,h=r*i,u=r*o;return this.set(h*i+n,h*o-s*a,h*a+s*o,0,h*o+s*a,u*o+n,u*a-s*i,0,h*a-s*o,u*a+s*i,r*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var s=this.elements,r=e._x,i=e._y,o=e._z,a=e._w,h=r+r,u=i+i,l=o+o,m=r*h,c=r*u,f=r*l,v=i*u,x=i*l,M=o*l,y=a*h,d=a*u,p=a*l,g=n.x,z=n.y,k=n.z;return s[0]=(1-(v+M))*g,s[1]=(c+p)*g,s[2]=(f-d)*g,s[3]=0,s[4]=(c-p)*z,s[5]=(1-(m+M))*z,s[6]=(x+y)*z,s[7]=0,s[8]=(f+d)*k,s[9]=(x-y)*k,s[10]=(1-(m+v))*k,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this},decompose:function(t,e,n){var r=this.elements,i=s.set(r[0],r[1],r[2]).length(),o=s.set(r[4],r[5],r[6]).length(),a=s.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],l.copy(this);var h=1/i,u=1/o,m=1/a;return l.elements[0]*=h,l.elements[1]*=h,l.elements[2]*=h,l.elements[4]*=u,l.elements[5]*=u,l.elements[6]*=u,l.elements[8]*=m,l.elements[9]*=m,l.elements[10]*=m,e.setFromRotationMatrix(l),n.x=i,n.y=o,n.z=a,this},makePerspective:function(t,e,n,s,r,i){void 0===i&&console.warn("mathsMatrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*r/(e-t),h=2*r/(n-s),u=(e+t)/(e-t),l=(n+s)/(n-s),m=-(i+r)/(i-r),c=-2*i*r/(i-r);return o[0]=a,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=h,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=m,o[14]=c,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,s,r,i){var o=this.elements,a=1/(e-t),h=1/(n-s),u=1/(i-r),l=(e+t)*a,m=(n+s)*h,c=(i+r)*u;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-m,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-c,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,s=0;s<16;s++)if(e[s]!==n[s])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},_construct:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("mathsMatrix4: the constructor no longer reads arguments. use .set() instead.")}}),l=new u;return e.Matrix4=u});
//# sourceMappingURL=sourcemaps/Matrix4.js.map
