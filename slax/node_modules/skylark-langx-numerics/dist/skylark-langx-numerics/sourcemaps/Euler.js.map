{"version":3,"sources":["Euler.js"],"names":["define","klass","numerics","maths","Quaternion","Vector3","Matrix4","_matrix","_quaternion","Euler","x","get","this","_x","set","value","_onChangeCallback","y","_y","z","_z","order","_order","isEuler","clone","constructor","copy","euler","setFromRotationMatrix","m","update","clamp","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","Math","asin","abs","atan2","console","warn","setFromQuaternion","q","makeRotationFromQuaternion","setFromVector3","v","reorder","newOrder","setFromEuler","equals","fromArray","array","undefined","toArray","offset","toVector3","optionalResult","_onChange","callback","_construct","DefaultOrder","RotationOrders"],"mappings":"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","file":"../Euler.js","sourcesContent":["define([\r\n\t\"skylark-langx-klass\",\r\n\t\"./numerics\",\r\n\t\"./maths\",\r\n\t\"./Quaternion\",\r\n\t\"./Vector3\",\r\n\t\"./Matrix4\"\r\n] ,function(\r\n\tklass,\r\n\tnumerics,\r\n\tmaths,\r\n\tQuaternion,\r\n\tVector3,\r\n\tMatrix4\r\n) {\r\n\r\n\tvar _matrix = new Matrix4();\r\n\tvar _quaternion = new Quaternion();\r\n\r\n\tvar Euler = klass({\r\n\t\tx: {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this._x;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis._x = value;\r\n\t\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ty: {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this._y;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis._y = value;\r\n\t\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tz: {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this._z;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis._z = value;\r\n\t\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\torder: {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this._order;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis._order = value;\r\n\t\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tisEuler: true,\r\n\r\n\t\tset: function ( x, y, z, order ) {\r\n\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\t\t\tthis._order = order || this._order;\r\n\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tclone: function () {\r\n\r\n\t\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t\t},\r\n\r\n\t\tcopy: function ( euler ) {\r\n\r\n\t\t\tthis._x = euler._x;\r\n\t\t\tthis._y = euler._y;\r\n\t\t\tthis._z = euler._z;\r\n\t\t\tthis._order = euler._order;\r\n\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\t\tvar clamp = maths.clamp;\r\n\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\t\tvar te = m.elements;\r\n\t\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\t\torder = order || this._order;\r\n\r\n\t\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'skylark-nunustudio/editor/gui/element/RendererCanvasEuler: .setFromRotationMatrix() given unsupported order: ' + order );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._order = order;\r\n\r\n\t\t\tif ( update !== false ) this._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetFromQuaternion: function ( q, order, update ) {\r\n\r\n\t\t\t_matrix.makeRotationFromQuaternion( q );\r\n\r\n\t\t\treturn this.setFromRotationMatrix( _matrix, order, update );\r\n\r\n\t\t},\r\n\r\n\t\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t\t},\r\n\r\n\t\treorder: function ( newOrder ) {\r\n\r\n\t\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\t\t_quaternion.setFromEuler( this );\r\n\r\n\t\t\treturn this.setFromQuaternion( _quaternion, newOrder );\r\n\r\n\t\t},\r\n\r\n\t\tequals: function ( euler ) {\r\n\r\n\t\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t\t},\r\n\r\n\t\tfromArray: function ( array ) {\r\n\r\n\t\t\tthis._x = array[ 0 ];\r\n\t\t\tthis._y = array[ 1 ];\r\n\t\t\tthis._z = array[ 2 ];\r\n\t\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\ttoArray: function ( array, offset ) {\r\n\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\t\tarray[ offset ] = this._x;\r\n\t\t\tarray[ offset + 1 ] = this._y;\r\n\t\t\tarray[ offset + 2 ] = this._z;\r\n\t\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t},\r\n\r\n\t\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\t\tif ( optionalResult ) {\r\n\r\n\t\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn new Vector3( this._x, this._y, this._z );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_onChange: function ( callback ) {\r\n\r\n\t\t\tthis._onChangeCallback = callback;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\t_onChangeCallback: function () {},\r\n\r\n\r\n\t\t\"_construct\" : function ( x, y, z, order ) {\r\n\r\n\t\t\tthis._x = x || 0;\r\n\t\t\tthis._y = y || 0;\r\n\t\t\tthis._z = z || 0;\r\n\t\t\tthis._order = order || Euler.DefaultOrder;\r\n\r\n\t\t}\r\n\r\n\r\n\t});\r\n\r\n\r\n\tEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\n\tEuler.DefaultOrder = 'XYZ';\r\n\r\n\r\n\treturn numerics.Euler = Euler ;\r\n});\r\n"]}