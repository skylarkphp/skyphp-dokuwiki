{"version":3,"sources":["Matrix3.js"],"names":["define","klass","numerics","Matrix3","klassName","isMatrix3","set","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","this","elements","identity","clone","constructor","fromArray","copy","m","me","extractBasis","xAxis","yAxis","zAxis","setFromMatrix3Column","setFromMatrix4","multiply","multiplyMatrices","premultiply","a","b","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","multiplyScalar","s","determinant","c","d","e","f","g","h","i","getInverse","matrix","throwOnDegenerate","undefined","console","warn","t11","t12","t13","det","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","r","setUvTransform","tx","ty","sx","sy","rotation","cx","cy","Math","cos","sin","scale","rotate","theta","translate","equals","array","offset","toArray","_construct","arguments","length","error"],"mappings":"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","file":"../Matrix3.js","sourcesContent":["define([\r\n\t\"skylark-langx-klass\",\r\n\t\"./numerics\"\r\n] ,function(klass,numerics) {\r\n\r\n\tvar Matrix3 = klass({\r\n\t\t\"klassName\" : \"Matrix3\",\r\n\r\n\t\tisMatrix3: true,\r\n\r\n\t\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\r\n\t\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\r\n\t\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tidentity: function () {\r\n\r\n\t\t\tthis.set(\r\n\r\n\t\t\t\t1, 0, 0,\r\n\t\t\t\t0, 1, 0,\r\n\t\t\t\t0, 0, 1\r\n\r\n\t\t\t);\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tclone: function () {\r\n\r\n\t\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t\t},\r\n\r\n\t\tcopy: function ( m ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\r\n\t\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\r\n\t\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\t\txAxis.setFromMatrix3Column( this, 0 );\r\n\t\t\tyAxis.setFromMatrix3Column( this, 1 );\r\n\t\t\tzAxis.setFromMatrix3Column( this, 2 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetFromMatrix4: function ( m ) {\r\n\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tthis.set(\r\n\r\n\t\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\r\n\t\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\r\n\t\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\r\n\r\n\t\t\t);\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tmultiply: function ( m ) {\r\n\r\n\t\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t\t},\r\n\r\n\t\tpremultiply: function ( m ) {\r\n\r\n\t\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t\t},\r\n\r\n\t\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\t\tvar ae = a.elements;\r\n\t\t\tvar be = b.elements;\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\r\n\t\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\r\n\t\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\r\n\r\n\t\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\r\n\t\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\r\n\t\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\r\n\r\n\t\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\r\n\t\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\r\n\t\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\r\n\r\n\t\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\r\n\t\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\r\n\t\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\r\n\r\n\t\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\r\n\t\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\r\n\t\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tmultiplyScalar: function ( s ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tdeterminant: function () {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t\t},\r\n\r\n\t\tgetInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n\t\t\tif ( throwOnDegenerate !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"mathsMatrix3: .getInverse() can no longer be configured to throw on degenerate.\" );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar me = matrix.elements,\r\n\t\t\t\tte = this.elements,\r\n\r\n\t\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\r\n\t\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\r\n\t\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\r\n\r\n\t\t\t\tt11 = n33 * n22 - n32 * n23,\r\n\t\t\t\tt12 = n32 * n13 - n33 * n12,\r\n\t\t\t\tt13 = n23 * n12 - n22 * n13,\r\n\r\n\t\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\r\n\r\n\t\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\r\n\r\n\t\t\tvar detInv = 1 / det;\r\n\r\n\t\t\tte[ 0 ] = t11 * detInv;\r\n\t\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\r\n\t\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\r\n\r\n\t\t\tte[ 3 ] = t12 * detInv;\r\n\t\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\r\n\t\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\r\n\r\n\t\t\tte[ 6 ] = t13 * detInv;\r\n\t\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\r\n\t\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\ttranspose: function () {\r\n\r\n\t\t\tvar tmp, m = this.elements;\r\n\r\n\t\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tgetNormalMatrix: function ( matrix4 ) {\r\n\r\n\t\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\r\n\r\n\t\t},\r\n\r\n\t\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\t\tvar m = this.elements;\r\n\r\n\t\t\tr[ 0 ] = m[ 0 ];\r\n\t\t\tr[ 1 ] = m[ 3 ];\r\n\t\t\tr[ 2 ] = m[ 6 ];\r\n\t\t\tr[ 3 ] = m[ 1 ];\r\n\t\t\tr[ 4 ] = m[ 4 ];\r\n\t\t\tr[ 5 ] = m[ 7 ];\r\n\t\t\tr[ 6 ] = m[ 2 ];\r\n\t\t\tr[ 7 ] = m[ 5 ];\r\n\t\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n\t\t\tvar c = Math.cos( rotation );\r\n\t\t\tvar s = Math.sin( rotation );\r\n\r\n\t\t\tthis.set(\r\n\t\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n\t\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n\t\t\t\t0, 0, 1\r\n\t\t\t);\r\n\r\n\t\t},\r\n\r\n\t\tscale: function ( sx, sy ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\r\n\t\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\trotate: function ( theta ) {\r\n\r\n\t\t\tvar c = Math.cos( theta );\r\n\t\t\tvar s = Math.sin( theta );\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\r\n\t\t\tvar a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\r\n\r\n\t\t\tte[ 0 ] = c * a11 + s * a21;\r\n\t\t\tte[ 3 ] = c * a12 + s * a22;\r\n\t\t\tte[ 6 ] = c * a13 + s * a23;\r\n\r\n\t\t\tte[ 1 ] = - s * a11 + c * a21;\r\n\t\t\tte[ 4 ] = - s * a12 + c * a22;\r\n\t\t\tte[ 7 ] = - s * a13 + c * a23;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\ttranslate: function ( tx, ty ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\r\n\t\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tequals: function ( matrix ) {\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = matrix.elements;\r\n\r\n\t\t\tfor ( var i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t},\r\n\r\n\t\tfromArray: function ( array, offset ) {\r\n\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < 9; i ++ ) {\r\n\r\n\t\t\t\tthis.elements[ i ] = array[ i + offset ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\ttoArray: function ( array, offset ) {\r\n\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tarray[ offset ] = te[ 0 ];\r\n\t\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\t\tarray[ offset + 8 ] = te[ 8 ];\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t},\r\n\r\n\r\n\t\t\"_construct\" : function () {\r\n\r\n\t\t\tthis.elements = [\r\n\r\n\t\t\t\t1, 0, 0,\r\n\t\t\t\t0, 1, 0,\r\n\t\t\t\t0, 0, 1\r\n\r\n\t\t\t];\r\n\r\n\t\t\tif ( arguments.length > 0 ) {\r\n\r\n\t\t\t\tconsole.error( 'Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\treturn numerics.Matrix3 = Matrix3;\r\n});"]}