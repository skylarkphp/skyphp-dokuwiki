{"version":3,"sources":["Vector4.js"],"names":["define","klass","numerics","Vector4","klassName","set","x","y","z","w","this","setScalar","scalar","setX","setY","setZ","setW","setComponent","index","value","Error","getComponent","clone","constructor","copy","v","undefined","add","console","warn","addVectors","addScalar","s","a","b","addScaledVector","sub","subVectors","subScalar","multiplyScalar","applyMatrix4","m","e","elements","divideScalar","setAxisAngleFromQuaternion","q","Math","acos","sqrt","setAxisAngleFromRotationMatrix","angle","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","abs","PI","xx","yy","zz","xy","xz","yz","min","max","clamp","clampScalar","minVal","maxVal","clampLength","length","floor","ceil","round","roundToZero","negate","dot","lengthSq","manhattanLength","normalize","setLength","lerp","alpha","lerpVectors","v1","v2","equals","fromArray","array","offset","toArray","fromBufferAttribute","attribute","getX","getY","getZ","getW","_construct"],"mappings":"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","file":"../Vector4.js","sourcesContent":["define([\r\n\t\"skylark-langx-klass\",\r\n\t\"./numerics\"\r\n] ,function(klass,numerics) {\r\n\r\n\tvar Vector4 = klass({\r\n\t\t\"klassName\" : \"Vector4\",\r\n\r\n\t\tset: function ( x, y, z, w ) {\r\n\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.z = z;\r\n\t\t\tthis.w = w;\r\n\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tsetScalar: function ( scalar ) {\r\n\r\n\t\t\tthis.x = scalar;\r\n\t\t\tthis.y = scalar;\r\n\t\t\tthis.z = scalar;\r\n\t\t\tthis.w = scalar;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetX: function ( x ) {\r\n\r\n\t\t\tthis.x = x;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetY: function ( y ) {\r\n\r\n\t\t\tthis.y = y;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetZ: function ( z ) {\r\n\r\n\t\t\tthis.z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetW: function ( w ) {\r\n\r\n\t\t\tthis.w = w;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetComponent: function ( index, value ) {\r\n\r\n\t\t\tswitch ( index ) {\r\n\r\n\t\t\t\tcase 0: this.x = value; break;\r\n\t\t\t\tcase 1: this.y = value; break;\r\n\t\t\t\tcase 2: this.z = value; break;\r\n\t\t\t\tcase 3: this.w = value; break;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tgetComponent: function ( index ) {\r\n\r\n\t\t\tswitch ( index ) {\r\n\r\n\t\t\t\tcase 0: return this.x;\r\n\t\t\t\tcase 1: return this.y;\r\n\t\t\t\tcase 2: return this.z;\r\n\t\t\t\tcase 3: return this.w;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tclone: function () {\r\n\r\n\t\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t\t},\r\n\r\n\t\tcopy: function ( v ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\t\t\tthis.y = v.y;\r\n\t\t\tthis.z = v.z;\r\n\t\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tadd: function ( v, w ) {\r\n\r\n\t\t\tif ( w !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.x += v.x;\r\n\t\t\tthis.y += v.y;\r\n\t\t\tthis.z += v.z;\r\n\t\t\tthis.w += v.w;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\taddScalar: function ( s ) {\r\n\r\n\t\t\tthis.x += s;\r\n\t\t\tthis.y += s;\r\n\t\t\tthis.z += s;\r\n\t\t\tthis.w += s;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\taddVectors: function ( a, b ) {\r\n\r\n\t\t\tthis.x = a.x + b.x;\r\n\t\t\tthis.y = a.y + b.y;\r\n\t\t\tthis.z = a.z + b.z;\r\n\t\t\tthis.w = a.w + b.w;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\taddScaledVector: function ( v, s ) {\r\n\r\n\t\t\tthis.x += v.x * s;\r\n\t\t\tthis.y += v.y * s;\r\n\t\t\tthis.z += v.z * s;\r\n\t\t\tthis.w += v.w * s;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsub: function ( v, w ) {\r\n\r\n\t\t\tif ( w !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.x -= v.x;\r\n\t\t\tthis.y -= v.y;\r\n\t\t\tthis.z -= v.z;\r\n\t\t\tthis.w -= v.w;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsubScalar: function ( s ) {\r\n\r\n\t\t\tthis.x -= s;\r\n\t\t\tthis.y -= s;\r\n\t\t\tthis.z -= s;\r\n\t\t\tthis.w -= s;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsubVectors: function ( a, b ) {\r\n\r\n\t\t\tthis.x = a.x - b.x;\r\n\t\t\tthis.y = a.y - b.y;\r\n\t\t\tthis.z = a.z - b.z;\r\n\t\t\tthis.w = a.w - b.w;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\t\t\tthis.w *= scalar;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tapplyMatrix4: function ( m ) {\r\n\r\n\t\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\r\n\t\t\tvar e = m.elements;\r\n\r\n\t\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tdivideScalar: function ( scalar ) {\r\n\r\n\t\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t\t},\r\n\r\n\t\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t\t// q is assumed to be normalized\r\n\r\n\t\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\t\tthis.x = 1;\r\n\t\t\t\tthis.y = 0;\r\n\t\t\t\tthis.z = 0;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.x = q.x / s;\r\n\t\t\t\tthis.y = q.y / s;\r\n\t\t\t\tthis.z = q.z / s;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\t\tte = m.elements,\r\n\r\n\t\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\r\n\t\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\r\n\t\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t\t// singularity found\r\n\t\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\r\n\t\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\r\n\t\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\r\n\t\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\t\tangle = Math.PI;\r\n\r\n\t\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\t\tx = 0;\r\n\t\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\t\ty = 0;\r\n\t\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\r\n\t\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\r\n\t\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tmin: function ( v ) {\r\n\r\n\t\t\tthis.x = Math.min( this.x, v.x );\r\n\t\t\tthis.y = Math.min( this.y, v.y );\r\n\t\t\tthis.z = Math.min( this.z, v.z );\r\n\t\t\tthis.w = Math.min( this.w, v.w );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tmax: function ( v ) {\r\n\r\n\t\t\tthis.x = Math.max( this.x, v.x );\r\n\t\t\tthis.y = Math.max( this.y, v.y );\r\n\t\t\tthis.z = Math.max( this.z, v.z );\r\n\t\t\tthis.w = Math.max( this.w, v.w );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tclamp: function ( min, max ) {\r\n\r\n\t\t\t// assumes min < max, componentwise\r\n\r\n\t\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\t\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tclampScalar: function ( minVal, maxVal ) {\r\n\r\n\t\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\r\n\t\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\r\n\t\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\r\n\t\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tclampLength: function ( min, max ) {\r\n\r\n\t\t\tvar length = this.length();\r\n\r\n\t\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n\t\t},\r\n\r\n\t\tfloor: function () {\r\n\r\n\t\t\tthis.x = Math.floor( this.x );\r\n\t\t\tthis.y = Math.floor( this.y );\r\n\t\t\tthis.z = Math.floor( this.z );\r\n\t\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tceil: function () {\r\n\r\n\t\t\tthis.x = Math.ceil( this.x );\r\n\t\t\tthis.y = Math.ceil( this.y );\r\n\t\t\tthis.z = Math.ceil( this.z );\r\n\t\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tround: function () {\r\n\r\n\t\t\tthis.x = Math.round( this.x );\r\n\t\t\tthis.y = Math.round( this.y );\r\n\t\t\tthis.z = Math.round( this.z );\r\n\t\t\tthis.w = Math.round( this.w );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\troundToZero: function () {\r\n\r\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tnegate: function () {\r\n\r\n\t\t\tthis.x = - this.x;\r\n\t\t\tthis.y = - this.y;\r\n\t\t\tthis.z = - this.z;\r\n\t\t\tthis.w = - this.w;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tdot: function ( v ) {\r\n\r\n\t\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t\t},\r\n\r\n\t\tlengthSq: function () {\r\n\r\n\t\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t\t},\r\n\r\n\t\tlength: function () {\r\n\r\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t\t},\r\n\r\n\t\tmanhattanLength: function () {\r\n\r\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t\t},\r\n\r\n\t\tnormalize: function () {\r\n\r\n\t\t\treturn this.divideScalar( this.length() || 1 );\r\n\r\n\t\t},\r\n\r\n\t\tsetLength: function ( length ) {\r\n\r\n\t\t\treturn this.normalize().multiplyScalar( length );\r\n\r\n\t\t},\r\n\r\n\t\tlerp: function ( v, alpha ) {\r\n\r\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\t},\r\n\r\n\t\tequals: function ( v ) {\r\n\r\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t\t},\r\n\r\n\t\tfromArray: function ( array, offset ) {\r\n\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\t\tthis.x = array[ offset ];\r\n\t\t\tthis.y = array[ offset + 1 ];\r\n\t\t\tthis.z = array[ offset + 2 ];\r\n\t\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\ttoArray: function ( array, offset ) {\r\n\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\t\tarray[ offset ] = this.x;\r\n\t\t\tarray[ offset + 1 ] = this.y;\r\n\t\t\tarray[ offset + 2 ] = this.z;\r\n\t\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t},\r\n\r\n\t\tfromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'Vector4: offset has been removed from .fromBufferAttribute().' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.x = attribute.getX( index );\r\n\t\t\tthis.y = attribute.getY( index );\r\n\t\t\tthis.z = attribute.getZ( index );\r\n\t\t\tthis.w = attribute.getW( index );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\r\n\t\t\"_construct\" :function ( x, y, z, w ) {\r\n\r\n\t\t\tthis.x = x || 0;\r\n\t\t\tthis.y = y || 0;\r\n\t\t\tthis.z = z || 0;\r\n\t\t\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n/*\r\n\tObject.defineProperties( Vector4.prototype, {\r\n\r\n\t\t\"width\": {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this.z;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis.z = value;\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t\"height\": {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this.w;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis.w = value;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} );\r\n*/\r\n\r\n\treturn numerics.Vector4 = Vector4 ;\r\n\r\n});"]}