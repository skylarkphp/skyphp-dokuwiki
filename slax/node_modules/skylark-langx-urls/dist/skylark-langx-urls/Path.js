/**
 * skylark-langx-urls - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-types","skylark-langx-constructs/klass","./urls"],function(t,n,e){var s=n({_construct:function(){var n=this._={segments:null,hasLeading:!1,hasTrailing:!1};1==arguments.length&&t.isString(arguments[0])?this._parse(arguments[0]):t.isArray(arguments[0])&&(n.segments=arguments[0],n.hasLeading=arguments[1]||!1,n.hasTrailing=arguments[2]||!1,this._canonicalize())},_canonicalize:function(){for(var t,n=this._.segments,e=0;e<n.length;e++)if("."==n[e]||".."==n[e]){t=!0;break}if(t){var s=[];for(e=0;e<n.length;e++)".."==n[e]?0==s.length?this.hasLeading||s.push(n[e]):".."==s[s.length-1]?s.push(".."):s.pop():"."==n[e]&&1!=n.length||s.push(n[e]);if(s.length==n.length)return;this._.segments=s}},_length:function(t){return this._.segments.length},_parse:function(t){t||(t=".");var n=this._,e=t.split("/");"/"==t.charAt(0)&&(n.hasLeading=!0,e.shift()),"/"==t.charAt(t.length-1)&&(n.hasTrailing=!0,e.pop()),n.segments=e,n.path=t,this._canonicalize()},append:function(n){return t.isString(n)?this.appendPathStr(n):this.appendPath(n)},appendPath:function(t){if(t.isAbsolute())return t;var n=this.segments,e=t.segments,i=n.concat(e);return new s(i,this.hasLeading,t.hasTrailing)},appendPathStr:function(t){return t=new s(t||""),this.appendPath(t)},clone:function(){return new s(this.segments,this.hasLeading,this.hasTrailing)},endsWith:function(t){for(var n=this.segments,e=new s(t).segments;e.length>0&&n.length>0;)if(e.pop()!=n.pop())return!1;return!0},equals:function(t){var n=this._.segments,e=t._.segments;if(n.length!=e.length)return!1;for(var s=0;s<n.length;s++)if(e[s]!=n[s])return!1;return!0},firstSegment:function(t){return this._.segments[t||0]},getExtension:function(){var t=this._.extension,n=this._.path;return textension||(t=this._.extension=n.substr(n.lastIndexOf(".")+1)),t},getSegments:function(){return this.segments},getParentPath:function(){var t=this._.parentPath;if(!t){var n=this.segments;n.pop(),t=this._.parentPath=new s(n,this.hasLeading)}return t},getRoot:function(){},isAbsolute:function(){return this.hasLeading},lastSegment:function(){var t=this._.segments;return t[t.length-1]},matchingFirstSegments:function(t){for(var n=this.segments,e=t.segments,s=Math.min(n.length,e.length),i=0,r=0;r<s;r++){if(n[r]!=e[r])return i;i++}return i},normalize:function(){},removeFirstSegments:function(t){var n=this._.segments,e=this._.hasLeading;return hasTrailing=this._.hasTrailing,new s(n.slice(t,n.length),e,hasTrailing)},removeLastSegments:function(t){var n=this._.segments,e=this._.hasLeading;return hasTrailing=this._.hasTrailing,t||(t=1),new s(n.slice(0,n.length-t),e,hasTrailing)},removeMatchingFirstSegments:function(t){var n=this.matchingFirstSegments(t);return this.removeFirstSegments(n)},removeMatchingLastSegments:function(t){var n=this.matchingFirstSegments(anotherPath);return this.removeLastSegments(n)},removeRelative:function(){var t=this.segments;return t.length>0&&"."==t[1]?this.removeFirstSegments(1):this},relativeTo:function(t,n){"string"==typeof t&&(t=new s(t));var e=this.segments;if(this.isAbsolute())return this;var i=t.segments,r=this.matchingFirstSegments(t),h=i.length;n&&(h-=1);var a=h-r;if(0==a+e.length-r)return s.EMPTY;for(var g=[],u=0;u<a;u++)g.push("..");for(u=r;u<e.length;u++)g.push(e[u]);return new s(g,!1,this.hasTrailing)},segment:function(t){var n=this._.segments;return n.length<t?null:n[t]},startsWith:function(t){var n=this.matchingFirstSegments(t);return t._length()==n},toString:function(){var t=[],n=this._.segments;this.hasLeading&&t.push("/");for(var e=0;e<n.length;e++)e>0&&t.push("/"),t.push(n[e]);return this.hasTrailing&&t.push("/"),t.join("")},hasLeading:{get:function(){return this._.hasLeading}},hasTrailing:{get:function(){return this._.hasTrailing}}});return s.EMPTY=new s(""),e.Path=s});
//# sourceMappingURL=sourcemaps/Path.js.map
