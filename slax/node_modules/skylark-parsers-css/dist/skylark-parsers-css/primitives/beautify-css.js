/**
 * skylark-parsers-css - The skylark css utility library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define([],function(){function e(n,r){var i=(r=r||{}).indent_size||4,t=r.indent_char||" ",s=void 0===r.selector_separator_newline||r.selector_separator_newline,u=void 0!==r.end_with_newline&&r.end_with_newline;"string"==typeof i&&(i=parseInt(i,10));var a,p=/^\s+$/,c=-1;function h(){return(a=n.charAt(++c))||""}function f(e){var r=c;return e&&l(),result=n.charAt(c+1)||"",c=r-1,h(),result}function o(e){for(var r=c;h();)if("\\"===a)h();else{if(-1!==e.indexOf(a))break;if("\n"===a)break}return n.substring(r,c+1)}function l(){for(var e="";p.test(f());)h(),e+=a;return e}function g(){var e="";for(a&&p.test(a)&&(e=a);p.test(h());)e+=a;return e}function _(e){var r=c;e="/"===f();for(h();h();){if(!e&&"*"===a&&"/"===f()){h();break}if(e&&"\n"===a)return n.substring(r,c)}return n.substring(r,c)+a}function v(e){return n.substring(c-e.length,c).toLowerCase()===e}function w(){for(var e=c+1;e<n.length;e++){var r=n.charAt(e);if("{"===r)return!0;if(";"===r||"}"===r||")"===r)return!1}return!1}var L=n.match(/^[\t ]*/)[0],d=new Array(i+1).join(t),S=0,b=0;var m={"{":function(e){m.singleSpace(),O.push(e),m.newLine()},"}":function(e){m.newLine(),O.push(e),m.newLine()},_lastCharWhitespace:function(){return p.test(O[O.length-1])},newLine:function(e){e||m.trim(),O.length&&O.push("\n"),L&&O.push(L)},singleSpace:function(){O.length&&!m._lastCharWhitespace()&&O.push(" ")},trim:function(){for(;m._lastCharWhitespace();)O.pop()}},O=[];L&&O.push(L);for(var A,E,C,N=!1,R=!1,T="",U="";;){var k=g(),I=""!==k,y=-1!==k.indexOf("\n");U=T,T=a;if(!a)break;if("/"===a&&"*"===f()){var D=v("");m.newLine(),O.push(_()),m.newLine(),D&&m.newLine(!0)}else if("/"===a&&"/"===f())y||"{"===U||m.trim(),m.singleSpace(),O.push(_()),m.newLine();else if("@"===a){I&&m.singleSpace(),O.push(a);var $=(A=": ,;{}()[]/='\"",void 0,void 0,E=c,C=o(A),c=E-1,h(),C).replace(/\s$/,"");$ in e.NESTED_AT_RULE?(b+=1,$ in e.CONDITIONAL_GROUP_RULE&&(R=!0)):": ".indexOf($[$.length-1])>=0&&(h(),$=o(": ").replace(/\s$/,""),O.push($),m.singleSpace())}else"{"===a?"}"===f(!0)?(l(),h(),m.singleSpace(),O.push("{}")):(S++,L+=d,m["{"](a),R?(R=!1,N=S>b):N=S>=b):"}"===a?(S--,L=L.slice(0,-i),m["}"](a),N=!1,b&&b--):":"===a?(l(),!N&&!R||v("&")||w()?":"===f()?(h(),O.push("::")):O.push(":"):(O.push(":"),m.singleSpace())):'"'===a||"'"===a?(I&&m.singleSpace(),O.push(o(a))):";"===a?(O.push(a),m.newLine()):"("===a?v("url")?(O.push(a),l(),h()&&(")"!==a&&'"'!==a&&"'"!==a?O.push(o(")")):c--)):(I&&m.singleSpace(),O.push(a),l()):")"===a?O.push(a):","===a?(O.push(a),l(),!N&&s?m.newLine():m.singleSpace()):"]"===a?O.push(a):"["===a?(I&&m.singleSpace(),O.push(a)):"="===a?(l(),O.push(a)):(I&&m.singleSpace(),O.push(a))}var x=O.join("").replace(/[\r\n\t ]+$/,"");return u&&(x+="\n"),x}return e.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},e.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},{css_beautify:e}});
//# sourceMappingURL=../sourcemaps/primitives/beautify-css.js.map
