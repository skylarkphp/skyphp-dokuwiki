/**
 * skylark-parsers-javascript - The js features enhancement for skylark utils.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define([],function(){var exports,e,t,n,_={};function r(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function i(e){return e.replace(/^\s+|\s+$/g,"")}exports=_,e="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",t=new RegExp("["+e+"]"),n=new RegExp("["+e+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),exports.newline=/[\n\r\u2028\u2029]/,exports.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&t.test(String.fromCharCode(e)))},exports.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&n.test(String.fromCharCode(e))))};var a={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};var s=function(e,t,n,_,r,i){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=_||"",this.parent=null};return{js_beautify:function(e,t){"use strict";return new function(e,t){var n,o,l,c,d,f,E,T,h,p,u,R,K,x=[],m="";function b(e,t){var _=0;e&&(_=e.indentation_level,!n.just_added_newline()&&e.line_indent_level>_&&(_=e.line_indent_level));var r={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:_,line_indent_level:e?e.line_indent_level:_,start_line_index:n.get_line_number(),ternary_depth:0};return r}for(R={TK_START_EXPR:function(){L();var e=a.Expression;if("["===c.text){if("TK_WORD"===d||")"===T.last_text)return"TK_RESERVED"===d&&r(T.last_text,l.line_starters)&&(n.space_before_token=!0),g(e),v(),w(),void(K.space_in_paren&&(n.space_before_token=!0));e=a.ArrayLiteral,k(T.mode)&&("["!==T.last_text&&(","!==T.last_text||"]"!==f&&"}"!==f)||K.keep_array_indentation||y())}else"TK_RESERVED"===d&&"for"===T.last_text?e=a.ForInitializer:"TK_RESERVED"===d&&r(T.last_text,["if","while"])&&(e=a.Conditional);";"===T.last_text||"TK_START_BLOCK"===d?y():"TK_END_EXPR"===d||"TK_START_EXPR"===d||"TK_END_BLOCK"===d||"."===T.last_text?O(c.wanted_newline):"TK_RESERVED"===d&&"("===c.text||"TK_WORD"===d||"TK_OPERATOR"===d?"TK_RESERVED"===d&&("function"===T.last_word||"typeof"===T.last_word)||"*"===T.last_text&&"function"===f?K.space_after_anon_function&&(n.space_before_token=!0):"TK_RESERVED"!==d||!r(T.last_text,l.line_starters)&&"catch"!==T.last_text||K.space_before_conditional&&(n.space_before_token=!0):n.space_before_token=!0,"("===c.text&&("TK_EQUALS"!==d&&"TK_OPERATOR"!==d||C()||O()),g(e),v(),K.space_in_paren&&(n.space_before_token=!0),w()},TK_END_EXPR:function(){for(;T.mode===a.Statement;)N();T.multiline_frame&&O("]"===c.text&&k(T.mode)&&!K.keep_array_indentation),K.space_in_paren&&("TK_START_EXPR"!==d||K.space_in_empty_paren?n.space_before_token=!0:(n.trim(),n.space_before_token=!1)),"]"===c.text&&K.keep_array_indentation?(v(),N()):(N(),v()),n.remove_redundant_indentation(h),T.do_while&&h.mode===a.Conditional&&(h.mode=a.Expression,T.do_block=!1,T.do_while=!1)},TK_START_BLOCK:function(){var e=I(1),t=I(2);t&&(":"===t.text&&r(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||r(e.text,["get","set"])&&r(t.type,["TK_WORD","TK_RESERVED"]))?r(f,["class","interface"])?g(a.BlockStatement):g(a.ObjectLiteral):g(a.BlockStatement);var _=!e.comments_before.length&&"}"===e.text&&"function"===T.last_word&&"TK_END_EXPR"===d;"expand"===K.brace_style||"none"===K.brace_style&&c.wanted_newline?"TK_OPERATOR"!==d&&(_||"TK_EQUALS"===d||"TK_RESERVED"===d&&V(T.last_text)&&"else"!==T.last_text)?n.space_before_token=!0:y(!1,!0):"TK_OPERATOR"!==d&&"TK_START_EXPR"!==d?"TK_START_BLOCK"===d?y():n.space_before_token=!0:k(h.mode)&&","===T.last_text&&("}"===f?n.space_before_token=!0:y()),v(),w()},TK_END_BLOCK:function(){for(;T.mode===a.Statement;)N();var e="TK_START_BLOCK"===d;"expand"===K.brace_style?e||y():e||(k(T.mode)&&K.keep_array_indentation?(K.keep_array_indentation=!1,y(),K.keep_array_indentation=!0):y()),N(),v()},TK_WORD:P,TK_RESERVED:P,TK_SEMICOLON:function(){for(L()&&(n.space_before_token=!1);T.mode===a.Statement&&!T.if_block&&!T.do_block;)N();v()},TK_STRING:function(){L()?n.space_before_token=!0:"TK_RESERVED"===d||"TK_WORD"===d?n.space_before_token=!0:"TK_COMMA"===d||"TK_START_EXPR"===d||"TK_EQUALS"===d||"TK_OPERATOR"===d?C()||O():y(),v()},TK_EQUALS:function(){L(),T.declaration_statement&&(T.declaration_assignment=!0),n.space_before_token=!0,v(),n.space_before_token=!0},TK_OPERATOR:function(){if(L(),"TK_RESERVED"===d&&V(T.last_text))return n.space_before_token=!0,void v();if("*"!==c.text||"TK_DOT"!==d){if(":"===c.text&&T.in_case)return T.case_body=!0,w(),v(),y(),void(T.in_case=!1);if("::"!==c.text){!c.wanted_newline||"--"!==c.text&&"++"!==c.text||y(!1,!0),"TK_OPERATOR"===d&&O();var e=!0,t=!0;r(c.text,["--","++","!","~"])||r(c.text,["-","+"])&&(r(d,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||r(T.last_text,l.line_starters)||","===T.last_text)?(e=!1,t=!1,";"===T.last_text&&D(T.mode)&&(e=!0),"TK_RESERVED"===d||"TK_END_EXPR"===d?e=!0:"TK_OPERATOR"===d&&(e=r(c.text,["--","-"])&&r(T.last_text,["--","-"])||r(c.text,["++","+"])&&r(T.last_text,["++","+"])),T.mode!==a.BlockStatement&&T.mode!==a.Statement||"{"!==T.last_text&&";"!==T.last_text||y()):":"===c.text?0===T.ternary_depth?e=!1:T.ternary_depth-=1:"?"===c.text?T.ternary_depth+=1:"*"===c.text&&"TK_RESERVED"===d&&"function"===T.last_text&&(e=!1,t=!1),n.space_before_token=n.space_before_token||e,v(),n.space_before_token=t}else v()}else v()},TK_COMMA:function(){if(T.declaration_statement)return D(T.parent.mode)&&(T.declaration_assignment=!1),v(),void(T.declaration_assignment?(T.declaration_assignment=!1,y(!1,!0)):n.space_before_token=!0);v(),T.mode===a.ObjectLiteral||T.mode===a.Statement&&T.parent.mode===a.ObjectLiteral?(T.mode===a.Statement&&N(),y()):n.space_before_token=!0},TK_BLOCK_COMMENT:function(){var e,t=function(e){for(var t=[],n=(e=e.replace(/\x0d/g,"")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}(c.text),_=!1,r=!1,a=c.whitespace_before,s=a.length;for(y(!1,!0),t.length>1&&(function(e,t){for(var n=0;n<e.length;n++){var _=i(e[n]);if(_.charAt(0)!==t)return!1}return!0}(t.slice(1),"*")?_=!0:function(e,t){for(var n,_=0,r=e.length;_<r;_++)if((n=e[_])&&0!==n.indexOf(t))return!1;return!0}(t.slice(1),a)&&(r=!0)),v(t[0]),e=1;e<t.length;e++)y(!1,!0),_?v(" "+i(t[e])):r&&t[e].length>s?v(t[e].substring(s)):n.add_token(t[e]);y(!1,!0)},TK_INLINE_COMMENT:function(){n.space_before_token=!0,v(),n.space_before_token=!0},TK_COMMENT:function(){c.wanted_newline?y(!1,!0):n.trim(!0),n.space_before_token=!0,v(),y(!1,!0)},TK_DOT:function(){L(),"TK_RESERVED"===d&&V(T.last_text)?n.space_before_token=!0:O(")"===T.last_text&&K.break_chained_methods),v()},TK_UNKNOWN:function(){v(),"\n"===c.text[c.text.length-1]&&y()},TK_EOF:function(){for(;T.mode===a.Statement;)N()}},K={},void 0!==(t=t||{}).braces_on_own_line&&(K.brace_style=t.braces_on_own_line?"expand":"collapse"),K.brace_style=t.brace_style?t.brace_style:K.brace_style?K.brace_style:"collapse","expand-strict"===K.brace_style&&(K.brace_style="expand"),K.indent_size=t.indent_size?parseInt(t.indent_size,10):4,K.indent_char=t.indent_char?t.indent_char:" ",K.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,K.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,K.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),K.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,K.space_in_empty_paren=void 0!==t.space_in_empty_paren&&t.space_in_empty_paren,K.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,K.space_after_anon_function=void 0!==t.space_after_anon_function&&t.space_after_anon_function,K.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,K.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,K.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,K.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),K.e4x=void 0!==t.e4x&&t.e4x,K.end_with_newline=void 0!==t.end_with_newline&&t.end_with_newline,K.jslint_happy&&(K.space_after_anon_function=!0),t.indent_with_tabs&&(K.indent_char="\t",K.indent_size=1),E="";K.indent_size>0;)E+=K.indent_char,K.indent_size-=1;var A=0;if(e&&e.length){for(;" "===e.charAt(A)||"\t"===e.charAt(A);)m+=e.charAt(A),A+=1;e=e.substring(A)}function S(e){var t=e.newlines,n=K.keep_array_indentation&&k(T.mode);if(n)for(_=0;_<t;_+=1)y(_>0);else if(K.max_preserve_newlines&&t>K.max_preserve_newlines&&(t=K.max_preserve_newlines),K.preserve_newlines&&e.newlines>1){y();for(var _=1;_<t;_+=1)y(!0)}R[(c=e).type]()}function O(e){if(e=void 0!==e&&e,!n.just_added_newline())if(K.preserve_newlines&&c.wanted_newline||e)y(!1,!0);else if(K.wrap_line_length){var t=n.current_line.get_character_count()+c.text.length+(n.space_before_token?1:0);t>=K.wrap_line_length&&y(!1,!0)}}function y(e,t){if(!t&&";"!==T.last_text&&","!==T.last_text&&"="!==T.last_text&&"TK_OPERATOR"!==d)for(;T.mode===a.Statement&&!T.if_block&&!T.do_block;)N();n.add_new_line(e)&&(T.multiline_frame=!0)}function v(e){e=e||c.text,n.just_added_newline()&&(K.keep_array_indentation&&k(T.mode)&&c.wanted_newline?(n.current_line.push(c.whitespace_before),n.space_before_token=!1):n.set_indent(T.indentation_level)&&(T.line_indent_level=T.indentation_level)),n.add_token(e)}function w(){T.indentation_level+=1}function g(e){T?(p.push(T),h=T):h=b(null,e),T=b(h,e)}function k(e){return e===a.ArrayLiteral}function D(e){return r(e,[a.Expression,a.ForInitializer,a.Conditional])}function N(){p.length>0&&(h=T,T=p.pop(),h.mode===a.Statement&&n.remove_redundant_indentation(h))}function C(){return T.parent.mode===a.ObjectLiteral&&T.mode===a.Statement&&(":"===T.last_text&&0===T.ternary_depth||"TK_RESERVED"===d&&r(T.last_text,["get","set"]))}function L(){return!!("TK_RESERVED"===d&&r(T.last_text,["var","let","const"])&&"TK_WORD"===c.type||"TK_RESERVED"===d&&"do"===T.last_text||"TK_RESERVED"===d&&"return"===T.last_text&&!c.wanted_newline||"TK_RESERVED"===d&&"else"===T.last_text&&("TK_RESERVED"!==c.type||"if"!==c.text)||"TK_END_EXPR"===d&&(h.mode===a.ForInitializer||h.mode===a.Conditional)||"TK_WORD"===d&&T.mode===a.BlockStatement&&!T.in_case&&"--"!==c.text&&"++"!==c.text&&"TK_WORD"!==c.type&&"TK_RESERVED"!==c.type||T.mode===a.ObjectLiteral&&(":"===T.last_text&&0===T.ternary_depth||"TK_RESERVED"===d&&r(T.last_text,["get","set"])))&&(g(a.Statement),w(),"TK_RESERVED"===d&&r(T.last_text,["var","let","const"])&&"TK_WORD"===c.type&&(T.declaration_statement=!0),C()||O("TK_RESERVED"===c.type&&r(c.text,["do","for","if","while"])),!0)}function V(e){return r(e,["case","return","do","if","throw","else"])}function I(e){var t=o+(e||0);return t<0||t>=x.length?null:x[t]}function P(){if("TK_RESERVED"===c.type&&T.mode!==a.ObjectLiteral&&r(c.text,["set","get"])&&(c.type="TK_WORD"),"TK_RESERVED"===c.type&&T.mode===a.ObjectLiteral){var e=I(1);":"==e.text&&(c.type="TK_WORD")}if(L()||!c.wanted_newline||D(T.mode)||"TK_OPERATOR"===d&&"--"!==T.last_text&&"++"!==T.last_text||"TK_EQUALS"===d||!K.preserve_newlines&&"TK_RESERVED"===d&&r(T.last_text,["var","let","const","set","get"])||y(),T.do_block&&!T.do_while){if("TK_RESERVED"===c.type&&"while"===c.text)return n.space_before_token=!0,v(),n.space_before_token=!0,void(T.do_while=!0);y(),T.do_block=!1}if(T.if_block)if(T.else_block||"TK_RESERVED"!==c.type||"else"!==c.text){for(;T.mode===a.Statement;)N();T.if_block=!1,T.else_block=!1}else T.else_block=!0;if("TK_RESERVED"===c.type&&("case"===c.text||"default"===c.text&&T.in_case_statement))return y(),(T.case_body||K.jslint_happy)&&(T.indentation_level>0&&(!T.parent||T.indentation_level>T.parent.indentation_level)&&(T.indentation_level-=1),T.case_body=!1),v(),T.in_case=!0,void(T.in_case_statement=!0);if("TK_RESERVED"===c.type&&"function"===c.text&&((r(T.last_text,["}",";"])||n.just_added_newline()&&!r(T.last_text,["[","{",":","=",","]))&&(n.just_added_blankline()||c.comments_before.length||(y(),y(!0))),"TK_RESERVED"===d||"TK_WORD"===d?"TK_RESERVED"===d&&r(T.last_text,["get","set","new","return","export"])?n.space_before_token=!0:"TK_RESERVED"===d&&"default"===T.last_text&&"export"===f?n.space_before_token=!0:y():"TK_OPERATOR"===d||"="===T.last_text?n.space_before_token=!0:(T.multiline_frame||!D(T.mode)&&!k(T.mode))&&y()),"TK_COMMA"!==d&&"TK_START_EXPR"!==d&&"TK_EQUALS"!==d&&"TK_OPERATOR"!==d||C()||O(),"TK_RESERVED"===c.type&&r(c.text,["function","get","set"]))return v(),void(T.last_word=c.text);if(u="NONE","TK_END_BLOCK"===d?"TK_RESERVED"===c.type&&r(c.text,["else","catch","finally"])?"expand"===K.brace_style||"end-expand"===K.brace_style||"none"===K.brace_style&&c.wanted_newline?u="NEWLINE":(u="SPACE",n.space_before_token=!0):u="NEWLINE":"TK_SEMICOLON"===d&&T.mode===a.BlockStatement?u="NEWLINE":"TK_SEMICOLON"===d&&D(T.mode)?u="SPACE":"TK_STRING"===d?u="NEWLINE":"TK_RESERVED"===d||"TK_WORD"===d||"*"===T.last_text&&"function"===f?u="SPACE":"TK_START_BLOCK"===d?u="NEWLINE":"TK_END_EXPR"===d&&(n.space_before_token=!0,u="NEWLINE"),"TK_RESERVED"===c.type&&r(c.text,l.line_starters)&&")"!==T.last_text&&(u="else"===T.last_text||"export"===T.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===c.type&&r(c.text,["else","catch","finally"]))if("TK_END_BLOCK"!==d||"expand"===K.brace_style||"end-expand"===K.brace_style||"none"===K.brace_style&&c.wanted_newline)y();else{n.trim(!0);var t=n.current_line;"}"!==t.last()&&y(),n.space_before_token=!0}else"NEWLINE"===u?"TK_RESERVED"===d&&V(T.last_text)?n.space_before_token=!0:"TK_END_EXPR"!==d?"TK_START_EXPR"===d&&"TK_RESERVED"===c.type&&r(c.text,["var","let","const"])||":"===T.last_text||("TK_RESERVED"===c.type&&"if"===c.text&&"else"===T.last_text?n.space_before_token=!0:y()):"TK_RESERVED"===c.type&&r(c.text,l.line_starters)&&")"!==T.last_text&&y():T.multiline_frame&&k(T.mode)&&","===T.last_text&&"}"===f?y():"SPACE"===u&&(n.space_before_token=!0);v(),T.last_word=c.text,"TK_RESERVED"===c.type&&"do"===c.text&&(T.do_block=!0),"TK_RESERVED"===c.type&&"if"===c.text&&(T.if_block=!0)}d="TK_START_BLOCK",f="",n=new function(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length;var n=[];this.baseIndentString=t,this.indent_string=e,this.current_line=null,this.space_before_token=!1,this.get_line_number=function(){return n.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.current_line=new function(e){var t=0,n=-1,_=[],r=!0;this.set_indent=function(_){t=e.baseIndentLength+_*e.indent_length,n=_},this.get_character_count=function(){return t},this.is_empty=function(){return r},this.last=function(){return this._empty?null:_[_.length-1]},this.push=function(e){_.push(e),t+=e.length,r=!1},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)_.pop(),t-=1;r=0===_.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=_.join("")),t}}(this),n.push(this.current_line),0))},this.add_new_line(!0),this.get_code=function(){var e=n.join("\n").replace(/[\r\n\t ]+$/,"");return e},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==a.ForInitializer&&e.mode!==a.Conditional)for(var t=e.start_line_index,_=n.length;t<_;)n[t].remove_indent(),t++},this.trim=function(_){for(_=void 0!==_&&_,this.current_line.trim(e,t);_&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim()},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===n.length)return!0;var e=n[n.length-2];return e.is_empty()}return!1}}(E,m),p=[],g(a.BlockStatement),this.beautify=function(){var t,a;for(l=new function(e,t,n){var a="\n\r\t ".split(""),o=/[0-9]/,l="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: => <%= <% %> <?= <? ?>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,yield,import,export".split(",");var c,d,f,E,T,h,p=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof"]);function u(){var u,R,K=[];if(c=0,d="",T>=h)return["","TK_EOF"];R=E.length?E[E.length-1]:new s("TK_START_BLOCK","{");var x=e.charAt(T);for(T+=1;r(x,a);){if("\n"===x?(c+=1,K=[]):c&&(x===n?K.push(n):"\r"!==x&&K.push(" ")),T>=h)return["","TK_EOF"];x=e.charAt(T),T+=1}if(K.length&&(d=K.join("")),o.test(x)){var m=!0,b=!0,A=o;for("0"===x&&T<h&&/[Xx]/.test(e.charAt(T))?(m=!1,b=!1,x+=e.charAt(T),T+=1,A=/[0123456789abcdefABCDEF]/):(x="",T-=1);T<h&&A.test(e.charAt(T));)x+=e.charAt(T),T+=1,m&&T<h&&"."===e.charAt(T)&&(x+=e.charAt(T),T+=1,m=!1),b&&T<h&&/[Ee]/.test(e.charAt(T))&&(x+=e.charAt(T),(T+=1)<h&&/[+-]/.test(e.charAt(T))&&(x+=e.charAt(T),T+=1),b=!1,m=!1);return[x,"TK_WORD"]}if(_.isIdentifierStart(e.charCodeAt(T-1))){if(T<h)for(;_.isIdentifierChar(e.charCodeAt(T))&&(x+=e.charAt(T),(T+=1)!==h););return"TK_DOT"===R.type||"TK_RESERVED"===R.type&&r(R.text,["set","get"])||!r(x,p)?[x,"TK_WORD"]:"in"===x?[x,"TK_OPERATOR"]:[x,"TK_RESERVED"]}if("("===x||"["===x)return[x,"TK_START_EXPR"];if(")"===x||"]"===x)return[x,"TK_END_EXPR"];if("{"===x)return[x,"TK_START_BLOCK"];if("}"===x)return[x,"TK_END_BLOCK"];if(";"===x)return[x,"TK_SEMICOLON"];if("/"===x){var S="",O=!0;if("*"===e.charAt(T)){if((T+=1)<h)for(;T<h&&("*"!==e.charAt(T)||!e.charAt(T+1)||"/"!==e.charAt(T+1))&&(x=e.charAt(T),S+=x,"\n"!==x&&"\r"!==x||(O=!1),!((T+=1)>=h)););return T+=2,O&&0===c?["/*"+S+"*/","TK_INLINE_COMMENT"]:["/*"+S+"*/","TK_BLOCK_COMMENT"]}if("/"===e.charAt(T)){for(S=x;"\r"!==e.charAt(T)&&"\n"!==e.charAt(T)&&(S+=e.charAt(T),!((T+=1)>=h)););return[S,"TK_COMMENT"]}}if("`"===x||"'"===x||'"'===x||("/"===x||t.e4x&&"<"===x&&e.slice(T-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_RESERVED"===R.type&&r(R.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===R.type&&")"===R.text&&R.parent&&"TK_RESERVED"===R.parent.type&&r(R.parent.text,["if","while","for"])||r(R.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var y=x,v=!1,w=!1;if(u=x,"/"===y)for(var g=!1;T<h&&(v||g||e.charAt(T)!==y)&&!_.newline.test(e.charAt(T));)u+=e.charAt(T),v?v=!1:(v="\\"===e.charAt(T),"["===e.charAt(T)?g=!0:"]"===e.charAt(T)&&(g=!1)),T+=1;else if(t.e4x&&"<"===y){var k=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,D=e.slice(T-1),N=k.exec(D);if(N&&0===N.index){for(var C=N[2],L=0;N;){var V=!!N[1],I=N[2],P=!!N[N.length-1]||"![CDATA["===I.slice(0,8);if(I!==C||P||(V?--L:++L),L<=0)break;N=k.exec(D)}var M=N?N.index+N[0].length:D.length;return T+=M-1,[D.slice(0,M),"TK_STRING"]}}else for(;T<h&&(v||e.charAt(T)!==y&&("`"===y||!_.newline.test(e.charAt(T))));)u+=e.charAt(T),v?("x"!==e.charAt(T)&&"u"!==e.charAt(T)||(w=!0),v=!1):v="\\"===e.charAt(T),T+=1;if(w&&t.unescape_strings&&(u=function(e){for(var t,n=!1,_="",r=0,i="",a=0;n||r<e.length;)if(t=e.charAt(r),r++,n){if(n=!1,"x"===t)i=e.substr(r,2),r+=2;else{if("u"!==t){_+="\\"+t;continue}i=e.substr(r,4),r+=4}if(!i.match(/^[0123456789abcdefABCDEF]+$/))return e;if((a=parseInt(i,16))>=0&&a<32){_+="x"===t?"\\x"+i:"\\u"+i;continue}if(34===a||39===a||92===a)_+="\\"+String.fromCharCode(a);else{if("x"===t&&a>126&&a<=255)return e;_+=String.fromCharCode(a)}}else"\\"===t?n=!0:_+=t;return _}(u)),T<h&&e.charAt(T)===y&&(u+=y,T+=1,"/"===y))for(;T<h&&_.isIdentifierStart(e.charCodeAt(T));)u+=e.charAt(T),T+=1;return[u,"TK_STRING"]}if("#"===x){if(0===E.length&&"!"===e.charAt(T)){for(u=x;T<h&&"\n"!==x;)x=e.charAt(T),u+=x,T+=1;return[i(u)+"\n","TK_UNKNOWN"]}var B="#";if(T<h&&o.test(e.charAt(T))){do{x=e.charAt(T),B+=x,T+=1}while(T<h&&"#"!==x&&"="!==x);return"#"===x||("["===e.charAt(T)&&"]"===e.charAt(T+1)?(B+="[]",T+=2):"{"===e.charAt(T)&&"}"===e.charAt(T+1)&&(B+="{}",T+=2)),[B,"TK_WORD"]}}if("<"===x&&"\x3c!--"===e.substring(T-1,T+3)){for(T+=3,x="\x3c!--";"\n"!==e.charAt(T)&&T<h;)x+=e.charAt(T),T++;return f=!0,[x,"TK_COMMENT"]}if("-"===x&&f&&"--\x3e"===e.substring(T-1,T+2))return f=!1,T+=2,["--\x3e","TK_COMMENT"];if("."===x)return[x,"TK_DOT"];if(r(x,l)){for(;T<h&&r(x+e.charAt(T),l)&&(x+=e.charAt(T),!((T+=1)>=h)););return","===x?[x,"TK_COMMA"]:"="===x?[x,"TK_EQUALS"]:[x,"TK_OPERATOR"]}return[x,"TK_UNKNOWN"]}this.tokenize=function(){var t,n,_;h=e.length,T=0,f=!1,E=[];for(var r=null,i=[],a=[];!n||"TK_EOF"!==n.type;){for(_=u(),t=new s(_[1],_[0],c,d);"TK_INLINE_COMMENT"===t.type||"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)a.push(t),_=u(),t=new s(_[1],_[0],c,d);a.length&&(t.comments_before=a,a=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=n,r=t,i.push(t)):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&r&&("]"===t.text&&"["===r.text||")"===t.text&&"("===r.text||"}"===t.text&&"}"===r.text)&&(t.parent=r.parent,r=i.pop()),E.push(t),n=t}return E}}(e,K,E),x=l.tokenize(),o=0;t=I();){for(var c=0;c<t.comments_before.length;c++)S(t.comments_before[c]);S(t),f=T.last_text,d=t.type,T.last_text=t.text,o+=1}return a=n.get_code(),K.end_with_newline&&(a+="\n"),a}}(e,t).beautify()}}});
//# sourceMappingURL=../sourcemaps/primitives/beautify-js.js.map
