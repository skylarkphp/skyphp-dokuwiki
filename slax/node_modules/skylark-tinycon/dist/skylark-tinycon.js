/**
 * skylark-tinycon - A version of tinycon that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.2
 * @link https://github.com/skylark-integration/skylark-tinycon/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,r="function"==typeof n&&n.amd,o=!r&&"undefined"!=typeof exports;if(!r&&!n){var i={};n=t.define=function(e,t,n){"function"==typeof n?(i[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),r=e.split("/");n.pop();for(var o=0;o<r.length;o++)"."!=r[o]&&(".."==r[o]?n.pop():n.push(r[o]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):i[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!i.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=i[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-tinycon/tinycon",["skylark-langx-ns"],function(e){var t,n={},r=null,o=null,i=null,a=null,l={},u=window.devicePixelRatio||1,c=16*u,f={width:7,height:9,font:10*u+"px arial",color:"#ffffff",background:"#F03D25",fallback:!0,crossOrigin:!0,abbreviate:!0},s=(t=navigator.userAgent.toLowerCase(),function(e){return-1!==t.indexOf(e)}),d={ie:s("trident"),chrome:s("chrome"),webkit:s("chrome")||s("safari"),safari:s("safari")&&!s("chrome"),mozilla:s("mozilla")&&!s("chrome")&&!s("safari")},h=function(){if(!o||!r){var e=function(){for(var e=document.getElementsByTagName("link"),t=0,n=e.length;t<n;t++)if((e[t].getAttribute("rel")||"").match(/\bicon\b/i))return e[t];return!1}();r=e?e.getAttribute("href"):"/favicon.ico",o||(o=r)}return r},m=function(){return a||((a=document.createElement("canvas")).width=c,a.height=c),a},g=function(e){if(e){!function(){for(var e=document.getElementsByTagName("link"),t=document.getElementsByTagName("head")[0],n=0,r=e.length;n<r;n++){var o=void 0!==e[n];o&&(e[n].getAttribute("rel")||"").match(/\bicon\b/i)&&t.removeChild(e[n])}}();var t=document.createElement("link");t.type="image/x-icon",t.rel="icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}},v=function(e){if(l.fallback){var t=document.title;"("===t[0]&&(t=t.slice(t.indexOf(" "))),document.title=(e+"").length>0?"("+e+") "+t:t}},y=function(e,t,n){"number"==typeof t&&t>99&&l.abbreviate&&(t=p(t));var r=(t+"").length-1,o=l.width*u+6*u*r,i=l.height*u,a=c-i,f=c-o-u,s=16*u,h=16*u,m=2*u;e.font=(d.webkit?"bold ":"")+l.font,e.fillStyle=l.background,e.strokeStyle=l.background,e.lineWidth=u,e.beginPath(),e.moveTo(f+m,a),e.quadraticCurveTo(f,a,f,a+m),e.lineTo(f,s-m),e.quadraticCurveTo(f,s,f+m,s),e.lineTo(h-m,s),e.quadraticCurveTo(h,s,h,s-m),e.lineTo(h,a+m),e.quadraticCurveTo(h,a,h-m,a),e.closePath(),e.fill(),e.beginPath(),e.strokeStyle="rgba(0,0,0,0.3)",e.moveTo(f+m/2,s),e.lineTo(h-m/2,s),e.stroke(),e.fillStyle=l.color,e.textAlign="right",e.textBaseline="top",e.fillText(t,2===u?29:15,d.mozilla?7*u:6*u)},k=function(){m().getContext&&g(m().toDataURL())},p=function(e){for(var t=[["G",1e9],["M",1e6],["k",1e3]],n=0;n<t.length;++n)if(e>=t[n][1]){e=b(e/t[n][1])+t[n][0];break}return e},b=function(e,t){var n=new Number(e);return n.toFixed(t)};return n.setOptions=function(e){for(var t in l={},e.colour&&(e.color=e.colour),f)l[t]=e.hasOwnProperty(t)?e[t]:f[t];return this},n.setImage=function(e){return r=e,k(),this},n.setBubble=function(e,t){return function(e,t){if(!m().getContext||d.ie||d.safari||"force"===l.fallback)return v(e);var n=m().getContext("2d"),t=t||"#000000",r=h();(i=document.createElement("img")).onload=function(){n.clearRect(0,0,c,c),n.drawImage(i,0,0,i.width,i.height,0,0,c,c),(e+"").length>0&&y(n,e,t),k()},!r.match(/^data/)&&l.crossOrigin&&(i.crossOrigin="anonymous");i.src=r}(e=e||"",t),this},n.reset=function(){r=o,g(o)},n.setOptions(f),e.attach("itg.tinycon",n)}),e("skylark-tinycon/main",["./tinycon"],function(e){return e}),e("skylark-tinycon",["skylark-tinycon/main"],function(e){return e})}(n),!r){var a=require("skylark-langx-ns");o?module.exports=a:t.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-tinycon.js.map
