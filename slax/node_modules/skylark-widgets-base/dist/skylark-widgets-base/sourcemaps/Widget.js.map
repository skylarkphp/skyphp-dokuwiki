{"version":3,"sources":["widget.js"],"names":["define","skylark","types","objects","events","Vector2","browser","datax","eventer","noder","files","geom","elmx","$","fx","plugins","HashMap","base","SkinManager","NativeEvents","drag","dragend","dragenter","dragexit","dragleave","dragover","dragstart","drop","abort","change","selectionchange","submit","reset","fullscreenchange","fullscreenerror","focus","blur","focusin","focusout","keydown","keypress","keyup","message","click","contextmenu","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","progress","textInput","tap","touchstart","touchmove","touchend","load","resize","select","scroll","unload","wheel","Plugin","Widget","inherit","klassName","_construct","parent","elm","options","element","isHtmlNode","this","_parse","isString","tagName","overrided","_velm","_elm","_create","Object","defineProperty","value","state","visible","size","location","_mode","TOP_LEFT","_init","addonCategoryOptions","addons","constructor","categoryName","i","length","addonOption","addonName","addonSetting","addonCtor","ctor","addon","isPlainObject","name","setParent","isInDocument","_startup","optionsAttr","data","options1","eval","mixin","template","createElement","style","position","overflow","Error","self","widgetClass","addClass","on","e","args","_refresh","isNativeEvent","isArray","selector","callback","ctx","one","el_","prototype","call","off","listenTo","obj","event","nodeType","unlistenTo","updateLocation","mode","undefined","TOP_RIGHT","top","y","bottom","BOTTOM_LEFT","left","x","right","updateSize","width","height","setVisibility","updateVisibility","display","updates","mapping","attributs","properties","styles","setting","_addons","settings","category","clone","render","getEnclosing","getEnclosed","children","ArrayList","getSkin","get","show","hide","ex","enable","set","disable","hasClass","offset","pagePosition","outerWidth","marginSize","outerHeight","removeClass","toggleClass","aria","getEl","ariaTarget","_aria","setAttribute","attr","velm","ret","getAttr","setAttr","removeAttr","center","css","getStyle","setStyle","getData","setData","getParent","v","_parent","oldParent","mount","_setupChild","unmount","prop","getProp","setProp","throb","params","throbber","defaults","update","target","toElm","before","after","prepend","append","remove","preventDragEvents","ondrop","preventDefault","ondragover","setAltText","altText","document","alignItems","zIndex","border","borderRadius","color","Editor","theme","textColor","backgroundColor","barColor","borderColor","body","appendChild","text","createTextNode","destroyFunction","destroy","contains","removeChild","pointerEvents","onmousemove","clientX","clientY","onmouseout","setOnClick","onclick","removeAllChildren","firstChild","setMode","console","warn","updateInterface","updatePosition","attachTo","_attachTo","detach","BOTTOM_RIGHT","meta","apply","arguments","addStatePropMethod","pluginName","register","widgetName"],"mappings":"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","file":"../widget.js","sourcesContent":["define([\r\n  \"skylark-langx-ns\",\r\n  \"skylark-langx-types\",\r\n  \"skylark-langx-objects\",\r\n  \"skylark-langx-events\",\r\n  \"skylark-langx-numerics/vector2\",\r\n  \"skylark-domx-browser\",\r\n  \"skylark-domx-data\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-files\",\r\n  \"skylark-domx-geom\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-fx\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"skylark-data-collection/hash-map\",\r\n  \"./base\",\r\n  \"./skins/skin-manager\"\r\n],function(skylark,types,objects,events,Vector2,browser,datax,eventer,noder,files,geom,elmx,$,fx, plugins,HashMap,base,SkinManager){\r\n\r\n     const NativeEvents = {\r\n            \"drag\": 2, // DragEvent\r\n            \"dragend\": 2, // DragEvent\r\n            \"dragenter\": 2, // DragEvent\r\n            \"dragexit\": 2, // DragEvent\r\n            \"dragleave\": 2, // DragEvent\r\n            \"dragover\": 2, // DragEvent\r\n            \"dragstart\": 2, // DragEvent\r\n            \"drop\": 2, // DragEvent\r\n\r\n            \"abort\": 3, // Event\r\n            \"change\": 3, // Event\r\n            ///\"error\": 3, // Event\r\n            \"selectionchange\": 3, // Event\r\n            \"submit\": 3, // Event\r\n            \"reset\": 3, // Event\r\n            'fullscreenchange':3,\r\n            'fullscreenerror':3,\r\n\r\n/*\r\n            'disablepictureinpicturechanged':3,\r\n            'ended':3,\r\n            'enterpictureinpicture':3,\r\n            'durationchange':3,\r\n            'leavepictureinpicture':3,\r\n            'loadstart' : 3,\r\n            'loadedmetadata':3,\r\n            'pause' : 3,\r\n            'play':3,\r\n            'posterchange':3,\r\n            'ratechange':3,\r\n            'seeking' : 3,\r\n            'sourceset':3,\r\n            'suspend':3,\r\n            'textdata':3,\r\n            'texttrackchange':3,\r\n            'timeupdate':3,\r\n            'volumechange':3,\r\n            'waiting' : 3,\r\n*/\r\n\r\n\r\n            \"focus\": 4, // FocusEvent\r\n            \"blur\": 4, // FocusEvent\r\n            \"focusin\": 4, // FocusEvent\r\n            \"focusout\": 4, // FocusEvent\r\n\r\n            \"keydown\": 5, // KeyboardEvent\r\n            \"keypress\": 5, // KeyboardEvent\r\n            \"keyup\": 5, // KeyboardEvent\r\n\r\n            \"message\": 6, // MessageEvent\r\n\r\n            \"click\": 7, // MouseEvent\r\n            \"contextmenu\": 7, // MouseEvent\r\n            \"dblclick\": 7, // MouseEvent\r\n            \"mousedown\": 7, // MouseEvent\r\n            \"mouseup\": 7, // MouseEvent\r\n            \"mousemove\": 7, // MouseEvent\r\n            \"mouseover\": 7, // MouseEvent\r\n            \"mouseout\": 7, // MouseEvent\r\n            \"mouseenter\": 7, // MouseEvent\r\n            \"mouseleave\": 7, // MouseEvent\r\n\r\n\r\n            \"progress\" : 11, //ProgressEvent\r\n\r\n            \"textInput\": 12, // TextEvent\r\n\r\n            \"tap\": 13,\r\n            \"touchstart\": 13, // TouchEvent\r\n            \"touchmove\": 13, // TouchEvent\r\n            \"touchend\": 13, // TouchEvent\r\n\r\n            \"load\": 14, // UIEvent\r\n            \"resize\": 14, // UIEvent\r\n            \"select\": 14, // UIEvent\r\n            \"scroll\": 14, // UIEvent\r\n            \"unload\": 14, // UIEvent,\r\n\r\n            \"wheel\": 15, // WheelEvent\r\n\r\n    };\r\n \r\n  const Plugin = plugins.Plugin;\r\n\r\n  var Widget = Plugin.inherit({\r\n    klassName: \"Widget\",\r\n\r\n    _construct : function(parent,elm,options) {\r\n        if (parent && !(parent instanceof Widget || parent.element)) {\r\n           options = elm;\r\n           elm = parent;\r\n           parent = null;\r\n        }\r\n        if (types.isHtmlNode(elm)) {\r\n          options = this._parse(elm,options);\r\n        } else {\r\n          options = elm;\r\n          elm = null;\r\n        }\r\n        if (types.isString(options)) {\r\n          options = {\r\n            tagName : options\r\n          };\r\n        }\r\n        this.overrided(elm,options);\r\n\r\n        if (!elm) {\r\n          this._velm = this._create();\r\n          this._elm = this._velm.elm();\r\n        } else {\r\n          this._velm = this.elmx(this._elm);\r\n        }\r\n        \r\n        Object.defineProperty(this,\"state\",{\r\n          value :this.options.state || new HashMap()\r\n        });\r\n\r\n        /** \r\n         * True if the element is visible.\r\n         *\r\n         * @attribute visible\r\n         * @type {Boolean}\r\n         */\r\n        this.visible = true;\r\n        \r\n\r\n        //this.element.style.position = \"absolute\";\r\n        //this.element.style.overflow = \"hidden\";\r\n\r\n        /**\r\n         * Size of this component in px.\r\n         *\r\n         * @attribute size\r\n         * @type {Vector2}\r\n         */\r\n        this.size = new Vector2(0, 0);\r\n        \r\n        /**\r\n         * Location of this component relatively to its parent in px.\r\n         *\r\n         * @attribute location\r\n         * @type {Vector2}\r\n         */\r\n        this.location = new Vector2(0, 0);\r\n\r\n        /**\r\n         * Locationing mode, indicates how to anchor the component.\r\n         *\r\n         * @attribute mode\r\n         * @type {Number}\r\n         */\r\n        this._mode = Widget.TOP_LEFT;\r\n     \r\n        //this.state = this.options.state || new Map();\r\n        this._init();\r\n\r\n        let addonCategoryOptions = this.options.addons;\r\n        if (addonCategoryOptions) {\r\n          let widgetCtor = this.constructor,\r\n              addons = widgetCtor.addons;\r\n          for (let categoryName in addonCategoryOptions) {\r\n              for (let i =0;i < addonCategoryOptions[categoryName].length; i++ ) {\r\n                let addonOption = addonCategoryOptions[categoryName][i];\r\n                if (types.isString(addonOption)) {\r\n                  let addonName = addonOption,\r\n                      addonSetting = addons[categoryName][addonName],\r\n                      addonCtor = addonSetting.ctor ? addonSetting.ctor : addonSetting;\r\n\r\n                  this.addon(addonCtor,addonSetting.options);\r\n\r\n                } else if (types.isPlainObject(addonOption)) {  \r\n                  let addonName = addonOption.name,\r\n                      addonSetting = addons[categoryName][addonName],\r\n                      addonCtor = addonSetting.ctor ? addonSetting.ctor : addonSetting;\r\n\r\n                  this.addon(addonCtor,addonOption.options);\r\n                }\r\n\r\n              }\r\n          }\r\n        }\r\n\r\n        //if (this._elm.parentElement) {\r\n        //  // The widget is already in document\r\n        //  this._startup();\r\n        //}\r\n\r\n        if (parent) {\r\n          this.setParent(parent);\r\n        } else if (this._velm.isInDocument()) {\r\n          this._startup();\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Parses widget options from attached element.\r\n     * This is a callback method called by constructor when attached element is specified.\r\n     * @method _parse\r\n     * @return {Object} options.\r\n     */\r\n    _parse : function(elm,options) {\r\n      var optionsAttr = datax.data(elm,\"options\");\r\n      if (optionsAttr) {\r\n         //var options1 = JSON.parse(\"{\" + optionsAttr + \"}\");\r\n         var options1 = eval(\"({\" + optionsAttr + \"})\");\r\n         options = objects.mixin(options1,options); \r\n      }\r\n      return options || {};\r\n    },\r\n\r\n    /**\r\n     * Create html element for this widget.\r\n     * This is a callback method called by constructor when attached element is not specified.\r\n     * @method _create\r\n     */\r\n    _create : function() {\r\n        var template = this.options.template;\r\n        if (template) {\r\n          return this.elmx(template);\r\n        } else {\r\n          var tagName = this.options.tagName;\r\n          if (tagName) {\r\n            return this.elmx(noder.createElement(tagName,{\r\n              style : {\r\n                position : \"absolute\",\r\n                overflow : \"hidden\"\r\n              }\r\n            }))\r\n          } else {\r\n            throw new Error(\"The template or tagName is not existed in options!\");\r\n          }\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * Init widget.\r\n     * This is a callback method called by constructor.\r\n     * @method _init\r\n     */\r\n    _init : function() {\r\n      var self = this;\r\n      if (this.widgetClass) {\r\n        this._velm.addClass(this.widgetClass);\r\n      }\r\n      this.state.on(\"changed\",function(e,args) {\r\n        self._refresh(args.data);\r\n      });\r\n    },\r\n\r\n\r\n    /**\r\n     * Startup widget.\r\n     * This is a callback method called when widget element is added into dom.\r\n     * @method _post\r\n     */\r\n    _startup : function() {\r\n\r\n    },\r\n\r\n\r\n    isNativeEvent : function(events) {\r\n        if (types.isString(events)) {\r\n            return !!NativeEvents[events];\r\n        } else if (types.isArray(events)) {\r\n            for (var i=0; i<events.length; i++) {\r\n                if (NativeEvents[events[i]]) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }            \r\n\r\n    },   \r\n\r\n    on : function(events, selector, data, callback, ctx, /*used internally*/ one) {\r\n        if (this.el_ && this.isNativeEvent(events)) {\r\n            eventer.on(this.el_,events,selector,data,callback,ctx,one);\r\n        } else {\r\n            Plugin.prototype.on.call(this,events, selector, data, callback, ctx,  one);\r\n        }\r\n    },   \r\n\r\n    off : function(events, callback) {\r\n        if (this.el_ && this.isNativeEvent(events)) {\r\n            eventer.off(this.el_,events,callback);\r\n        } else {\r\n            Plugin.prototype.off.call(this,events,callback);\r\n        }\r\n    },\r\n\r\n    listenTo : function(obj, event, callback, /*used internally*/ one) {\r\n        if (types.isString(obj) || types.isArray(obj)) {\r\n            one = callback;\r\n            callback = event;\r\n            event = obj;\r\n            if (this.el_ && this.isNativeEvent(event)) {\r\n                eventer.on(this.el_,event,callback,this,one);\r\n            } else {\r\n                this.on(event,callback,this,one);\r\n            }\r\n        } else {\r\n            if (obj.nodeType) {\r\n                eventer.on(obj,event,callback,this,one)\r\n            } else {\r\n                Plugin.prototype.listenTo.call(this,obj,event,callback,one)\r\n            }                \r\n        }\r\n    },\r\n\r\n    unlistenTo : function(obj, event, callback) {\r\n        if (types.isString(obj) || types.isArray(obj)) {\r\n            callback = event;\r\n            event = obj;\r\n            if (this.el_ && this.isNativeEvent(event)) {\r\n                eventer.off(this.el_,event,callback);\r\n            } else {\r\n                this.off(event,callback);                   \r\n            }\r\n        } else {\r\n            if (obj.nodeType) {\r\n                eventer.off(obj,event,callback)\r\n            } else {\r\n                Plugin.prototype.unlistenTo.call(this,obj,event,callback)\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Update the location of this widget.\r\n     * \r\n     * @method updateLocation\r\n     */\r\n    updateLocation : function(mode) {\r\n      if(mode !== undefined) {\r\n        this._mode = mode;\r\n      }\r\n\r\n      if(this._mode === Widget.TOP_LEFT || this._mode === Widget.TOP_RIGHT) {\r\n        this._elm.style.top = this.location.y + \"px\";\r\n      } else {\r\n        this._elm.style.bottom = this.location.y + \"px\";\r\n      }\r\n\r\n      if(this._mode === Widget.TOP_LEFT || this._mode === Widget.BOTTOM_LEFT) {\r\n        this._elm.style.left = this.location.x + \"px\";\r\n      } else {\r\n        this._elm.style.right = this.location.x + \"px\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Update the size of this widget.\r\n     * \r\n     * @method updateSize\r\n     */\r\n    updateSize : function(){\r\n      this._elm.style.width = this.size.x + \"px\";\r\n      this._elm.style.height = this.size.y + \"px\";\r\n    },\r\n\r\n\r\n    /**\r\n     * Update visibility of this element.\r\n     *\r\n     * @method setVisibility\r\n     */\r\n    setVisibility : function(visible)   {\r\n      this.visible = visible;\r\n      this.updateVisibility();\r\n    },\r\n\r\n\r\n    /**\r\n     * Update the visibility of this widget.\r\n     *\r\n     * @method updateVisibility\r\n     */\r\n    updateVisibility : function() {\r\n      this._elm.style.display = this.visible ? \"block\" : \"none\";\r\n    },\r\n\r\n\r\n    /**\r\n     * Refresh widget.\r\n     * This is a callback method called when widget state is changed.\r\n     * @method _refresh\r\n     */\r\n    _refresh : function(updates) {\r\n      /*\r\n      var _ = this._,\r\n          model = _.model,\r\n          dom = _.dom,\r\n          props = {\r\n\r\n          };\r\n      updates = updates || {};\r\n      for (var attrName in updates){\r\n          var v = updates[attrName].value;\r\n          if (v && v.toCss) {\r\n              v.toCss(props);\r\n              updates[attrName].processed = true;\r\n          }\r\n\r\n      };\r\n\r\n      this.css(props);\r\n\r\n      if (updates[\"disabled\"]) {\r\n          var v = updates[\"disabled\"].value;\r\n          dom.aria('disabled', v);\r\n          self.classes.toggle('disabled', v);\r\n      }\r\n      */\r\n    },                \r\n\r\n    mapping : {\r\n      \"events\" : {\r\n  //       'mousedown .title':  'edit',\r\n  //       'click .button':     'save',\r\n  //       'click .open':       function(e) { ... }            \r\n      },\r\n\r\n      \"attributs\" : {\r\n\r\n      },\r\n\r\n      \"properties\" : {\r\n\r\n      },\r\n\r\n      \"styles\" : {\r\n\r\n      }\r\n    },\r\n\r\n    addon : function(ctor,setting) {\r\n      var categoryName = ctor.categoryName,\r\n          addonName = ctor.addonName;\r\n\r\n      this._addons = this.addons || {};\r\n      var category = this._addons[categoryName] = this._addons[categoryName] || {};\r\n      category[addonName] = new ctor(this,setting);\r\n      return this;\r\n    },\r\n\r\n    addons : function(categoryName,settings) {\r\n      this._addons = this.addons || {};\r\n      var category = this._addons[categoryName] = this._addons[categoryName] || {};\r\n\r\n      if (settings == undefined) {\r\n        return objects.clone(category || null);\r\n      } else {\r\n        objects.mixin(category,settings);\r\n      }\r\n    },\r\n\r\n\r\n    /**\r\n     * Returns a html element representing the widget.\r\n     *\r\n     * @method render\r\n     * @return {HtmlElement} HTML element representing the widget.\r\n     */\r\n    render: function() {\r\n      return this._elm;\r\n    },\r\n\r\n\r\n\r\n    /**\r\n     * Returns a parent widget  enclosing this widgets, or null if not exist.\r\n     *\r\n     * @method getEnclosing\r\n     * @return {Widget} The enclosing parent widget, or null if not exist.\r\n     */\r\n    getEnclosing : function(selector) {\r\n      return null;\r\n    },\r\n\r\n    /**\r\n     * Returns a widget collection with all enclosed child widgets.\r\n     *\r\n     * @method getEnclosed\r\n     * @return {List} Collection with all enclosed child widgets..\r\n     */\r\n    getEnclosed : function() {\r\n      var self = this;\r\n          children = new ArrayList();\r\n      return children;\r\n    },\r\n\r\n\r\n    getSkin : function() {\r\n      return SkinManager.get();\r\n    },\r\n\r\n    /**\r\n     * Sets the visible state to true.\r\n     *\r\n     * @method show\r\n     * @return {Widget} Current widget instance.\r\n     */\r\n\r\n    show : function() {\r\n      this._velm.show();\r\n    },\r\n\r\n    /**\r\n     * Sets the visible state to false.\r\n     *\r\n     * @method hide\r\n     * @return {Widget} Current widget instance.\r\n     */\r\n    hide : function() {\r\n      this._velm.hide();\r\n    },\r\n\r\n    /**\r\n     * Focuses the current widget.\r\n     *\r\n     * @method focus\r\n     * @return {Widget} Current widget instance.\r\n     */\r\n    focus :function() {\r\n      try {\r\n        this._velm.focus();\r\n      } catch (ex) {\r\n        // Ignore IE error\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    /**\r\n     * Blurs the current widget.\r\n     *\r\n     * @method blur\r\n     * @return {Widget} Current widget instance.\r\n     */\r\n    blur : function() {\r\n      this._velm.blur();\r\n\r\n      return this;\r\n    },\r\n\r\n    enable: function () {\r\n      this.state.set('disabled',false);\r\n      return this;\r\n    },\r\n\r\n    disable: function () {\r\n      this.state.set('disabled',true);\r\n      return this;\r\n    },\r\n\r\n\r\n    /** \r\n     * Add a CSS class to the base DOM element of this widget element.\r\n     * \r\n     * @method addClass\r\n     * @param {String} name Name of the class to be added.\r\n     */\r\n    addClass : function(name){\r\n      this._velm.addClass(name);\r\n      return this;\r\n    },\r\n\r\n    /** \r\n     * Determine whether this widget element is assigned the given class.\r\n     * \r\n     * @method hasClass\r\n     * @param {String} name Name of the class t.\r\n     */\r\n    hasClass : function(name){\r\n      return this._velm.hasClass(name);\r\n    },\r\n\r\n    offset : function() {\r\n        return this._velm.pagePosition();\r\n    },\r\n\r\n    outerWidth : function() {\r\n        return this._velm.marginSize().width;\r\n    },\r\n\r\n    outerHeight : function() {\r\n        return this._velm.marginSize().height;\r\n    },\r\n\r\n    /** \r\n     * Remove a CSS class from the base DOM element of this idget element.\r\n     * \r\n     * @method removeClass\r\n     * @param {String} name Name of the class to be removed.\r\n     */\r\n    removeClass: function(name) {\r\n      this._velm.removeClass(name);\r\n      return this;\r\n    },\r\n\r\n    /** \r\n     * Remove a CSS class from the base DOM element of this idget element.\r\n     * \r\n     * @method removeClass\r\n     * @param {String} name Name of the class to be removed.\r\n     */\r\n    toggleClass: function(name) {\r\n      this._velm.toggleClass(name);\r\n      return this;\r\n    },\r\n\r\n    /**\r\n     * Sets the specified aria property.\r\n     *\r\n     * @method aria\r\n     * @param {String} name Name of the aria property to set.\r\n     * @param {String} value Value of the aria property.\r\n     * @return {Widget} Current widget instance.\r\n     */\r\n    aria : function(name, value) {\r\n      const self = this, elm = self.getEl(self.ariaTarget);\r\n\r\n      if (typeof value === 'undefined') {\r\n        return self._aria[name];\r\n      }\r\n\r\n      self._aria[name] = value;\r\n\r\n      if (self.state.get('rendered')) {\r\n        elm.setAttribute(name === 'role' ? name : 'aria-' + name, value);\r\n      }\r\n\r\n      return self;\r\n    },\r\n\r\n    attr: function (name,value) {\r\n        var velm = this._velm,\r\n            ret = velm.attr(name,value);\r\n        return ret == velm ? this : ret;\r\n    },\r\n\r\n    getAttr : function(name) {\r\n      return this._velm.attr(name);\r\n    },\r\n\r\n    setAttr : function(name,value) {\r\n      this._velm.attr(name,value);\r\n      return this;\r\n    },\r\n\r\n    removeAttr : function(name) {\r\n      this._velm.removeAttr(name);\r\n      return this;\r\n    },\r\n\r\n\r\n    /**\r\n     * Calculate the location of the container to make it centered.\r\n     *\r\n     * Calculated relatively to its parent size.\r\n     * \r\n     * @method center\r\n     */\r\n    center : function() {\r\n      this.location.set((this.parent.size.x - this.size.x) / 2, (this.parent.size.y - this.size.y) / 2);\r\n    },\r\n\r\n    css: function (name, value) {\r\n        var velm = this._velm,\r\n            ret = velm.css(name, value);\r\n        return ret == velm ? this : ret;\r\n    },\r\n\r\n    getStyle : function(name) {\r\n      return this._velm.css(name);\r\n    },\r\n\r\n    setStyle : function(name,value) {\r\n      this._velm.css(name,value);\r\n      return this;\r\n    },\r\n\r\n    data: function (name, value) {\r\n        var velm = this._velm,\r\n            ret = velm.data(name,value);\r\n        return ret == velm ? this : ret;\r\n    },\r\n\r\n\r\n    getData : function(name) {\r\n      return this._velm.data(name);\r\n    },\r\n\r\n    setData : function(name,value) {\r\n      this._velm.data(name,value);\r\n      return this;\r\n    },\r\n\r\n\r\n    parent : {\r\n      get : function() {\r\n        return this.getParent();\r\n      },\r\n      set : function(v) {\r\n        this.setParent(v);\r\n      }\r\n    },\r\n\r\n    getParent : function() {\r\n      return this._parent;\r\n    },\r\n\r\n    setParent : function(parent) {\r\n      var oldParent = this._parent;\r\n      this._parent = parent;\r\n      if (parent) {\r\n        this.mount(parent._elm || parent.element);\r\n        if (parent._setupChild) {\r\n          parent._setupChild(this);\r\n        }\r\n      } else if (oldParent) {\r\n        this.unmount();\r\n      }\r\n      return this;\r\n    },\r\n\r\n\r\n    prop: function (name,value) {\r\n        var velm = this._velm,\r\n            ret = velm.prop(name,value);\r\n        return ret == velm ? this : ret;\r\n    },\r\n\r\n    getProp : function(name) {\r\n      return this._velm.prop(name);\r\n    },\r\n\r\n    setProp : function(name,value) {\r\n      this._velm.prop(name,value);\r\n      return this;\r\n    },\r\n\r\n    throb: function(params) {\r\n      if (this.options.throbber) {\r\n        params = objects.defaults(params,this.options.throbber);\r\n      }\r\n      return noder.throb(this._elm,params);\r\n    },\r\n\r\n    /*\r\n    emit : function(type,params) {\r\n      var e = events.createEvent(type,{\r\n        data : params\r\n      });\r\n      return events.Emitter.prototype.emit.call(this,e,params);\r\n    },\r\n    */\r\n\r\n    /**\r\n     * Update component appearance.\r\n     * \r\n     * Should be called after changing size or location.\r\n     *\r\n     * Uses the updateVisibility and if the element is visible calls the updateSize and updateLocation (in this order) methods to update the interface.\r\n     * \r\n     * @method update\r\n     */\r\n    update : function() {\r\n      this.updateVisibility();\r\n\r\n      if(this.visible) {\r\n        this.updateSize();\r\n        this.updateLocation();\r\n      }\r\n    },\r\n\r\n\r\n    /**\r\n     *  mount the current widget element to dom document.\r\n     *\r\n     * @method mount\r\n     * @return {Widget} This Widget.\r\n     */\r\n    mount : function(target,position){\r\n        var toElm = target.element || target,\r\n            elm = this._elm;\r\n        if (!position || position==\"child\") {\r\n            noder.append(toElm,elm);\r\n        } else  if (position == \"before\") {\r\n            noder.before(toElm,elm);\r\n        } else if (position == \"after\") {\r\n            noder.after(toElm,elm);\r\n        } else if (position == \"prepend\") {\r\n            noder.prepend(toElm,elm);         \r\n        }\r\n        this._startup();\r\n    },\r\n\r\n    /**\r\n     *  unmount the current widget element from dom document.\r\n     *\r\n     * @method html\r\n     * @return {HtmlElement} HTML element representing the widget.\r\n     */\r\n    unmount : function() {\r\n      this._velm.remove();\r\n    },\r\n\r\n    preventDragEvents : function() {\r\n      this.element.ondrop = Widget.preventDefault;\r\n      this.element.ondragover = Widget.preventDefault;\r\n    },\r\n\r\n\r\n    element : {\r\n      get : function() {\r\n        return this._elm;\r\n      },\r\n\r\n      set : function(v) {\r\n        this._elm = v;\r\n      }\r\n    },\r\n\r\n    position : {\r\n      get : function() {\r\n        return this.location;\r\n      },\r\n\r\n      set : function(v) {\r\n        this.location = v;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Set alt text, that is displayed when the mouse is over the element. Returns the element created that is attached to the document body.\r\n     *\r\n     * @method setAltText\r\n     * @param {String} altText Alt text.\r\n     */\r\n    setAltText : function(altText)   {\r\n      var element = document.createElement(\"div\");\r\n      element.style.position = \"absolute\";\r\n      element.style.display = \"none\";\r\n      element.style.alignItems = \"center\";\r\n      element.style.zIndex = \"10000\";\r\n      element.style.border = \"3px solid\";\r\n      element.style.borderRadius = \"5px\";\r\n      element.style.color = Editor.theme.textColor;\r\n      element.style.backgroundColor = Editor.theme.barColor;\r\n      element.style.borderColor = Editor.theme.barColor;\r\n      element.style.height = \"fit-content\";\r\n      document.body.appendChild(element);\r\n\r\n      //Text\r\n      var text = document.createTextNode(altText);\r\n      element.appendChild(text);\r\n\r\n      //Destroy\r\n      var destroyFunction = this.destroy;\r\n      this.destroy = function()\r\n      { \r\n        destroyFunction.call(this);\r\n\r\n        if(document.body.contains(element))\r\n        {\r\n          document.body.removeChild(element);\r\n        }\r\n      };\r\n      \r\n      this._elm.style.pointerEvents = \"auto\"; \r\n\r\n      //Mouse mouse move event\r\n      this._elm.onmousemove = function(event) {\r\n        element.style.display = \"flex\";\r\n        element.style.left = (event.clientX + 8) + \"px\";\r\n        element.style.top = (event.clientY - 20) + \"px\";\r\n      };\r\n\r\n      //Mouse out event\r\n      this._elm.onmouseout = function()  {\r\n        element.style.display = \"none\";\r\n      };\r\n\r\n      return element;\r\n    },\r\n\r\n    /**\r\n     * Set method to be called on component click.\r\n     * \r\n     * @method setOnClick\r\n     * @param {Function} callback Function called when the component is clicked.\r\n     */\r\n    setOnClick : function(callback)  {\r\n      this._elm.onclick = callback;\r\n    },\r\n\r\n    /**\r\n     * Remove all DOM children from the element.\r\n     * \r\n     * @method removeAllChildren\r\n     */\r\n    removeAllChildren : function()   {\r\n      while(this._elm.firstChild) {\r\n        this._elm.removeChild(this._elm.firstChild);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Set positioning mode.\r\n     * \r\n     * @method setMode\r\n     * @param {Number} setMode\r\n     */\r\n    setMode : function(mode) {\r\n      this._mode = mode;\r\n      this._elm.style.bottom = null;\r\n      this._elm.style.right = null;\r\n      this._elm.style.left = null;\r\n    },\r\n\r\n\r\n    /**\r\n     * Called to destroy a component.\r\n     *\r\n     * Destroy the element and removes it from its DOM parent.\r\n     * \r\n     * @method destroy\r\n     */\r\n    destroy : function()\r\n    {\r\n      if(this._parent)\r\n      {\r\n        if(this._parent.element)\r\n        {\r\n          if(this._parent.element.contains(this.element))\r\n          {\r\n            this._parent.element.removeChild(this.element);\r\n            this._parent = null;\r\n          }\r\n        }\r\n        else\r\n        {\r\n          console.warn(\"nunuStudio: Parent is not a Element.\", this);\r\n          if(this._parent.contains(this.element))\r\n          {\r\n            this._parent.removeChild(this.element);\r\n            this._parent = null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  Widget.prototype.updateInterface = Widget.prototype.update;\r\n  Widget.prototype.updatePosition = Widget.prototype.updateLocation;\r\n  Widget.prototype.attachTo = Widget.prototype.setParent;\r\n  Widget.prototype._attachTo = Widget.prototype.mount;\r\n  Widget.prototype.detach = Widget.prototype.unmount;\r\n\r\n  /**\r\n   * Top-left locationing.\r\n   *\r\n   * @static\r\n   * @attribute TOP_LEFT\r\n   * @type {Number}\r\n   */\r\n  Widget.TOP_LEFT = 0;\r\n\r\n  /**\r\n   * Top-right locationing.\r\n   *\r\n   * @static\r\n   * @attribute TOP_RIGHT\r\n   * @type {Number}\r\n   */\r\n  Widget.TOP_RIGHT = 1;\r\n\r\n  /**\r\n   * Bottom-left locationing.\r\n   *\r\n   * @static\r\n   * @attribute BOTTOM_LEFT\r\n   * @type {Number}\r\n   */\r\n  Widget.BOTTOM_LEFT = 2;\r\n\r\n  /**\r\n   * Bottom-right locationing.\r\n   *\r\n   * @static\r\n   * @attribute BOTTOM_RIGHT\r\n   * @type {Number}\r\n   */\r\n  Widget.BOTTOM_RIGHT = 3;\r\n\r\n  Widget.inherit = function(meta) {\r\n    var ctor = plugins.Plugin.inherit.apply(this,arguments);\r\n\r\n    function addStatePropMethod(name) {\r\n        ctor.prototype[name] = function(value) {\r\n          if (value !== undefined) {\r\n            this.state.set(name,value);\r\n            return this;\r\n          } else {\r\n            return this.state.get(name);\r\n          }\r\n        };\r\n    }\r\n    if (meta.state) {\r\n      for (var name in meta.state) {\r\n          addStatePropMethod(name);\r\n      }\r\n    }\r\n\r\n    if (meta.pluginName) {\r\n      plugins.register(ctor,meta.pluginName);\r\n    }\r\n    return ctor;\r\n  };\r\n\r\n  Widget.register = function(ctor,widgetName) {\r\n    var meta = ctor.prototype,\r\n        pluginName = widgetName || meta.pluginName;\r\n\r\n    function addStatePropMethod(name) {\r\n        ctor.prototype[name] = function(value) {\r\n          if (value !== undefined) {\r\n            this.state.set(name,value);\r\n            return this;\r\n          } else {\r\n            return this.state.get(name);\r\n          }\r\n        };\r\n    }\r\n    if (meta.state) {\r\n      for (var name in meta.state) {\r\n          addStatePropMethod(name);\r\n      }\r\n    }\r\n\r\n    if (pluginName) {\r\n      plugins.register(ctor,pluginName);\r\n    }\r\n    return ctor;\r\n  };\r\n\r\n  Widget.preventDefault = function(event)\r\n  {\r\n    event.preventDefault();\r\n  };\r\n\r\n  return base.Widget = Widget;\r\n});\r\n"]}