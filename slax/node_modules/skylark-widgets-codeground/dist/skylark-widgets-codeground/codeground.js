/**
 * skylark-widgets-codeground - The skylark code playground widget for showcasing html/css/js.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-codeground/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-widgets-base/widget","skylark-domx-styler","skylark-domx-data","skylark-domx-noder","./util","./template","./addons"],function(s,t,e,a,i,n,r,l,d){"use strict";class o extends e{get klassName(){return"Codeground"}get pluginName(){return"lark.Codeground"}get options(){return{files:[],showBlank:!1,runScripts:!0,pane:"result",debounce:250,addons:{general:["render"]}}}_init(){var s=this.options;!1===s.runScripts&&s.addons.gerneral.push("scriptless"),super._init(),this._cached={html:null,css:null,js:null};this.$container=this._elm;var e=this._paneActive=s.pane;this._velm.html(l.container()).addClass(l.containerClass()).addClass(l.paneActiveClass(e)).on("change",t.debounce(this.change.bind(this),s.debounce)).on("click",this.pane.bind(this)),this._$status={};for(let s of["html","css","js"])!1!==this.options.codes[s]&&this._markup(s);this._setCodes(this.options.codes)}_startup(){var s=this.options;if(this.paneActive=this._paneActive,s.showBlank)for(let s of["html","css","js"])this._velm.addClass(l.hasFileClass(s))}_markup(s){var t=this._elm,e=this.$().find(`.codeg-pane-${s}`);e.append(n.createElement("div",{innerHTML:l.editorContent(s),className:l.editorClass(s)})),this._$status[s]=e.find(".codeg-status"),a.addClass(t,l.hasFileClass(s))}_load(s){var e,a=this._cached[s]||{};e=t.isString(a)?a:a.content||"",this.$(`.codeg-pane-${s} textarea`).val(e)}change(s){var t=i.data(s.target,"codeg-type");if(t){var e=this._cached;e[t]!==s.target.value&&(e[t]=s.target.value,this.emit("changed",{type:t,file:i.data(s.target,"codeg-file"),content:e[t]}))}}getCodes(){return t.clone(this._cached)}_setCodes(s){var t=this._cached;t.html=s.html||null,t.css=s.css||null,t.js=s.js||null;for(let s of["html","css","js"])this._load(s)}resetCodes(s){return this._setCodes(s),this.emit("reseted"),this}errors(s,t){this.status("error",s,t)}pane(s){if(!i.data(s.target,"codeg-type"))return;let t=this._paneActive,e=this._paneActive=i.data(s.target,"codeg-type");this.elmx().removeClass(l.paneActiveClass(t)).addClass(l.paneActiveClass(e)),s.preventDefault()}status(s="error",t=[],e={}){if(!t.length)return this.clearStatus(s,e);var i=this._get("$status");a.addClass(i[e.type],l.statusClass(s)),a.addClass(this._elm,l.statusActiveClass(e.type));var n="";t.forEach(function(s){n+=l.statusMessage(s)}),i[e.type].innerHTML=n}clearStatus(s,t){var e=this._get("$status");a.removeClass(e[t.type],l.statusClass(s)),a.removeClass(this._elm,l.statusActiveClass(t.type)),e[t.type].innerHTML=""}}return o.addons=d,s.attach("widgets.Codeground",o)});
//# sourceMappingURL=sourcemaps/codeground.js.map
