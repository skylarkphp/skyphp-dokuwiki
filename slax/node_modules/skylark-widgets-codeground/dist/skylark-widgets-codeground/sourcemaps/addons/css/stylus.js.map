{"version":3,"sources":["addons/css/stylus.js"],"names":["define","langx","Addon","util","CodeGround","AddonStylus","[object Object]","super","_init","coder","this","options","window","stylus","$","html","listenTo","update","params","type","file","indexOf","e","data","isStylus","content","render","err","res","callback","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,QACI,sBACA,cACA,aACA,oBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAE1B,mBAEMC,UAAqBH,EAGvBI,QACIC,MAAMC,QACN,IAAIC,EAAQC,KAAKD,MACHC,KAAKC,aAGU,IAAlBC,OAAOC,SAGlBJ,EAAMK,EAAE,4BAA4BC,KAAK,UACzCL,KAAKM,SAASP,EAAM,UAAUC,KAAKO,SAEvCX,SAASY,GACL,MAAoB,QAAhBA,EAAOC,QAG8B,IAAlCD,EAAOE,KAAKC,QAAQ,UAAmC,KAAhBH,EAAOE,MAGzDd,OAAOgB,GACH,IAAIJ,EAASI,EAAEC,KACXb,KAAKc,SAASN,IACdN,OAAOC,OAAOK,EAAOO,QAASf,KAAKC,SAASe,OAAO,CAACC,EAAKC,KACrD,GAAID,EACA,OAAOE,SAASF,EAAKT,GAErBA,EAAOO,QAAUG,IASjCE,0BACI,MAAO,MAGXC,uBACI,MAAO,UAOf,OAFA1B,EAAY2B,SAAS5B,GAEdC","file":"../../../addons/css/stylus.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"../../addon\",\n    '../../util',\n    \"../../codeground\"\n], function (langx,Addon,util,CodeGround) {\n\n    'use strict';\n    \n    class AddonStylus  extends Addon{\n        //constructor(coder, options) \n\n        _init() {\n            super._init();\n            var coder = this.coder,\n                options = this.options;\n\n            var priority = 20;\n            if (typeof window.stylus === 'undefined') {\n                return;\n            }\n            coder.$('a[data-codeg-type=\"css\"]').html('Stylus');\n            this.listenTo(coder,\"changed\",this.update);\n        }\n        isStylus(params) {\n            if (params.type !== 'css') {\n                return false;\n            }\n            return params.file.indexOf('.styl') !== -1 || params.file === '';\n        }\n\n        update(e) {\n            var params = e.data;\n            if (this.isStylus(params)) {\n                window.stylus(params.content, this.options).render((err, res) => {\n                    if (err) {\n                        return callback(err, params);\n                    } else {\n                        params.content = res;\n                    }\n                    //callback(null, params);\n                });\n            } else {\n                //callback(null, params);\n            }\n        }\n\n        static get categoryName() {\n            return \"css\";\n        }\n\n        static get addonName(){\n            return \"stylus\";\n        }\n        \n    };\n\n    AddonStylus.register(CodeGround);\n\n    return AddonStylus;\n});"]}