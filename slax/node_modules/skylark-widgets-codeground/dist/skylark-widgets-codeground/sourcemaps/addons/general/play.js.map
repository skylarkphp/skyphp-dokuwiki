{"version":3,"sources":["addons/general/play.js"],"names":["define","langx","noder","eventer","$","Addon","util","CodeGround","AddonPlay","options","firstRun","[object Object]","super","_init","coder","this","cache","html","type","content","css","js","$button","prop","className","innerHTML","append","listenTo","run","update","code","e","params","data","clone","forceRender","emit","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,QACI,sBACA,qBACA,uBACA,qBACA,cACA,aACA,oBACD,SAAUC,EAAMC,EAAMC,EAAQC,EAAEC,EAAMC,EAAKC,SACpCC,UAAmBH,EAGrBI,cACI,OACGC,UAAU,GAIjBC,QACIC,MAAMC,QAEN,IAAIC,EAAQC,KAAKD,MAIbE,MAEqB,IALXD,KAAKN,QAKPC,WACRM,GACIC,MACIC,KAAM,OACNC,QAAS,IAEbC,KACIF,KAAM,MACNC,QAAS,IAEbE,IACIH,KAAM,KACNC,QAAS,MAIrB,IAAIG,EAAUlB,EAAE,aAAamB,MACzBC,UAAY,iCACZC,UAAY,QAGhBX,EAAMV,IAAIsB,OAAOJ,GAEjBP,KAAKY,SAASL,EAAQ,QAAQP,KAAKa,KAEnCb,KAAKY,SAASb,EAAM,UAAUC,KAAKc,QAEnCd,KAAKC,MAAQA,EACbD,KAAKe,QACLf,KAAKD,MAAQA,EAGjBH,OAAOoB,GACH,IAAIC,EAASD,EAAEE,KACflB,KAAKe,KAAKE,EAAOd,MAAQjB,EAAMiC,MAAMF,QACE,IAA5BjB,KAAKC,MAAMgB,EAAOd,MAEzBH,KAAKC,MAAMgB,EAAOd,MAAMiB,YAAc,KAEtCpB,KAAKC,MAAMgB,EAAOd,MAAQjB,EAAMiC,MAAMF,GAK9CrB,MACII,KAAKD,MAAMsB,KAAK,WAGpBC,0BACI,MAAO,UAGXC,uBACI,MAAO,QAOf,OAFA9B,EAAU+B,SAAShC,GAEZC","file":"../../../addons/general/play.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"skylark-domx-noder\",\n    \"skylark-domx-eventer\",\n    \"skylark-domx-query\",\n    \"../../addon\",\n    '../../util',\n    \"../../codeground\"\n], function (langx,noder,eventer,$,Addon,util,CodeGround) {\n    class AddonPlay  extends Addon{\n        //constructor(coder, options) \n\n        get options() {\n            return {\n               firstRun: true \n            }\n        }\n\n        _init() {\n            super._init();\n\n            var coder = this.coder,\n                options = this.options;\n            \n            var priority = 10;\n            var cache = {};\n            var code = {};\n            if (options.firstRun === false) {\n                cache = {\n                    html: {\n                        type: 'html',\n                        content: ''\n                    },\n                    css: {\n                        type: 'css',\n                        content: ''\n                    },\n                    js: {\n                        type: 'js',\n                        content: ''\n                    }\n                };\n            }\n            var $button = $('<button/>').prop({\n                className : 'codeg-button codeg-button-play',\n                innerHTML : 'Run'\n            });\n\n            coder.$().append($button);\n\n            this.listenTo($button,\"click\",this.run);\n\n            this.listenTo(coder,\"changed\",this.update);\n            \n            this.cache = cache;\n            this.code = code;\n            this.coder = coder;\n        }\n\n        update(e) {\n            var params = e.data;\n            this.code[params.type] = langx.clone(params);\n            if (typeof this.cache[params.type] !== 'undefined') {\n                //callback(null, this.cache[params.type]);\n                this.cache[params.type].forceRender = null;\n            } else {\n                this.cache[params.type] = langx.clone(params);\n                //callback(null, params);\n            }\n        }\n\n        run() {\n            this.coder.emit('reseted');\n        }\n\n        static get categoryName() {\n            return \"general\";\n        }\n\n        static get addonName(){\n            return \"play\";\n        }\n\n    };\n\n    AddonPlay.register(CodeGround);\n\n    return AddonPlay;\n});"]}