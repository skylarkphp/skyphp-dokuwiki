{"version":3,"sources":["addons/general/scriptless.js"],"names":["define","langx","Addon","util","CodeGround","AddonScriptless","[object Object]","super","_init","coder","this","options","listenTo","update","runScriptTypes","e","params","data","type","fragment","document","createElement","innerHTML","content","typeAttr","$scripts","querySelectorAll","i","length","getAttribute","indexOf","parentNode","removeChild","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,QACI,sBACA,cACA,aACA,oBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBAEMC,UAAyBH,EAG3BI,QACIC,MAAMC,QAEN,IAAIC,EAAQC,KAAKD,MACHC,KAAKC,QAoBnBD,KAAKE,SAASH,EAAM,UAAUC,KAAKG,QACnCH,KAAKI,gBAlBD,yBACA,yBACA,2BACA,2BACA,kBACA,kBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,eACA,kBACA,oBACA,qBAMRR,OAAOS,GACH,IAAIC,EAASD,EAAEE,KACf,GAAoB,SAAhBD,EAAOE,KAAX,CAGA,IAAIC,EAAWC,SAASC,cAAc,OACtCF,EAASG,UAAYN,EAAOO,QAC5B,IAAIC,EAAW,KACXC,EAAWN,EAASO,iBAAiB,UACzC,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAASG,OAAQD,KACjCH,EAAWC,EAASE,GAAGE,aAAa,WACwB,IAA3CnB,KAAKI,eAAegB,QAAQN,IACzCC,EAASE,GAAGI,WAAWC,YAAYP,EAASE,IAGpDX,EAAOO,QAAUJ,EAASG,WAI9BW,0BACI,MAAO,UAGXC,uBACI,MAAO,cAOf,OAFA7B,EAAgB8B,SAAS/B,GAElBC","file":"../../../addons/general/scriptless.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"../../addon\",\n    '../../util',\n    \"../../codeground\"\n], function (langx,Addon,util,CodeGround) {\n    'use strict';\n\n    class AddonScriptless  extends Addon{\n        //constructor(coder, options) \n\n        _init() {\n            super._init();\n\n            var coder = this.coder,\n                options = this.options;\n\n            var runScriptTypes = [\n                'application/javascript',\n                'application/ecmascript',\n                'application/x-ecmascript',\n                'application/x-javascript',\n                'text/ecmascript',\n                'text/javascript',\n                'text/javascript1.0',\n                'text/javascript1.1',\n                'text/javascript1.2',\n                'text/javascript1.3',\n                'text/javascript1.4',\n                'text/javascript1.5',\n                'text/jscript',\n                'text/livescript',\n                'text/x-ecmascript',\n                'text/x-javascript'\n            ];\n            this.listenTo(coder,\"changed\",this.update);\n            this.runScriptTypes = runScriptTypes;\n        }\n\n        update(e) {\n            var params = e.data;\n            if (params.type !== 'html') {\n                return //callback(null, params);\n            }\n            var fragment = document.createElement('div');\n            fragment.innerHTML = params.content;\n            var typeAttr = null;\n            var $scripts = fragment.querySelectorAll('script');\n            for (let i = 0; i < $scripts.length; i++) {\n                typeAttr = $scripts[i].getAttribute('type');\n                if (!typeAttr || this.runScriptTypes.indexOf(typeAttr) !== -1) {\n                    $scripts[i].parentNode.removeChild($scripts[i]);\n                }\n            }\n            params.content = fragment.innerHTML;\n            //callback(null, params);\n        }\n\n        static get categoryName() {\n            return \"general\";\n        }\n\n        static get addonName(){\n            return \"scriptless\";\n        }\n\n    };\n\n    AddonScriptless.register(CodeGround);\n\n    return AddonScriptless;\n});"]}