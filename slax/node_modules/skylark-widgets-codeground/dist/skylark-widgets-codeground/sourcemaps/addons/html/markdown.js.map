{"version":3,"sources":["addons/html/markdown.js"],"names":["define","langx","Addon","util","CodeGround","AddonMarkdown","[object Object]","super","_init","coder","this","options","window","marked","setOptions","$","html","listenTo","update","e","params","data","type","content","err","callback","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,QACI,sBACA,cACA,aACA,oBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBAEMC,UAAuBH,EAGzBI,QACIC,MAAMC,QAEN,IAAIC,EAAQC,KAAKD,MACbE,EAAUD,KAAKC,aAGU,IAAlBC,OAAOC,SAGlBD,OAAOC,OAAOC,WAAWH,GAEzBF,EAAMM,EAAE,6BAA6BC,KAAK,YAE1CN,KAAKO,SAASR,EAAM,UAAUC,KAAKQ,SAEvCZ,OAAOa,GACH,IAAIC,EAASD,EAAEE,KACf,GAAoB,SAAhBD,EAAOE,KACP,IACIF,EAAOG,QAAUX,OAAOC,OAAOO,EAAOG,SACxC,MAAOC,GACL,OAAOC,SAASD,EAAKJ,IAQjCM,0BACI,MAAO,OAGXC,uBACI,MAAO,YAOf,OAFAtB,EAAcuB,SAASxB,GAEhBC","file":"../../../addons/html/markdown.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"../../addon\",\n    '../../util',\n    \"../../codeground\"\n], function (langx,Addon,util,CodeGround) {\n    'use strict';\n    \n    class AddonMarkdown  extends Addon{\n        //constructor(coder, options) \n\n        _init() {\n            super._init();\n\n            var coder = this.coder,\n                options = this.options;\n\n            var priority = 20;\n            if (typeof window.marked === 'undefined') {\n                return;\n            }\n            window.marked.setOptions(options);\n\n            coder.$('a[data-codeg-type=\"html\"]').html('Markdown');\n\n            this.listenTo(coder,\"changed\",this.update);\n        }\n        update(e) {\n            var params = e.data;\n            if (params.type === 'html') {\n                try {\n                    params.content = window.marked(params.content);\n                } catch (err) {\n                    return callback(err, params);\n                }\n                //callback(null, params);\n            } else {\n                //callback(null, params);\n            }\n        }\n\n        static get categoryName() {\n            return \"html\";\n        }\n\n        static get addonName(){\n            return \"markdown\";\n        }\n\n    };\n\n    AddonMarkdown.register(CodeGround);\n\n    return AddonMarkdown;\n});"]}