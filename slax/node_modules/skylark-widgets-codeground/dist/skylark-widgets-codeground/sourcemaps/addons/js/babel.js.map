{"version":3,"sources":["addons/js/babel.js"],"names":["define","langx","Addon","util","CodeGround","AddonBabel","[object Object]","super","_init","coder","this","options","window","Babel","babel","transform","$","html","listenTo","update","e","params","data","type","content","code","err","callback","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,QACI,sBACA,cACA,aACA,oBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBAEMC,UAAoBH,EAGtBI,QACIC,MAAMC,QAEN,IAAIC,EAAQC,KAAKD,MACHC,KAAKC,QAGnB,QAA4B,IAAjBC,OAAOC,MACdH,KAAKI,MAAQF,OAAOC,UACjB,CAAA,QAA4B,IAAjBD,OAAOE,MAGrB,OAFAJ,KAAKI,OAAUC,UAAWH,OAAOE,OAIrCL,EAAMO,EAAE,2BAA2BC,KAAK,UACxCP,KAAKQ,SAAST,EAAM,UAAUC,KAAKS,QAEvCb,OAAOc,GACH,IAAIC,EAASD,EAAEE,KACf,GAAoB,OAAhBD,EAAOE,KACP,IACIF,EAAOG,QAAUd,KAAKI,MAAMC,UAAUM,EAAOG,QAASd,KAAKC,SAASc,KACtE,MAAOC,GACL,OAAOC,SAASD,EAAKL,IAQjCO,0BACI,MAAO,KAGXC,uBACI,MAAO,SAOf,OAFAxB,EAAWyB,SAAS1B,GAEbC","file":"../../../addons/js/babel.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"../../addon\",\n    '../../util',\n    \"../../codeground\"\n], function (langx,Addon,util,CodeGround) {\n    'use strict';\n    \n    class AddonBabel  extends Addon{\n        //constructor(coder, options) \n\n        _init() {\n            super._init();\n\n            var coder = this.coder,\n                options = this.options;\n\n            //this.options = langx.clone(options);\n            if (typeof window.Babel !== 'undefined') {\n                this.babel = window.Babel;\n            } else if (typeof window.babel !== 'undefined') {\n                this.babel = { transform: window.babel };\n            } else {\n                return;\n            }\n            coder.$('a[data-codeg-type=\"js\"]').html('ES2015');\n            this.listenTo(coder,\"changed\",this.update);\n        }\n        update(e) {\n            var params = e.data;\n            if (params.type === 'js') {\n                try {\n                    params.content = this.babel.transform(params.content, this.options).code;\n                } catch (err) {\n                    return callback(err, params);\n                }\n                //callback(null, params);\n            } else {\n                //callback(null, params);\n            }\n        }\n\n        static get categoryName() {\n            return \"js\";\n        }\n\n        static get addonName(){\n            return \"babel\";\n        }\n\n    };\n\n    AddonBabel.register(CodeGround);\n\n    return AddonBabel;\n});"]}