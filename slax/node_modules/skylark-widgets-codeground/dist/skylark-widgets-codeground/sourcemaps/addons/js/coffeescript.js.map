{"version":3,"sources":["addons/js/coffeescript.js"],"names":["define","langx","Addon","util","CodeGround","AddonCoffeeScript","[object Object]","super","_init","coder","this","options","window","CoffeeScript","$","html","listenTo","update","params","type","file","indexOf","e","data","isCoffee","content","compile","err","callback","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,QACI,sBACA,cACA,aACA,oBACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBACMC,UAA2BH,EAG7BI,QACIC,MAAMC,QACN,IAAIC,EAAQC,KAAKD,MACHC,KAAKC,aAGgB,IAAxBC,OAAOC,eAGlBJ,EAAMK,EAAE,2BAA2BC,KAAK,gBACxCL,KAAKM,SAASP,EAAM,UAAUC,KAAKO,SAEvCX,SAASY,GACL,MAAoB,OAAhBA,EAAOC,QAGgC,IAApCD,EAAOE,KAAKC,QAAQ,YAAqC,KAAhBH,EAAOE,MAE3Dd,OAAOgB,GACH,IAAIJ,EAASI,EAAEC,KACf,GAAIb,KAAKc,SAASN,GACd,IACIA,EAAOO,QAAUb,OAAOC,aAAaa,QAAQR,EAAOO,SACtD,MAAOE,GACL,OAAOC,SAASD,EAAKT,IAMjCW,0BACI,MAAO,KAGXC,uBACI,MAAO,gBAOf,OAFAzB,EAAkB0B,SAAS3B,GAEpBC","file":"../../../addons/js/coffeescript.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"../../addon\",\n    '../../util',\n    \"../../codeground\"\n], function (langx,Addon,util,CodeGround) {\n    'use strict';\n    class AddonCoffeeScript  extends Addon{\n        //constructor(coder, options) \n\n        _init() {\n            super._init();\n            var coder = this.coder,\n                options = this.options;\n            \n            var priority = 20;\n            if (typeof window.CoffeeScript === 'undefined') {\n                return;\n            }\n            coder.$('a[data-codeg-type=\"js\"]').html('CoffeeScript');\n            this.listenTo(coder,\"changed\",this.update);\n        }\n        isCoffee(params) {\n            if (params.type !== 'js') {\n                return false;\n            }\n            return params.file.indexOf('.coffee') !== -1 || params.file === '';\n        }\n        update(e) {\n            var params = e.data;\n            if (this.isCoffee(params)) {\n                try {\n                    params.content = window.CoffeeScript.compile(params.content);\n                } catch (err) {\n                    return callback(err, params);\n                }\n            }\n            //callback(null, params);\n        }\n\n        static get categoryName() {\n            return \"js\";\n        }\n\n        static get addonName(){\n            return \"coffeescript\";\n        }\n\n    };\n\n    AddonCoffeeScript.register(CodeGround);\n\n    return AddonCoffeeScript;\n});"]}