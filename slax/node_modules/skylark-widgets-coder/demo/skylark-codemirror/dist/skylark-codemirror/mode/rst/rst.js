/**
 * skylark-codemirror - A version of codemirror 5.45  that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-codemirror/
 * @license MIT
 */
define(["../../CodeMirror","../python/python","../stex/stex","../../addon/mode/overlay"],function(e){"use strict";e.defineMode("rst",function(t,a){var c=/^\*\*[^\*\s](?:[^\*]*[^\*\s])?\*\*/,n=/^\*[^\*\s](?:[^\*]*[^\*\s])?\*/,m=/^``[^`\s](?:[^`]*[^`\s])``/,r=/^(?:[\d]+(?:[\.,]\d+)*)/,s=/^(?:\s\+[\d]+(?:[\.,]\d+)*)/,o=/^(?:\s\-[\d]+(?:[\.,]\d+)*)/,h=new RegExp("^[Hh][Tt][Tt][Pp][Ss]?://(?:[\\d\\w.-]+)\\.(?:\\w{2,6})(?:/[\\d\\w\\#\\%\\&\\-\\.\\,\\/\\:\\=\\?\\~]+)*"),l={token:function(e){if(e.match(c)&&e.match(/\W+|$/,!1))return"strong";if(e.match(n)&&e.match(/\W+|$/,!1))return"em";if(e.match(m)&&e.match(/\W+|$/,!1))return"string-2";if(e.match(r))return"number";if(e.match(s))return"positive";if(e.match(o))return"negative";if(e.match(h))return"link";for(;!(null==e.next()||e.match(c,!1)||e.match(n,!1)||e.match(m,!1)||e.match(r,!1)||e.match(s,!1)||e.match(o,!1)||e.match(h,!1)););return null}},i=e.getMode(t,a.backdrop||"rst-base");return e.overlayMode(i,l,!0)},"python","stex"),e.defineMode("rst-base",function(t){function a(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,a){return void 0!==t[a]?t[a]:e})}var c=e.getMode(t,"python"),n=e.getMode(t,"stex"),m="(?:\\s*|\\W|$)",r=new RegExp(a("^{0}",m)),s="(?:[^\\W\\d_](?:[\\w!\"#$%&'()\\*\\+,\\-\\./:;<=>\\?]*[^\\W_])?)",o=new RegExp(a("^{0}",s)),h=a("(?:{0}|`{1}`)",s,"(?:[^\\W\\d_](?:[\\w\\s!\"#$%&'()\\*\\+,\\-\\./:;<=>\\?]*[^\\W_])?)"),l="(?:[^\\s\\|](?:[^\\|]*[^\\s\\|])?)",i="(?:[^\\`]+)",p=new RegExp(a("^{0}",i)),d=new RegExp("^([!'#$%&\"()*+,-./:;<=>?@\\[\\\\\\]^_`{|}~])\\1{3,}\\s*$"),u=new RegExp(a("^\\.\\.{0}","\\s+")),k=new RegExp(a("^_{0}:{1}|^__:{1}",h,m)),x=new RegExp(a("^{0}::{1}",h,m)),f=new RegExp(a("^\\|{0}\\|{1}{2}::{3}",l,"\\s+",h,m)),w=new RegExp(a("^\\[(?:\\d+|#{0}?|\\*)]{1}",h,m)),g=new RegExp(a("^\\[{0}\\]{1}",h,m)),b=new RegExp(a("^\\|{0}\\|",l)),E=new RegExp(a("^\\[(?:\\d+|#{0}?|\\*)]_",h)),R=new RegExp(a("^\\[{0}\\]_",h)),_=new RegExp(a("^{0}__?",h)),y=new RegExp(a("^`{0}`_",i)),v=new RegExp(a("^:{0}:`{1}`{2}",s,i,m)),$=new RegExp(a("^`{1}`:{0}:{2}",s,i,m)),S=new RegExp(a("^:{0}:{1}",s,m)),M=new RegExp(a("^{0}",h)),W=new RegExp(a("^::{0}",m)),q=new RegExp(a("^\\|{0}\\|",l)),T=new RegExp(a("^{0}","\\s+")),I=new RegExp(a("^{0}",h)),A=new RegExp(a("^::{0}",m)),C=new RegExp("^_"),H=new RegExp(a("^{0}|_",h)),P=new RegExp(a("^:{0}",m)),j=new RegExp("^::\\s*$"),z=new RegExp("^\\s+(?:>>>|In \\[\\d+\\]:)\\s");function B(t,a){var m=null;if(t.sol()&&t.match(z,!1))N(a,K,{mode:c,local:e.startState(c)});else if(t.sol()&&t.match(u))N(a,D),m="meta";else if(t.sol()&&t.match(d))N(a,B),m="header";else if(Q(a)==v||t.match(v,!1))switch(O(a)){case 0:N(a,B,L(v,1)),t.match(/^:/),m="meta";break;case 1:N(a,B,L(v,2)),t.match(o),m="keyword",t.current().match(/^(?:math|latex)/)&&(a.tmp_stex=!0);break;case 2:N(a,B,L(v,3)),t.match(/^:`/),m="meta";break;case 3:if(a.tmp_stex&&(a.tmp_stex=void 0,a.tmp={mode:n,local:e.startState(n)}),a.tmp){if("`"==t.peek()){N(a,B,L(v,4)),a.tmp=void 0;break}m=a.tmp.mode.token(t,a.tmp.local);break}N(a,B,L(v,4)),t.match(p),m="string";break;case 4:N(a,B,L(v,5)),t.match(/^`/),m="meta";break;case 5:N(a,B,L(v,6)),t.match(r);break;default:N(a,B)}else if(Q(a)==$||t.match($,!1))switch(O(a)){case 0:N(a,B,L($,1)),t.match(/^`/),m="meta";break;case 1:N(a,B,L($,2)),t.match(p),m="string";break;case 2:N(a,B,L($,3)),t.match(/^`:/),m="meta";break;case 3:N(a,B,L($,4)),t.match(o),m="keyword";break;case 4:N(a,B,L($,5)),t.match(/^:/),m="meta";break;case 5:N(a,B,L($,6)),t.match(r);break;default:N(a,B)}else if(Q(a)==S||t.match(S,!1))switch(O(a)){case 0:N(a,B,L(S,1)),t.match(/^:/),m="meta";break;case 1:N(a,B,L(S,2)),t.match(o),m="keyword";break;case 2:N(a,B,L(S,3)),t.match(/^:/),m="meta";break;case 3:N(a,B,L(S,4)),t.match(r);break;default:N(a,B)}else if(Q(a)==b||t.match(b,!1))switch(O(a)){case 0:N(a,B,L(b,1)),t.match(q),m="variable-2";break;case 1:N(a,B,L(b,2)),t.match(/^_?_?/)&&(m="link");break;default:N(a,B)}else if(t.match(E))N(a,B),m="quote";else if(t.match(R))N(a,B),m="quote";else if(t.match(_))N(a,B),t.peek()&&!t.peek().match(/^\W$/)||(m="link");else if(Q(a)==y||t.match(y,!1))switch(O(a)){case 0:!t.peek()||t.peek().match(/^\W$/)?N(a,B,L(y,1)):t.match(y);break;case 1:N(a,B,L(y,2)),t.match(/^`/),m="link";break;case 2:N(a,B,L(y,3)),t.match(p);break;case 3:N(a,B,L(y,4)),t.match(/^`_/),m="link";break;default:N(a,B)}else t.match(j)?N(a,G):t.next()&&N(a,B);return m}function D(t,a){var m=null;if(Q(a)==f||t.match(f,!1))switch(O(a)){case 0:N(a,D,L(f,1)),t.match(q),m="variable-2";break;case 1:N(a,D,L(f,2)),t.match(T);break;case 2:N(a,D,L(f,3)),t.match(I),m="keyword";break;case 3:N(a,D,L(f,4)),t.match(A),m="meta";break;default:N(a,B)}else if(Q(a)==x||t.match(x,!1))switch(O(a)){case 0:N(a,D,L(x,1)),t.match(M),m="keyword",t.current().match(/^(?:math|latex)/)?a.tmp_stex=!0:t.current().match(/^python/)&&(a.tmp_py=!0);break;case 1:N(a,D,L(x,2)),t.match(W),m="meta",(t.match(/^latex\s*$/)||a.tmp_stex)&&(a.tmp_stex=void 0,N(a,K,{mode:n,local:e.startState(n)}));break;case 2:N(a,D,L(x,3)),(t.match(/^python\s*$/)||a.tmp_py)&&(a.tmp_py=void 0,N(a,K,{mode:c,local:e.startState(c)}));break;default:N(a,B)}else if(Q(a)==k||t.match(k,!1))switch(O(a)){case 0:N(a,D,L(k,1)),t.match(C),t.match(H),m="link";break;case 1:N(a,D,L(k,2)),t.match(P),m="meta";break;default:N(a,B)}else t.match(w)?(N(a,B),m="quote"):t.match(g)?(N(a,B),m="quote"):(t.eatSpace(),t.eol()?N(a,B):(t.skipToEnd(),N(a,F),m="comment"));return m}function F(e,t){return J(e,t,"comment")}function G(e,t){return J(e,t,"meta")}function J(e,t,a){return e.eol()||e.eatSpace()?(e.skipToEnd(),a):(N(t,B),null)}function K(e,t){return t.ctx.mode&&t.ctx.local?e.sol()?(e.eatSpace()||N(t,B),null):t.ctx.mode.token(e,t.ctx.local):(N(t,B),null)}function L(e,t,a,c){return{phase:e,stage:t,mode:a,local:c}}function N(e,t,a){e.tok=t,e.ctx=a||{}}function O(e){return e.ctx.stage||0}function Q(e){return e.ctx.phase}return{startState:function(){return{tok:B,ctx:L(void 0,0)}},copyState:function(t){var a=t.ctx,c=t.tmp;return a.local&&(a={mode:a.mode,local:e.copyState(a.mode,a.local)}),c&&(c={mode:c.mode,local:e.copyState(c.mode,c.local)}),{tok:t.tok,ctx:a,tmp:c}},innerMode:function(e){return e.tmp?{state:e.tmp.local,mode:e.tmp.mode}:e.ctx.mode?{state:e.ctx.local,mode:e.ctx.mode}:null},token:function(e,t){return t.tok(e,t)}}},"python","stex"),e.defineMIME("text/x-rst","rst")});
//# sourceMappingURL=../../sourcemaps/mode/rst/rst.js.map
