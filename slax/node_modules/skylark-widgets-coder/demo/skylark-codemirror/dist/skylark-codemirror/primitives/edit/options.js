/**
 * skylark-codemirror - A version of codemirror 5.45  that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-codemirror/
 * @license MIT
 */
define(["../display/focus","../display/gutters","../display/line_numbers","../display/mode_state","../display/scrollbars","../display/selection","../display/view_tracking","../input/keymap","../line/line_data","../line/pos","../line/spans","../measurement/position_measurement","../model/changes","../util/browser","../util/dom","../util/event","./utils"],function(e,t,l,r,i,a,n,o,s,d,u,p,c,h,g,y,f){"use strict";let m={toString:function(){return"CodeMirror.Init"}};function S(e){t.updateGutters(e),n.regChange(e),l.alignHorizontally(e)}function b(e,t,l){if(!t!=!(l&&l!=m)){let l=e.display.dragFunctions,r=t?y.on:y.off;r(e.display.scroller,"dragstart",l.start),r(e.display.scroller,"dragenter",l.enter),r(e.display.scroller,"dragover",l.over),r(e.display.scroller,"dragleave",l.leave),r(e.display.scroller,"drop",l.drop)}}function C(e){e.options.lineWrapping?(g.addClass(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(g.rmClass(e.display.wrapper,"CodeMirror-wrap"),u.findMaxLine(e)),p.estimateLineHeights(e),n.regChange(e),p.clearCaches(e),setTimeout(()=>i.updateScrollbars(e),100)}return{Init:m,defaults:{},optionHandlers:{},defineOptions:function(l){let u=l.optionHandlers;function g(e,t,r,i){l.defaults[e]=t,r&&(u[e]=i?(e,t,l)=>{l!=m&&r(e,t,l)}:r)}l.defineOption=g,l.Init=m,g("value","",(e,t)=>e.setValue(t),!0),g("mode",null,(e,t)=>{e.doc.modeOption=t,r.loadMode(e)},!0),g("indentUnit",2,r.loadMode,!0),g("indentWithTabs",!1),g("smartIndent",!0),g("tabSize",4,e=>{r.resetModeState(e),p.clearCaches(e),n.regChange(e)},!0),g("lineSeparator",null,(e,t)=>{if(e.doc.lineSep=t,!t)return;let l=[],r=e.doc.first;e.doc.iter(e=>{for(let i=0;;){let a=e.text.indexOf(t,i);if(-1==a)break;i=a+t.length,l.push(d.Pos(r,a))}r++});for(let r=l.length-1;r>=0;r--)c.replaceRange(e.doc,t,l[r],d.Pos(l[r].line,l[r].ch+t.length))}),g("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,(e,t,l)=>{e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),l!=m&&e.refresh()}),g("specialCharPlaceholder",s.defaultSpecialCharPlaceholder,e=>e.refresh(),!0),g("electricChars",!0),g("inputStyle",h.mobile?"contenteditable":"textarea",()=>{throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),g("spellcheck",!1,(e,t)=>e.getInputField().spellcheck=t,!0),g("autocorrect",!1,(e,t)=>e.getInputField().autocorrect=t,!0),g("autocapitalize",!1,(e,t)=>e.getInputField().autocapitalize=t,!0),g("rtlMoveVisually",!h.windows),g("wholeLineUpdateBefore",!0),g("theme","default",e=>{f.themeChanged(e),S(e)},!0),g("keyMap","default",(e,t,l)=>{let r=o.getKeyMap(t),i=l!=m&&o.getKeyMap(l);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),g("extraKeys",null),g("configureMouse",null),g("lineWrapping",!1,C,!0),g("gutters",[],e=>{t.setGuttersForLineNumbers(e.options),S(e)},!0),g("fixedGutter",!0,(e,t)=>{e.display.gutters.style.left=t?p.compensateForHScroll(e.display)+"px":"0",e.refresh()},!0),g("coverGutterNextToScrollbar",!1,e=>i.updateScrollbars(e),!0),g("scrollbarStyle","native",e=>{i.initScrollbars(e),i.updateScrollbars(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),g("lineNumbers",!1,e=>{t.setGuttersForLineNumbers(e.options),S(e)},!0),g("firstLineNumber",1,S,!0),g("lineNumberFormatter",e=>e,S,!0),g("showCursorWhenSelecting",!1,a.updateSelection,!0),g("resetSelectionOnContextMenu",!0),g("lineWiseCopyCut",!0),g("pasteLinesPerSelection",!0),g("selectionsMayTouch",!1),g("readOnly",!1,(t,l)=>{"nocursor"==l&&(e.onBlur(t),t.display.input.blur()),t.display.input.readOnlyChanged(l)}),g("disableInput",!1,(e,t)=>{t||e.display.input.reset()},!0),g("dragDrop",!0,b),g("allowDropFileTypes",null),g("cursorBlinkRate",530),g("cursorScrollMargin",0),g("cursorHeight",1,a.updateSelection,!0),g("singleCursorHeightPerLine",!0,a.updateSelection,!0),g("workTime",100),g("workDelay",100),g("flattenSpans",!0,r.resetModeState,!0),g("addModeClass",!1,r.resetModeState,!0),g("pollInterval",100),g("undoDepth",200,(e,t)=>e.doc.history.undoDepth=t),g("historyEventDelay",1250),g("viewportMargin",10,e=>e.refresh(),!0),g("maxHighlightLength",1e4,r.resetModeState,!0),g("moveInputWithCursor",!0,(e,t)=>{t||e.display.input.resetPosition()}),g("tabindex",null,(e,t)=>e.display.input.getField().tabIndex=t||""),g("autofocus",null),g("direction","ltr",(e,t)=>e.doc.setDirection(t),!0),g("phrases",null)}}});
//# sourceMappingURL=../../sourcemaps/primitives/edit/options.js.map
