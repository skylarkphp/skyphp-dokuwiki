{"version":3,"sources":["addon/scroll/scrollpastend.js"],"names":["define","CodeMirror","onChange","cm","change","changeEnd","line","lastLine","updateBottomMargin","padding","lineCount","display","scroller","clientHeight","getLineHandle","height","state","scrollPastEndPadding","lineSpace","parentNode","style","paddingBottom","off","setSize","on","defineOption","val","old","Init"],"mappings":";;;;;;;AAGAA,QAAQ,oBAAqB,SAASC,GACpC,aAgBA,SAASC,EAASC,EAAIC,GAChBH,EAAWI,UAAUD,GAAQE,MAAQH,EAAGI,YAC1CC,EAAmBL,GAGvB,SAASK,EAAmBL,GAC1B,IAAIM,EAAU,GACVN,EAAGO,YAAc,IAGnBD,EAFaN,EAAGQ,QAAQC,SAASC,aAAe,GAChCV,EAAGW,cAAcX,EAAGI,YAAYQ,OACf,MAE/BZ,EAAGa,MAAMC,sBAAwBR,IACnCN,EAAGa,MAAMC,qBAAuBR,EAChCN,EAAGQ,QAAQO,UAAUC,WAAWC,MAAMC,cAAgBZ,EACtDN,EAAGmB,IAAI,UAAWd,GAClBL,EAAGoB,UACHpB,EAAGqB,GAAG,UAAWhB,IA/BrBP,EAAWwB,aAAa,iBAAiB,EAAO,SAAStB,EAAIuB,EAAKC,GAC5DA,GAAOA,GAAO1B,EAAW2B,OAC3BzB,EAAGmB,IAAI,SAAUpB,GACjBC,EAAGmB,IAAI,UAAWd,GAClBL,EAAGQ,QAAQO,UAAUC,WAAWC,MAAMC,cAAgB,GACtDlB,EAAGa,MAAMC,qBAAuB,MAE9BS,IACFvB,EAAGqB,GAAG,SAAUtB,GAChBC,EAAGqB,GAAG,UAAWhB,GACjBA,EAAmBL","file":"../../../addon/scroll/scrollpastend.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\ndefine([\"../../CodeMirror\"], function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"scrollPastEnd\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"change\", onChange);\n      cm.off(\"refresh\", updateBottomMargin);\n      cm.display.lineSpace.parentNode.style.paddingBottom = \"\";\n      cm.state.scrollPastEndPadding = null;\n    }\n    if (val) {\n      cm.on(\"change\", onChange);\n      cm.on(\"refresh\", updateBottomMargin);\n      updateBottomMargin(cm);\n    }\n  });\n\n  function onChange(cm, change) {\n    if (CodeMirror.changeEnd(change).line == cm.lastLine())\n      updateBottomMargin(cm);\n  }\n\n  function updateBottomMargin(cm) {\n    var padding = \"\";\n    if (cm.lineCount() > 1) {\n      var totalH = cm.display.scroller.clientHeight - 30,\n          lastLineH = cm.getLineHandle(cm.lastLine()).height;\n      padding = (totalH - lastLineH) + \"px\";\n    }\n    if (cm.state.scrollPastEndPadding != padding) {\n      cm.state.scrollPastEndPadding = padding;\n      cm.display.lineSpace.parentNode.style.paddingBottom = padding;\n      cm.off(\"refresh\", updateBottomMargin);\n      cm.setSize();\n      cm.on(\"refresh\", updateBottomMargin);\n    }\n  }\n});\n"]}