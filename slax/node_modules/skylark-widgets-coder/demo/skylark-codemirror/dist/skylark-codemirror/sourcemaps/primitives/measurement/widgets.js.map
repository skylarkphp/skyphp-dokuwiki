{"version":3,"sources":["primitives/measurement/widgets.js"],"names":["define","dom","events","widgetHeight","widget","height","cm","doc","contains","document","body","node","parentStyle","coverGutter","display","gutters","offsetWidth","noHScroll","wrapper","clientWidth","removeChildrenAndAdd","measure","elt","parentNode","offsetHeight","eventInWidget","e","n","e_target","nodeType","getAttribute","sizer","mover"],"mappings":";;;;;;;AAAAA,QACI,cACA,iBACD,SAAUC,EAAKC,GACd,aAuBA,OACIC,aAvBJ,SAAsBC,GAClB,GAAqB,MAAjBA,EAAOC,OACP,OAAOD,EAAOC,OAClB,IAAIC,EAAKF,EAAOG,IAAID,GACpB,IAAKA,EACD,OAAO,EACX,IAAKL,EAAIO,SAASC,SAASC,KAAMN,EAAOO,MAAO,CAC3C,IAAIC,EAAc,sBACdR,EAAOS,cACPD,GAAe,iBAAmBN,EAAGQ,QAAQC,QAAQC,YAAc,OACnEZ,EAAOa,YACPL,GAAe,UAAYN,EAAGQ,QAAQI,QAAQC,YAAc,OAChElB,EAAImB,qBAAqBd,EAAGQ,QAAQO,QAASpB,EAAIqB,IAAI,OAAQlB,EAAOO,MAAO,KAAMC,IAErF,OAAOR,EAAOC,OAASD,EAAOO,KAAKY,WAAWC,cAU9CC,cARJ,SAAuBX,EAASY,GAC5B,IAAK,IAAIC,EAAIzB,EAAO0B,SAASF,GAAIC,GAAKb,EAAQI,QAASS,EAAIA,EAAEJ,WACzD,IAAKI,GAAmB,GAAdA,EAAEE,UAAuD,QAAtCF,EAAEG,aAAa,qBAAiCH,EAAEJ,YAAcT,EAAQiB,OAASJ,GAAKb,EAAQkB,MACvH,OAAO","file":"../../../primitives/measurement/widgets.js","sourcesContent":["define([\n    '../util/dom',\n    '../util/event'\n], function (dom, events) {\n    'use strict';\n    function widgetHeight(widget) {\n        if (widget.height != null)\n            return widget.height;\n        let cm = widget.doc.cm;\n        if (!cm)\n            return 0;\n        if (!dom.contains(document.body, widget.node)) {\n            let parentStyle = 'position: relative;';\n            if (widget.coverGutter)\n                parentStyle += 'margin-left: -' + cm.display.gutters.offsetWidth + 'px;';\n            if (widget.noHScroll)\n                parentStyle += 'width: ' + cm.display.wrapper.clientWidth + 'px;';\n            dom.removeChildrenAndAdd(cm.display.measure, dom.elt('div', [widget.node], null, parentStyle));\n        }\n        return widget.height = widget.node.parentNode.offsetHeight;\n    }\n    function eventInWidget(display, e) {\n        for (let n = events.e_target(e); n != display.wrapper; n = n.parentNode) {\n            if (!n || n.nodeType == 1 && n.getAttribute('cm-ignore-events') == 'true' || n.parentNode == display.sizer && n != display.mover)\n                return true;\n        }\n    }\n    return {\n        widgetHeight: widgetHeight,\n        eventInWidget: eventInWidget\n    };\n});"]}