/**
 * skylark-widgets-shells - The skylark shells widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-shells/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-css","skylark-domx-scripter","skylark-domx-finder","skylark-domx-query","skylark-widgets-swt/Widget","skylark-nprogress","skylark-bootbox4","skylark-visibility","skylark-tinycon","./shells"],function(t,e,n,i,s,r,o,l,a,c,u){function d(t,e){t.find("strong").html(e.title),t.find("p").html(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&m(t,e.timeout),t.children().fadeOut(100),e.translate(t.html(),function(e){t.children().fadeIn(100),t.html(e)}),t.off("click").removeClass("pointer"),"function"==typeof e.clickfn&&t.addClass("pointer").on("click",function(n){s(n.target).is(".close")||e.clickfn(),f(t)})}function f(t){t.fadeOut(500,function(){s(this).remove()})}function m(t,e){var n=setTimeout(function(){f(t)},e);t.attr("timeoutId",n),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(e+450)+"ms linear, background-color "+(e+450)+"ms ease-in"),t.addClass("animate")},50),t.on("mouseenter",function(){s(this).css("transition-duration",0)})}var p=r.inherit({options:{i18n:{locale:"en",translate:function(e){return t.Deferred.resolve(e)}},alerts:{container:"",titles:{success:"[[global:alert.success]]",error:"[[global:alert.error]]"}},templator:{parse:null},skins:{}},_construct:function(t){this.overrided(document.body,t),this._titleObj={active:!1,interval:void 0,titles:[]};var e=this;e.isFocused=!0,a.change(function(t,n){"visible"===n?(e.isFocused=!0,e.alternatingTitle("")):"hidden"===n&&(e.isFocused=!1)})},progress:function(){return o},alert:function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:(new Date).getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";var e=s("#"+t.alert_id);t.translate=t.translate||this.option("i18n.translate"),e.length?d(e,t):(t.parseTemplate=t.parseTemplate||this.option("templator.parse"),t.container=t.container||this.option("alerts.container"),function(t,e){t.parseTemplate("alert",t,function(e){t.translate(e,function(e){var n=s("#"+t.alert_id);if(n.length)return d(n,t);(n=s(e)).fadeIn(200),t.container.prepend(n),n.find("button").on("click",function(){return"function"==typeof t.closefn&&t.closefn(),f(n),!1}),t.timeout&&m(n,t.timeout),"function"==typeof t.clickfn&&n.addClass("pointer").on("click",function(e){s(e.target).is(".close")||t.clickfn(),f(n)})})})}(t))},removeAlert:function(t){s("#alert_button_"+t).remove()},alertSuccess:function(t,e){this.alert({title:this.option("alerts.titles.success"),message:t,type:"success",timeout:e||5e3})},alertError:function(t,e){t=t.message||t,this.alert({title:this.option("alerts.titles.error"),message:t,type:"danger",timeout:e||1e4})},alternatingTitle:function(t){if("string"==typeof t){var e=this._titleObj;if(t.length>0&&!app.isFocused)e.titles[0]||(e.titles[0]=window.document.title),this.option("i18n.translate")(t,function(t){e.titles[1]=t,e.interval&&clearInterval(e.interval),e.interval=setInterval(function(){var t=e.titles[1^e.titles.indexOf(window.document.title)];t&&(window.document.title=s("<div/>").html(t).text())},2e3)});else e.interval&&clearInterval(e.interval),e.titles[0]&&(window.document.title=s("<div/>").html(e.titles[0]).text())}},refreshTitle:function(t){var e=this,n=this.option("i18n.translate"),i=this._titleObj;n(t,function(t){i.titles[0]=t,e.alternatingTitle("")})},tinycon:function(e,n){t.isUndefined(n)&&t.isPlainObject(e)&&(n=e,e=void 0),t.isDefined(n)&&c.setOptions(n),t.isDefined(e)&&c.setBubble(e)},reskin:function(t,e,n){if(n||(n=document.getElementById("skinSheet"))){var i=s("body").attr("class").split(/\s+/).filter(function(t){return t.startsWith("skin-")}),r=i[0].slice(5);if(t!==(r="noskin"!==r?r:"")){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,o.onload=function(){n.parentNode.removeChild(n),s("body").removeClass(i.join(" ")),s("body").addClass("skin-"+(t||"noskin"))},document.head.appendChild(o)}}},loadStyleSheet:function(t,n,i,s){return e.loadStyleSheet(t,n,i,s)},removeStyleSheet:function(t){return e.removeStyleSheet(t)},loadScript:function(t,e,i){return n.loadJavaScript(t,e,i)},removeScript:function(t){return n.deleteJavaScript(t)}});return u.Shell=p});
//# sourceMappingURL=sourcemaps/Shell.js.map
