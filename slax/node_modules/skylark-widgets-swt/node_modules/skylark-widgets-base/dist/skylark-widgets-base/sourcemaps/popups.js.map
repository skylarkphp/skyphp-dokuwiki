{"version":3,"sources":["popups.js"],"names":["define","base","popup","widget","reference","position","data","o","x","y","w","h","dw","dh","offset","left","outerHeight","top","$","$el","_elm","appendTo","document","body","this","position_x","position_y","width","height","window","scrollLeft","scrollTop","right_to_left","e","outerWidth","css","show","_trigger","popups"],"mappings":";;;;;;;AAAAA,QACE,UACA,SAASC,GAEV,IAAIC,EAAQ,KAEZ,SAASA,EAAMC,EAAQC,EAAWC,EAAUC,GAC3C,IAAIC,EAEHC,EACAC,EACAC,EACAC,EACAC,EACAC,EAID,QADQ,GAEP,KAAOR,IAAaD,EACnB,OAAO,EACR,MAAQC,KAAcD,EAERC,EAASG,EACTH,EAASI,EACtB,MACD,KAAOJ,KAAcD,GACpBG,EAAIH,EAAUU,UACCC,KAAOX,EAAUY,cACnBT,EAAEU,IACf,MACD,MAAQZ,IAAaD,EACPC,EAASG,EACTH,EAASI,EAGnBL,IAAcE,GAAQY,EAAEd,GAAWE,KAAK,wBAC5CA,EAAOY,EAAEd,GAAWE,KAAK,uBAG1B,IAAIa,EAAMD,EAAEf,EAAOiB,MAEnBD,EAAIE,SAASC,SAASC,MACtBf,EAAIgB,KAAKC,WACThB,EAAIe,KAAKE,WACThB,EAAIS,EAAIQ,QACRhB,EAAIQ,EAAIS,SACRhB,EAAKM,EAAEW,QAAQF,QAAUT,EAAEW,QAAQC,aACnCjB,EAAKK,EAAEW,QAAQD,SAAWV,EAAEW,QAAQE,YACjCC,gBACFxB,SA1CAyB,GA0CQC,aAAehB,EAAEd,GAAW8B,cAC7BhB,EAAEW,QAAQC,aAAe,KAC/BtB,EAAIU,EAAEW,QAAQC,aAAe,IAG5BtB,EAAIE,EAAI,GAAKE,IACfJ,EAAII,GAAMF,EAAI,KAEZD,EAAIE,EAAI,GAAKE,IACfJ,EAAII,GAAMF,EAAI,KAGfQ,EACEgB,KAAMpB,KAASP,EAAGS,IAAQR,IAC1B2B,OAGFlC,EAAQC,EAWRA,EAAOkC,SAAS,QAIjB,OAAOpC,EAAKqC,QACXpC,MAAQA","file":"../popups.js","sourcesContent":["define([\r\n  \"./base\"\r\n],function(base){\r\n\r\n\tvar popup = null;\r\n\r\n\tfunction popup(widget, reference, position, data) {\r\n\t\tvar o, \r\n\t\t\te, \r\n\t\t\tx, \r\n\t\t\ty, \r\n\t\t\tw, \r\n\t\t\th, \r\n\t\t\tdw, \r\n\t\t\tdh, \r\n\t\t\tposition_x,\r\n\t\t\tposition_y,\r\n\t\t\tcond = true;\r\n\t\tswitch(cond) {\r\n\t\t\tcase (!position && !reference):\r\n\t\t\t\treturn false;\r\n\t\t\tcase (!!position && !!reference):\r\n\t\t\t\t//this.reference\t= reference;\r\n\t\t\t\tposition_x\t= position.x;\r\n\t\t\t\tposition_y\t= position.y;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (!position && !!reference):\r\n\t\t\t\to = reference.offset();\r\n\t\t\t\tposition_x\t= o.left + reference.outerHeight();\r\n\t\t\t\tposition_y\t= o.top;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (!!position && !reference):\r\n\t\t\t\tposition_x\t= position.x;\r\n\t\t\t\tposition_y\t= position.y;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif(!!reference && !data && $(reference).data('vakata_contextmenu')) {\r\n\t\t\tdata = $(reference).data('vakata_contextmenu');\r\n\t\t}\r\n\r\n\t\tvar $el = $(widget._elm);\r\n\r\n\t\t$el.appendTo(document.body);\r\n\t\tx = this.position_x;\r\n\t\ty = this.position_y;\r\n\t\tw = $el.width();\r\n\t\th = $el.height();\r\n\t\tdw = $(window).width() + $(window).scrollLeft();\r\n\t\tdh = $(window).height() + $(window).scrollTop();\r\n\t\tif(right_to_left) {\r\n\t\t\tx -= (e.outerWidth() - $(reference).outerWidth());\r\n\t\t\tif(x < $(window).scrollLeft() + 20) {\r\n\t\t\t\tx = $(window).scrollLeft() + 20;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(x + w + 20 > dw) {\r\n\t\t\tx = dw - (w + 20);\r\n\t\t}\r\n\t\tif(y + h + 20 > dh) {\r\n\t\t\ty = dh - (h + 20);\r\n\t\t}\r\n\r\n\t\t$el\r\n\t\t\t.css({ \"left\" : x, \"top\" : y })\r\n\t\t\t.show();\r\n\r\n\r\n\t\tpopup = widget;\r\n\r\n\t\t/**\r\n\t\t * triggered on the document when the contextmenu is shown\r\n\t\t * @event\r\n\t\t * @plugin contextmenu\r\n\t\t * @name context_show.vakata\r\n\t\t * @param {jQuery} reference the element that was right clicked\r\n\t\t * @param {jQuery} element the DOM element of the menu itself\r\n\t\t * @param {Object} position the x & y coordinates of the menu\r\n\t\t */\r\n\t\twidget._trigger(\"show\");\r\n\t}\r\n\r\n\r\n\treturn base.popups = {\r\n\t\tpopup : popup\r\n\t};\r\n});"]}