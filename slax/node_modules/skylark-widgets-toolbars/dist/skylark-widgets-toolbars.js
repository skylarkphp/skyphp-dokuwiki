/**
 * skylark-widgets-toolbars - The skylark toolbar widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-toolbars/
 * @license MIT
 */
!function(t,e){var n=e.define,require=e.require,o="function"==typeof n&&n.amd,a=!o&&"undefined"!=typeof exports;if(!o&&!n){var i={};n=e.define=function(t,e,n){"function"==typeof n?(i[t]={factory:n,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var n=e.split("/"),o=t.split("/");n.pop();for(var a=0;a<o.length;a++)"."!=o[a]&&(".."==o[a]?n.pop():n.push(o[a]));return n.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):i[t]={factory:null,resolved:!0,exports:n}},require=e.require=function(t){if(!i.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=i[t];if(!module.resolved){var n=[];module.deps.forEach(function(t){n.push(require(t))}),module.exports=module.factory.apply(e,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-widgets-toolbars/toolbars",["skylark-langx-ns"],function(t){return t.attach("widgets.toolbars",{})}),t("skylark-widgets-toolbars/toolbar-item",["skylark-langx-types","skylark-domx-query","skylark-widgets-base/widget","./toolbars"],function(t,e,n,o){var a=n.inherit({options:{template:'<li><a tabindex="-1" unselectable="on" class="toolbar-item" href="javascript:;"><span></span></a></li>',menu:{menuWrapper:'<div class="toolbar-menu"></div>',menuItem:'<li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;"><span></span></a></li>',separator:'<li><span class="separator"></span></li>'}},_construct:function(t){this.action=t.action,this.toolbar=t.toolbar,n.prototype._construct.call(this,t)},_init:function(){this.toolbar.addToolItem(this),this.wrapper=e(this._elm),this.el=this.wrapper.find("a.toolbar-item"),this.el.attr("title",this.title).addClass("toolbar-item-"+this.name).data("button",this),this.setIcon(this.icon),this.menu&&(this.menuWrapper=e(this.options.menu.menuWrapper).appendTo(this.wrapper),this.menuWrapper.addClass("toolbar-menu-"+this.name),this.renderMenu());var t=this;this.el.on("mousedown",function(e){var n;return e.preventDefault(),!t.el.hasClass("disabled")&&(t.menu?(t.wrapper.toggleClass("menu-on").siblings("li").removeClass("menu-on"),t.wrapper.is(".menu-on")&&(t.menuWrapper.offset().left+t.menuWrapper.outerWidth()+5-t.toolbar.offset().left-t.toolbar.outerWidth()>0&&t.menuWrapper.css({left:"auto",right:0}),t.trigger("menuexpand")),!1):(n=t.el.data("param"),t.command(n),!1))}),this.wrapper.on("click","a.menu-item",function(n){var o,a;return n.preventDefault(),o=e(n.currentTarget),t.wrapper.removeClass("menu-on"),!o.hasClass("disabled")&&(t.toolbar.removeClass("menu-on"),a=o.data("param"),t.command(a),!1)}),this.wrapper.on("mousedown","a.menu-item",function(t){return!1}),this.action.state.on("changed",function(e,n){var o=n.data;void 0!==o.active&&t._doActive(o.active.value),void 0!==o.disabled&&t._doDisabled(o.disabled.value)})},_doActive:function(t){return this.el.toggleClass("active",t)},_doDisabled:function(t){return this.el.toggleClass("disabled",t)},iconClassOf:function(t){return t?this.toolbar.options.classes&&this.toolbar.options.classes.icons&&this.toolbar.options.classes.icons[t]?this.toolbar.options.classes.icons[t]:"wordpad-icon wordpad-icon-"+t:""},setIcon:function(t){return this.el.find("span").removeClass().addClass(this.iconClassOf(t)).text(this.text)},render:function(){if(this.toolbar.addToolItem(this),this.wrapper=e(this._elm),this.el=this.wrapper.find("a.toolbar-item"),this.el.attr("title",this.title).addClass("toolbar-item-"+this.name).data("button",this),this.setIcon(this.icon),this.menu)return this.menuWrapper=e(this.options.menu.menuWrapper).appendTo(this.wrapper),this.menuWrapper.addClass("toolbar-menu-"+this.name),this.renderMenu()},renderMenu:function(){var n,o,a,i,s,r,l,u;if(t.isArray(this.menu)){for(this.menuEl=e("<ul/>").appendTo(this.menuWrapper),r=this.menu,u=[],a=0,i=r.length;a<i;a++)"|"!==(s=r[a])?(o=e(this.options.menu.menuItem).appendTo(this.menuEl),n=o.find("a.menu-item").attr({title:null!=(l=s.title)?l:s.text,"data-param":s.param}).addClass("menu-item-"+s.name),s.icon?u.push(n.find("span").addClass(this.iconClassOf(s.icon))):u.push(n.find("span").text(s.text))):e(this.options.menu.separator).appendTo(this.menuEl);return u}},command:function(t){this.action.execute(t)},name:{get:function(){return this.action.name}},icon:{get:function(){return this.action.icon}},title:{get:function(){return this.action.tooltip}},text:{get:function(){return this.action.text}},htmlTag:{get:function(){return this.action.htmlTag}},disableTag:{get:function(){return this.action.disableTag}},menu:{get:function(){return this.action.menu}},editable:{get:function(){return this._options.editable}},active:{get:function(){return this.action.active}},disabled:{get:function(){return this.action.disabled}},needFocus:{get:function(){return this.action.needFocus}},shortcut:{get:function(){return this.action.shortcut}}});return o.ToolbarItem=a}),t("skylark-widgets-toolbars/toolbar",["skylark-domx-query","skylark-domx-plugins-panels/toolbar","skylark-widgets-base/widget","./toolbars","./toolbar-item"],function(t,e,n,o,a){var i=n.inherit({klassName:"Toolbar",pluginName:"lark.wordpad.toolbar",options:{template:'<div class="domx-toolbar"><ul></ul></div>'},_construct:function(t,e){n.prototype._construct.call(this,t,e)},_init:function(){this._xtoolbar=e.instantiate(this._elm,this.options),this.buttons=[];for(var t=this.options.actions,n=0;n<t.length;n++){var o=t[n];if("|"!==o.name){var i=o.toolItemCtor;i||(i=a),this.buttons.push(new i({action:o,toolbar:this}))}else this._xtoolbar.addSeparator()}},addToolItem:function(t){this._xtoolbar.addToolItem(t)},findButton:function(t){var e;return null!=(e=this._xtoolbar.list.find(".toolbar-item-"+t).data("button"))?e:null}});return i.addButton=function(t){return this.buttons[t.prototype.name]=t},i.buttons={},o.Toolbar=i}),t("skylark-widgets-toolbars/main",["./toolbars","./toolbar","./toolbar-item"],function(t){return t}),t("skylark-widgets-toolbars",["skylark-widgets-toolbars/main"],function(t){return t})}(n),!o){var s=require("skylark-langx-ns");a?module.exports=s:e.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-widgets-toolbars.js.map
