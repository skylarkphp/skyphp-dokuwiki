/**
 * skylark-widgets-wordpad - The skylark richeditor widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-wordpad/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-widgets-base/actions/Action","./Wordpad","./i18n"],function(t,e,i,s){var a=e.inherit({htmlTag:"",disableTag:"",menu:!1,active:{get:function(){return this.state.get("active")},set:function(t){return this.state.set("active",t)}},disabled:{get:function(){return this.state.get("disabled")},set:function(t){return this.state.set("disabled",t)}},needFocus:!0,_construct:function(i){e.prototype._construct.call(this,i),this.title=s.translate(this.name);var a=this;this.editor.on("blur",function(){if(a.editor.body.is(":visible")&&a.editor.body.is("[contenteditable]")&&!a.editor.editable.clipboard.pasting)return a.setActive(!1),a.setDisabled(!1)}),null!=this.shortcut&&this.editor.editable.hotkeys.add(this.shortcut,function(t){return a.execute(),!1});var n=this.htmlTag.split(",");for(k=0,len=n.length;k<len;k++)tag=n[k],tag=t.trim(tag),tag&&t.inArray(tag,this.editor.editable.formatter._allowedTags)<0&&this.editor.editable.formatter._allowedTags.push(tag);this.editor.on("selectionchanged",function(t){if(a.editor.editable.inputManager.focused)return a._status()}),this._init()},_init:function(){},_disableStatus:function(){var t,e,i;return i=this.editor.editable.selection.startNodes(),e=this.editor.editable.selection.endNodes(),t=i.filter(this.disableTag).length>0||e.filter(this.disableTag).length>0,this.setDisabled(t),this.disabled&&this.setActive(!1),this.disabled},_activeStatus:function(){var t,e,i,s,a;return a=this.editor.editable.selection.startNodes(),i=this.editor.editable.selection.endNodes(),s=a.filter(this.htmlTag),e=i.filter(this.htmlTag),t=s.length>0&&e.length>0&&s.is(e),this.node=t?s:null,this.setActive(t),this.active},_status:function(){if(this._disableStatus(),!this.disabled)return this._activeStatus()},setActive:function(t){t!==this.active&&(this.active=t)},setDisabled:function(t){t!==this.disabled&&(this.disabled=t)}});return a.prototype._t=s.translate,a.i18n=s,a});
//# sourceMappingURL=sourcemaps/Action.js.map
