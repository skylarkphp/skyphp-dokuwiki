/**
 * skylark-widgets-wordpad - The skylark richeditor widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-wordpad/
 * @license MIT
 */
define(["skylark-domx-query","skylark-codemirror/CodeMirror","../../addons","../../Action","skylark-texts-html","skylark-codemirror/addon/beautify/beautify","skylark-codemirror/mode/xml/xml","skylark-codemirror/mode/css/css","skylark-codemirror/mode/javascript/javascript","skylark-codemirror/mode/htmlmixed/htmlmixed"],function(t,e,r,i,o){var a=i.inherit({name:"html",icon:"html",needFocus:!1,_init:function(){var t;return i.prototype._init.call(this),this.editor.textarea.on("focus",(t=this,function(e){return t.editor.el.addClass("focus").removeClass("error")})),this.editor.textarea.on("blur",function(t){return function(e){return t.editor.el.removeClass("focus"),t.editor.setValue(t.editor.textarea.val())}}(this)),this.editor.textarea.on("input",function(t){return function(e){return t._resizeTextarea()}}(this))},status:function(){},_execute:function(){var t,r,i,a,s=this;if(this.editor.blur(),this.editor.el.toggleClass("wordpad-html"),this.editor.htmlMode=this.editor.el.hasClass("wordpad-html"),this.editor.htmlMode){this.editor.hidePopover();var d={mode:"htmlmixed",lineWrapping:!0,dragDrop:!1,autoCloseTags:!0,matchTags:!0,autoCloseBrackets:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!1,tabSize:4,hintOptions:{completionSingle:!1},beautify:{html:{beautifyFunc:o.beautify}},lineNumbers:!0};this.editor.sync(),this.CodeMirrorEditor?(this.CodeMirrorEditor.setValue(this.editor.textarea.val()),this.CodeMirrorEditor.beautify()):(this.CodeMirrorEditor=e.fromTextArea(this.editor.textarea[0],d),this.CodeMirrorEditor.on("blur",function(){s.editor.setValue(s.CodeMirrorEditor.getValue())}))}else this.editor.setValue(this.CodeMirrorEditor.getValue());for(r=0,i=(a=this.editor._actions).length;r<i;r++)"html"===(t=a[r]).name?t.setActive(this.editor.htmlMode):t.setDisabled(this.editor.htmlMode);return null},beautifyHTML:function(){return arguments[0]},_resizeTextarea:function(){return this._textareaPadding||(this._textareaPadding=this.editor.textarea.innerHeight()-this.editor.textarea.height()),this.editor.textarea.height(this.editor.textarea[0].scrollHeight-this._textareaPadding)}});return r.actions.html=a,a});
//# sourceMappingURL=../../sourcemaps/addons/actions/HtmlAction.js.map
